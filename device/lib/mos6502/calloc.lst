                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module calloc
                              6 	.optsdcc -mmos6502
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _memset
                             12 	.globl _malloc
                             13 	.globl _calloc_PARM_2
                             14 	.globl _calloc
                             15 ;--------------------------------------------------------
                             16 ; ZP ram data
                             17 ;--------------------------------------------------------
                             18 	.area ZP      (PAG)
   0000                      19 _calloc_sloc0_1_0:
   0000                      20 	.ds 4
                             21 ;--------------------------------------------------------
                             22 ; overlayable items in ram
                             23 ;--------------------------------------------------------
                             24 ;--------------------------------------------------------
                             25 ; uninitialized external ram data
                             26 ;--------------------------------------------------------
                             27 	.area BSS
   0000                      28 _calloc_PARM_2:
   0000                      29 	.ds 2
   0002                      30 _calloc_ptr_65536_62:
   0002                      31 	.ds 2
                             32 ;--------------------------------------------------------
                             33 ; absolute external ram data
                             34 ;--------------------------------------------------------
                             35 	.area DABS    (ABS)
                             36 ;--------------------------------------------------------
                             37 ; initialized external ram data
                             38 ;--------------------------------------------------------
                             39 	.area DATA
                             40 ;--------------------------------------------------------
                             41 ; global & static initialisations
                             42 ;--------------------------------------------------------
                             43 	.area _CODE
                             44 	.area GSINIT
                             45 	.area GSFINAL
                             46 	.area GSINIT
                             47 ;--------------------------------------------------------
                             48 ; Home
                             49 ;--------------------------------------------------------
                             50 	.area _CODE
                             51 	.area _CODE
                             52 ;--------------------------------------------------------
                             53 ; code
                             54 ;--------------------------------------------------------
                             55 	.area CODE
                             56 ;------------------------------------------------------------
                             57 ;Allocation info for local variables in function 'calloc'
                             58 ;------------------------------------------------------------
                             59 ;sloc0                     Allocated with name '_calloc_sloc0_1_0'
                             60 ;size                      Allocated with name '_calloc_PARM_2'
                             61 ;nmemb                     Allocated to registers a x 
                             62 ;ptr                       Allocated with name '_calloc_ptr_65536_62'
                             63 ;msize                     Allocated with name '_calloc_msize_65536_62'
                             64 ;------------------------------------------------------------
                             65 ;	../calloc.c: 44: void *calloc (size_t nmemb, size_t size)
                             66 ;	-----------------------------------------
                             67 ;	 function calloc
                             68 ;	-----------------------------------------
                             69 ;	Register assignment is optimal.
                             70 ;	Stack space usage: 0 bytes.
   0000                      71 _calloc:
                             72 ;	../calloc.c: 49: unsigned long msize = (unsigned long)nmemb * (unsigned long)size;
   0000 8Dr00r00      [ 4]   73 	sta	__mullong_PARM_1
   0003 8Er01r00      [ 4]   74 	stx	(__mullong_PARM_1 + 1)
   0006 A0 00         [ 2]   75 	ldy	#0x00
   0008 8Cr02r00      [ 4]   76 	sty	(__mullong_PARM_1 + 2)
   000B 8Cr03r00      [ 4]   77 	sty	(__mullong_PARM_1 + 3)
   000E ADr00r00      [ 4]   78 	lda	_calloc_PARM_2
   0011 8Dr00r00      [ 4]   79 	sta	__mullong_PARM_2
   0014 ADr01r00      [ 4]   80 	lda	(_calloc_PARM_2 + 1)
   0017 8Dr01r00      [ 4]   81 	sta	(__mullong_PARM_2 + 1)
   001A 8Cr02r00      [ 4]   82 	sty	(__mullong_PARM_2 + 2)
   001D 8Cr03r00      [ 4]   83 	sty	(__mullong_PARM_2 + 3)
                             84 ;	../calloc.c: 54: if (msize > SIZE_MAX)
   0020 20r00r00      [ 6]   85 	jsr	__mullong
   0023 85*00         [ 3]   86 	sta	*_calloc_sloc0_1_0
   0025 86*01         [ 3]   87 	stx	*(_calloc_sloc0_1_0 + 1)
   0027 A5*00         [ 3]   88 	lda	*___SDCC_m6502_ret2
   0029 85*02         [ 3]   89 	sta	*(_calloc_sloc0_1_0 + 2)
   002B A5*00         [ 3]   90 	lda	*___SDCC_m6502_ret3
   002D 85*03         [ 3]   91 	sta	*(_calloc_sloc0_1_0 + 3)
   002F A9 FF         [ 2]   92 	lda	#0xff
   0031 38            [ 2]   93 	sec
   0032 E5*00         [ 3]   94 	sbc	*_calloc_sloc0_1_0
   0034 A9 FF         [ 2]   95 	lda	#0xff
   0036 E5*01         [ 3]   96 	sbc	*(_calloc_sloc0_1_0 + 1)
   0038 A9 00         [ 2]   97 	lda	#0x00
   003A E5*02         [ 3]   98 	sbc	*(_calloc_sloc0_1_0 + 2)
   003C A9 00         [ 2]   99 	lda	#0x00
   003E E5*03         [ 3]  100 	sbc	*(_calloc_sloc0_1_0 + 3)
   0040 B0 04         [ 4]  101 	bcs	00102$
                            102 ;	../calloc.c: 55: return(0);
   0042 A9 00         [ 2]  103 	lda	#0x00
   0044 AA            [ 2]  104 	tax
   0045 60            [ 6]  105 	rts
   0046                     106 00102$:
                            107 ;	../calloc.c: 57: if (ptr = malloc(msize))
   0046 A6*01         [ 3]  108 	ldx	*(_calloc_sloc0_1_0 + 1)
   0048 A5*00         [ 3]  109 	lda	*_calloc_sloc0_1_0
   004A 20r00r00      [ 6]  110 	jsr	_malloc
   004D 8Dr02r00      [ 4]  111 	sta	_calloc_ptr_65536_62
   0050 8Er03r00      [ 4]  112 	stx	(_calloc_ptr_65536_62 + 1)
   0053 C9 00         [ 2]  113 	cmp	#0x00
   0055 D0 02         [ 4]  114 	bne	00116$
   0057 E0 00         [ 2]  115 	cpx	#0x00
   0059                     116 00116$:
   0059 F0 18         [ 4]  117 	beq	00104$
                            118 ;	../calloc.c: 58: memset(ptr, 0, msize);
   005B A2 00         [ 2]  119 	ldx	#0x00
   005D 8Er00r00      [ 4]  120 	stx	_memset_PARM_2
   0060 A5*00         [ 3]  121 	lda	*_calloc_sloc0_1_0
   0062 8Dr00r00      [ 4]  122 	sta	_memset_PARM_3
   0065 A5*01         [ 3]  123 	lda	*(_calloc_sloc0_1_0 + 1)
   0067 8Dr01r00      [ 4]  124 	sta	(_memset_PARM_3 + 1)
   006A AEr03r00      [ 4]  125 	ldx	(_calloc_ptr_65536_62 + 1)
   006D ADr02r00      [ 4]  126 	lda	_calloc_ptr_65536_62
   0070 20r00r00      [ 6]  127 	jsr	_memset
   0073                     128 00104$:
                            129 ;	../calloc.c: 60: return(ptr);
   0073 AEr03r00      [ 4]  130 	ldx	(_calloc_ptr_65536_62 + 1)
   0076 ADr02r00      [ 4]  131 	lda	_calloc_ptr_65536_62
                            132 ;	../calloc.c: 61: }
   0079 60            [ 6]  133 	rts
                            134 	.area CODE
                            135 	.area RODATA
                            136 	.area XINIT
                            137 	.area CABS    (ABS)
