                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module bsearch
                              6 	.optsdcc -mmos6502
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _bsearch_PARM_5
                             12 	.globl _bsearch_PARM_4
                             13 	.globl _bsearch_PARM_3
                             14 	.globl _bsearch_PARM_2
                             15 	.globl _bsearch
                             16 ;--------------------------------------------------------
                             17 ; ZP ram data
                             18 ;--------------------------------------------------------
                             19 	.area ZP      (PAG)
   0000                      20 _bsearch_sloc0_1_0:
   0000                      21 	.ds 2
                             22 ;--------------------------------------------------------
                             23 ; overlayable items in ram
                             24 ;--------------------------------------------------------
                             25 ;--------------------------------------------------------
                             26 ; uninitialized external ram data
                             27 ;--------------------------------------------------------
                             28 	.area BSS
   0000                      29 _bsearch_PARM_2:
   0000                      30 	.ds 2
   0002                      31 _bsearch_PARM_3:
   0002                      32 	.ds 2
   0004                      33 _bsearch_PARM_4:
   0004                      34 	.ds 2
   0006                      35 _bsearch_PARM_5:
   0006                      36 	.ds 2
   0008                      37 _bsearch_key_65536_36:
   0008                      38 	.ds 2
   000A                      39 _bsearch_left_131072_39:
   000A                      40 	.ds 2
   000C                      41 _bsearch_middle_196608_40:
   000C                      42 	.ds 2
   000E                      43 _bsearch_c_196608_40:
   000E                      44 	.ds 2
                             45 ;--------------------------------------------------------
                             46 ; absolute external ram data
                             47 ;--------------------------------------------------------
                             48 	.area DABS    (ABS)
                             49 ;--------------------------------------------------------
                             50 ; initialized external ram data
                             51 ;--------------------------------------------------------
                             52 	.area DATA
                             53 ;--------------------------------------------------------
                             54 ; global & static initialisations
                             55 ;--------------------------------------------------------
                             56 	.area _CODE
                             57 	.area GSINIT
                             58 	.area GSFINAL
                             59 	.area GSINIT
                             60 ;--------------------------------------------------------
                             61 ; Home
                             62 ;--------------------------------------------------------
                             63 	.area _CODE
                             64 	.area _CODE
                             65 ;--------------------------------------------------------
                             66 ; code
                             67 ;--------------------------------------------------------
                             68 	.area CODE
                             69 ;------------------------------------------------------------
                             70 ;Allocation info for local variables in function 'bsearch'
                             71 ;------------------------------------------------------------
                             72 ;sloc0                     Allocated with name '_bsearch_sloc0_1_0'
                             73 ;base                      Allocated with name '_bsearch_PARM_2'
                             74 ;nmemb                     Allocated with name '_bsearch_PARM_3'
                             75 ;size                      Allocated with name '_bsearch_PARM_4'
                             76 ;compar                    Allocated with name '_bsearch_PARM_5'
                             77 ;key                       Allocated with name '_bsearch_key_65536_36'
                             78 ;left                      Allocated with name '_bsearch_left_131072_39'
                             79 ;middle                    Allocated with name '_bsearch_middle_196608_40'
                             80 ;c                         Allocated with name '_bsearch_c_196608_40'
                             81 ;------------------------------------------------------------
                             82 ;	../bsearch.c: 31: void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *) __reentrant)
                             83 ;	-----------------------------------------
                             84 ;	 function bsearch
                             85 ;	-----------------------------------------
                             86 ;	Register assignment is optimal.
                             87 ;	Stack space usage: 0 bytes.
   0000                      88 _bsearch:
   0000 8Dr08r00      [ 4]   89 	sta	_bsearch_key_65536_36
   0003 8Er09r00      [ 4]   90 	stx	(_bsearch_key_65536_36 + 1)
                             91 ;	../bsearch.c: 33: for(const char *left = base; nmemb;)
   0006 ADr00r00      [ 4]   92 	lda	_bsearch_PARM_2
   0009 8Dr0Ar00      [ 4]   93 	sta	_bsearch_left_131072_39
   000C ADr01r00      [ 4]   94 	lda	(_bsearch_PARM_2 + 1)
   000F 8Dr0Br00      [ 4]   95 	sta	(_bsearch_left_131072_39 + 1)
   0012                      96 00109$:
   0012 ADr03r00      [ 4]   97 	lda	(_bsearch_PARM_3 + 1)
   0015 0Dr02r00      [ 4]   98 	ora	_bsearch_PARM_3
   0018 D0 03         [ 4]   99 	bne	00129$
   001A 4CrDDr00      [ 3]  100 	jmp	00107$
   001D                     101 00129$:
                            102 ;	../bsearch.c: 35: const char *middle = left + nmemb / 2 * size;
   001D ADr02r00      [ 4]  103 	lda	_bsearch_PARM_3
   0020 AEr03r00      [ 4]  104 	ldx	(_bsearch_PARM_3 + 1)
   0023 86*00         [ 3]  105 	stx	*(__TEMP+0)
   0025 46*00         [ 5]  106 	lsr	*(__TEMP+0)
   0027 6A            [ 2]  107 	ror	a
   0028 A6*00         [ 3]  108 	ldx	*(__TEMP+0)
   002A 85*00         [ 3]  109 	sta	*_bsearch_sloc0_1_0
   002C 86*01         [ 3]  110 	stx	*(_bsearch_sloc0_1_0 + 1)
   002E ADr04r00      [ 4]  111 	lda	_bsearch_PARM_4
   0031 8Dr00r00      [ 4]  112 	sta	__mulint_PARM_2
   0034 ADr05r00      [ 4]  113 	lda	(_bsearch_PARM_4 + 1)
   0037 8Dr01r00      [ 4]  114 	sta	(__mulint_PARM_2 + 1)
   003A A6*01         [ 3]  115 	ldx	*(_bsearch_sloc0_1_0 + 1)
   003C A5*00         [ 3]  116 	lda	*_bsearch_sloc0_1_0
   003E 20r00r00      [ 6]  117 	jsr	__mulint
   0041 18            [ 2]  118 	clc
   0042 6Dr0Ar00      [ 4]  119 	adc	_bsearch_left_131072_39
   0045 8Dr0Cr00      [ 4]  120 	sta	_bsearch_middle_196608_40
   0048 8A            [ 2]  121 	txa
   0049 6Dr0Br00      [ 4]  122 	adc	(_bsearch_left_131072_39 + 1)
   004C 8Dr0Dr00      [ 4]  123 	sta	(_bsearch_middle_196608_40 + 1)
                            124 ;	../bsearch.c: 36: int c = (*compar)(key, middle);
   004F ADr0Cr00      [ 4]  125 	lda	_bsearch_middle_196608_40
   0052 AEr0Dr00      [ 4]  126 	ldx	(_bsearch_middle_196608_40 + 1)
   0055 85*00         [ 3]  127 	sta	*(__TEMP+0)
   0057 8A            [ 2]  128 	txa
   0058 48            [ 3]  129 	pha
   0059 A5*00         [ 3]  130 	lda	*(__TEMP+0)
   005B 48            [ 3]  131 	pha
   005C ADr06r00      [ 4]  132 	lda	_bsearch_PARM_5
   005F 85*00         [ 3]  133 	sta	*(__TEMP+0)
   0061 ADr07r00      [ 4]  134 	lda	(_bsearch_PARM_5 + 1)
   0064 85*01         [ 3]  135 	sta	*(__TEMP+1)
   0066 AEr09r00      [ 4]  136 	ldx	(_bsearch_key_65536_36 + 1)
   0069 ADr08r00      [ 4]  137 	lda	_bsearch_key_65536_36
   006C 20r00r00      [ 6]  138 	jsr	__sdcc_indirect_jsr
   006F 8Dr0Er00      [ 4]  139 	sta	_bsearch_c_196608_40
   0072 8Er0Fr00      [ 4]  140 	stx	(_bsearch_c_196608_40 + 1)
   0075 85*00         [ 3]  141 	sta	*(__TEMP+0)
   0077 68            [ 4]  142 	pla
   0078 68            [ 4]  143 	pla
                            144 ;	../bsearch.c: 38: if(c < 0)
   0079 ADr0Fr00      [ 4]  145 	lda	(_bsearch_c_196608_40 + 1)
   007C 38            [ 2]  146 	sec
   007D E9 00         [ 2]  147 	sbc	#0x00
   007F 50 04         [ 4]  148 	bvc	00131$
   0081 10 04         [ 4]  149 	bpl	00130$
   0083 30 0F         [ 4]  150 	bmi	00105$
   0085                     151 00131$:
   0085 10 0D         [ 4]  152 	bpl	00105$
   0087                     153 00130$:
                            154 ;	../bsearch.c: 39: nmemb = nmemb / 2;	
   0087 A5*00         [ 3]  155 	lda	*_bsearch_sloc0_1_0
   0089 8Dr02r00      [ 4]  156 	sta	_bsearch_PARM_3
   008C A5*01         [ 3]  157 	lda	*(_bsearch_sloc0_1_0 + 1)
   008E 8Dr03r00      [ 4]  158 	sta	(_bsearch_PARM_3 + 1)
   0091 4Cr12r00      [ 3]  159 	jmp	00109$
   0094                     160 00105$:
                            161 ;	../bsearch.c: 40: else if(c > 0)
   0094 A9 00         [ 2]  162 	lda	#0x00
   0096 38            [ 2]  163 	sec
   0097 EDr0Er00      [ 4]  164 	sbc	_bsearch_c_196608_40
   009A A9 00         [ 2]  165 	lda	#0x00
   009C EDr0Fr00      [ 4]  166 	sbc	(_bsearch_c_196608_40 + 1)
   009F 50 04         [ 4]  167 	bvc	00134$
   00A1 10 04         [ 4]  168 	bpl	00133$
   00A3 30 31         [ 4]  169 	bmi	00102$
   00A5                     170 00134$:
   00A5 10 2F         [ 4]  171 	bpl	00102$
   00A7                     172 00133$:
                            173 ;	../bsearch.c: 42: left = middle + size;
   00A7 ADr0Cr00      [ 4]  174 	lda	_bsearch_middle_196608_40
   00AA 18            [ 2]  175 	clc
   00AB 6Dr04r00      [ 4]  176 	adc	_bsearch_PARM_4
   00AE 8Dr0Ar00      [ 4]  177 	sta	_bsearch_left_131072_39
   00B1 ADr0Dr00      [ 4]  178 	lda	(_bsearch_middle_196608_40 + 1)
   00B4 6Dr05r00      [ 4]  179 	adc	(_bsearch_PARM_4 + 1)
   00B7 8Dr0Br00      [ 4]  180 	sta	(_bsearch_left_131072_39 + 1)
                            181 ;	../bsearch.c: 43: nmemb = (nmemb - 1) / 2;
   00BA ADr02r00      [ 4]  182 	lda	_bsearch_PARM_3
   00BD AEr03r00      [ 4]  183 	ldx	(_bsearch_PARM_3 + 1)
   00C0 38            [ 2]  184 	sec
   00C1 E9 01         [ 2]  185 	sbc	#0x01
   00C3 B0 01         [ 4]  186 	bcs	00136$
   00C5 CA            [ 2]  187 	dex
   00C6                     188 00136$:
   00C6 86*00         [ 3]  189 	stx	*(__TEMP+0)
   00C8 46*00         [ 5]  190 	lsr	*(__TEMP+0)
   00CA 6A            [ 2]  191 	ror	a
   00CB A6*00         [ 3]  192 	ldx	*(__TEMP+0)
   00CD 8Dr02r00      [ 4]  193 	sta	_bsearch_PARM_3
   00D0 8Er03r00      [ 4]  194 	stx	(_bsearch_PARM_3 + 1)
   00D3 4Cr12r00      [ 3]  195 	jmp	00109$
   00D6                     196 00102$:
                            197 ;	../bsearch.c: 46: return(middle);
   00D6 ADr0Cr00      [ 4]  198 	lda	_bsearch_middle_196608_40
   00D9 AEr0Dr00      [ 4]  199 	ldx	(_bsearch_middle_196608_40 + 1)
   00DC 60            [ 6]  200 	rts
   00DD                     201 00107$:
                            202 ;	../bsearch.c: 49: return(0);
   00DD A9 00         [ 2]  203 	lda	#0x00
   00DF AA            [ 2]  204 	tax
                            205 ;	../bsearch.c: 50: }
   00E0 60            [ 6]  206 	rts
                            207 	.area CODE
                            208 	.area RODATA
                            209 	.area XINIT
                            210 	.area CABS    (ABS)
