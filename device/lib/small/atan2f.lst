                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module atan2f
                                      6 	.optsdcc -mmcs51 --model-small
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _fabsf
                                     12 	.globl _atanf
                                     13 	.globl _atan2f_PARM_2
                                     14 	.globl _atan2f
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
      000000                         34 _atan2f_PARM_2:
      000000                         35 	.ds 4
      000004                         36 _atan2f_x_65536_25:
      000004                         37 	.ds 4
      000008                         38 _atan2f_r_65536_26:
      000008                         39 	.ds 4
                                     40 ;--------------------------------------------------------
                                     41 ; overlayable items in internal ram
                                     42 ;--------------------------------------------------------
                                     43 ;--------------------------------------------------------
                                     44 ; indirectly addressable internal ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area ISEG    (DATA)
                                     47 ;--------------------------------------------------------
                                     48 ; absolute internal ram data
                                     49 ;--------------------------------------------------------
                                     50 	.area IABS    (ABS,DATA)
                                     51 	.area IABS    (ABS,DATA)
                                     52 ;--------------------------------------------------------
                                     53 ; bit data
                                     54 ;--------------------------------------------------------
                                     55 	.area BSEG    (BIT)
      000000                         56 _atan2f_sloc0_1_0:
      000000                         57 	.ds 1
                                     58 ;--------------------------------------------------------
                                     59 ; paged external ram data
                                     60 ;--------------------------------------------------------
                                     61 	.area PSEG    (PAG,XDATA)
                                     62 ;--------------------------------------------------------
                                     63 ; uninitialized external ram data
                                     64 ;--------------------------------------------------------
                                     65 	.area XSEG    (XDATA)
                                     66 ;--------------------------------------------------------
                                     67 ; absolute external ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area XABS    (ABS,XDATA)
                                     70 ;--------------------------------------------------------
                                     71 ; initialized external ram data
                                     72 ;--------------------------------------------------------
                                     73 	.area XISEG   (XDATA)
                                     74 	.area HOME    (CODE)
                                     75 	.area GSINIT0 (CODE)
                                     76 	.area GSINIT1 (CODE)
                                     77 	.area GSINIT2 (CODE)
                                     78 	.area GSINIT3 (CODE)
                                     79 	.area GSINIT4 (CODE)
                                     80 	.area GSINIT5 (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 	.area GSFINAL (CODE)
                                     83 	.area CSEG    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; global & static initialisations
                                     86 ;--------------------------------------------------------
                                     87 	.area HOME    (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 	.area GSFINAL (CODE)
                                     90 	.area GSINIT  (CODE)
                                     91 ;--------------------------------------------------------
                                     92 ; Home
                                     93 ;--------------------------------------------------------
                                     94 	.area HOME    (CODE)
                                     95 	.area HOME    (CODE)
                                     96 ;--------------------------------------------------------
                                     97 ; code
                                     98 ;--------------------------------------------------------
                                     99 	.area CSEG    (CODE)
                                    100 ;------------------------------------------------------------
                                    101 ;Allocation info for local variables in function 'atan2f'
                                    102 ;------------------------------------------------------------
                                    103 ;y                         Allocated with name '_atan2f_PARM_2'
                                    104 ;x                         Allocated with name '_atan2f_x_65536_25'
                                    105 ;r                         Allocated with name '_atan2f_r_65536_26'
                                    106 ;------------------------------------------------------------
                                    107 ;	atan2f.c:34: float atan2f(float x, float y)
                                    108 ;	-----------------------------------------
                                    109 ;	 function atan2f
                                    110 ;	-----------------------------------------
      000000                        111 _atan2f:
                           000007   112 	ar7 = 0x07
                           000006   113 	ar6 = 0x06
                           000005   114 	ar5 = 0x05
                           000004   115 	ar4 = 0x04
                           000003   116 	ar3 = 0x03
                           000002   117 	ar2 = 0x02
                           000001   118 	ar1 = 0x01
                           000000   119 	ar0 = 0x00
      000000 85 82*04         [24]  120 	mov	_atan2f_x_65536_25,dpl
      000003 85 83*05         [24]  121 	mov	(_atan2f_x_65536_25 + 1),dph
      000006 85 F0*06         [24]  122 	mov	(_atan2f_x_65536_25 + 2),b
      000009 F5*07            [12]  123 	mov	(_atan2f_x_65536_25 + 3),a
                                    124 ;	atan2f.c:38: if ((x==0.0) && (y==0.0))
      00000B 85*04 F0         [24]  125 	mov	b,_atan2f_x_65536_25
      00000E E5*05            [12]  126 	mov	a,(_atan2f_x_65536_25 + 1)
      000010 42 F0            [12]  127 	orl	b,a
      000012 E5*06            [12]  128 	mov	a,(_atan2f_x_65536_25 + 2)
      000014 42 F0            [12]  129 	orl	b,a
      000016 E5*07            [12]  130 	mov	a,(_atan2f_x_65536_25 + 3)
      000018 54 7F            [12]  131 	anl	a,#0x7F
      00001A 45 F0            [12]  132 	orl	a,b
      00001C 70 1F            [24]  133 	jnz	00102$
      00001E 85*00 F0         [24]  134 	mov	b,_atan2f_PARM_2
      000021 E5*01            [12]  135 	mov	a,(_atan2f_PARM_2 + 1)
      000023 42 F0            [12]  136 	orl	b,a
      000025 E5*02            [12]  137 	mov	a,(_atan2f_PARM_2 + 2)
      000027 42 F0            [12]  138 	orl	b,a
      000029 E5*03            [12]  139 	mov	a,(_atan2f_PARM_2 + 3)
      00002B 54 7F            [12]  140 	anl	a,#0x7F
      00002D 45 F0            [12]  141 	orl	a,b
                                    142 ;	atan2f.c:40: errno=EDOM;
      00002F 70 0C            [24]  143 	jnz	00102$
      000031 75*00 21         [24]  144 	mov	_errno,#0x21
      000034 F5*01            [12]  145 	mov	(_errno + 1),a
                                    146 ;	atan2f.c:41: return 0.0;
      000036 90 00 00         [24]  147 	mov	dptr,#(0x00&0x00ff)
      000039 E4               [12]  148 	clr	a
      00003A F5 F0            [12]  149 	mov	b,a
      00003C 22               [24]  150 	ret
      00003D                        151 00102$:
                                    152 ;	atan2f.c:44: if(fabsf(y)>=fabsf(x))
      00003D 85*00 82         [24]  153 	mov	dpl,_atan2f_PARM_2
      000040 85*01 83         [24]  154 	mov	dph,(_atan2f_PARM_2 + 1)
      000043 85*02 F0         [24]  155 	mov	b,(_atan2f_PARM_2 + 2)
      000046 E5*03            [12]  156 	mov	a,(_atan2f_PARM_2 + 3)
      000048 12r00r00         [24]  157 	lcall	_fabsf
      00004B A8 82            [24]  158 	mov	r0,dpl
      00004D A9 83            [24]  159 	mov	r1,dph
      00004F AA F0            [24]  160 	mov	r2,b
      000051 FB               [12]  161 	mov	r3,a
      000052 85*04 82         [24]  162 	mov	dpl,_atan2f_x_65536_25
      000055 85*05 83         [24]  163 	mov	dph,(_atan2f_x_65536_25 + 1)
      000058 85*06 F0         [24]  164 	mov	b,(_atan2f_x_65536_25 + 2)
      00005B E5*07            [12]  165 	mov	a,(_atan2f_x_65536_25 + 3)
      00005D C0 03            [24]  166 	push	ar3
      00005F C0 02            [24]  167 	push	ar2
      000061 C0 01            [24]  168 	push	ar1
      000063 C0 00            [24]  169 	push	ar0
      000065 12r00r00         [24]  170 	lcall	_fabsf
      000068 AC 82            [24]  171 	mov	r4,dpl
      00006A AD 83            [24]  172 	mov	r5,dph
      00006C AE F0            [24]  173 	mov	r6,b
      00006E FF               [12]  174 	mov	r7,a
      00006F D0 00            [24]  175 	pop	ar0
      000071 D0 01            [24]  176 	pop	ar1
      000073 D0 02            [24]  177 	pop	ar2
      000075 D0 03            [24]  178 	pop	ar3
      000077 C0 04            [24]  179 	push	ar4
      000079 C0 05            [24]  180 	push	ar5
      00007B C0 06            [24]  181 	push	ar6
      00007D C0 07            [24]  182 	push	ar7
      00007F 88 82            [24]  183 	mov	dpl,r0
      000081 89 83            [24]  184 	mov	dph,r1
      000083 8A F0            [24]  185 	mov	b,r2
      000085 EB               [12]  186 	mov	a,r3
      000086 12r00r00         [24]  187 	lcall	___fslt
      000089 E5 81            [12]  188 	mov	a,sp
      00008B 24 FC            [12]  189 	add	a,#0xfc
      00008D F5 81            [12]  190 	mov	sp,a
      00008F E5 82            [12]  191 	mov	a,dpl
      000091 24 FF            [12]  192 	add	a,#0xff
      000093 92*00            [24]  193 	mov	_atan2f_sloc0_1_0,c
      000095 50 03            [24]  194 	jnc	00147$
      000097 02r01r6C         [24]  195 	ljmp	00107$
      00009A                        196 00147$:
                                    197 ;	atan2f.c:46: r=atanf(x/y);
      00009A C0*00            [24]  198 	push	_atan2f_PARM_2
      00009C C0*01            [24]  199 	push	(_atan2f_PARM_2 + 1)
      00009E C0*02            [24]  200 	push	(_atan2f_PARM_2 + 2)
      0000A0 C0*03            [24]  201 	push	(_atan2f_PARM_2 + 3)
      0000A2 85*04 82         [24]  202 	mov	dpl,_atan2f_x_65536_25
      0000A5 85*05 83         [24]  203 	mov	dph,(_atan2f_x_65536_25 + 1)
      0000A8 85*06 F0         [24]  204 	mov	b,(_atan2f_x_65536_25 + 2)
      0000AB E5*07            [12]  205 	mov	a,(_atan2f_x_65536_25 + 3)
      0000AD 12r00r00         [24]  206 	lcall	___fsdiv
      0000B0 AC 82            [24]  207 	mov	r4,dpl
      0000B2 AD 83            [24]  208 	mov	r5,dph
      0000B4 AE F0            [24]  209 	mov	r6,b
      0000B6 FF               [12]  210 	mov	r7,a
      0000B7 E5 81            [12]  211 	mov	a,sp
      0000B9 24 FC            [12]  212 	add	a,#0xfc
      0000BB F5 81            [12]  213 	mov	sp,a
      0000BD 8C 82            [24]  214 	mov	dpl,r4
      0000BF 8D 83            [24]  215 	mov	dph,r5
      0000C1 8E F0            [24]  216 	mov	b,r6
      0000C3 EF               [12]  217 	mov	a,r7
      0000C4 12r00r00         [24]  218 	lcall	_atanf
      0000C7 AC 82            [24]  219 	mov	r4,dpl
      0000C9 AD 83            [24]  220 	mov	r5,dph
      0000CB AE F0            [24]  221 	mov	r6,b
      0000CD FF               [12]  222 	mov	r7,a
                                    223 ;	atan2f.c:47: if(y<0.0) r+=(x>=0?PI:-PI);
      0000CE C0 07            [24]  224 	push	ar7
      0000D0 C0 06            [24]  225 	push	ar6
      0000D2 C0 05            [24]  226 	push	ar5
      0000D4 C0 04            [24]  227 	push	ar4
      0000D6 E4               [12]  228 	clr	a
      0000D7 C0 E0            [24]  229 	push	acc
      0000D9 C0 E0            [24]  230 	push	acc
      0000DB C0 E0            [24]  231 	push	acc
      0000DD C0 E0            [24]  232 	push	acc
      0000DF 85*00 82         [24]  233 	mov	dpl,_atan2f_PARM_2
      0000E2 85*01 83         [24]  234 	mov	dph,(_atan2f_PARM_2 + 1)
      0000E5 85*02 F0         [24]  235 	mov	b,(_atan2f_PARM_2 + 2)
      0000E8 E5*03            [12]  236 	mov	a,(_atan2f_PARM_2 + 3)
      0000EA 12r00r00         [24]  237 	lcall	___fslt
      0000ED AB 82            [24]  238 	mov	r3,dpl
      0000EF E5 81            [12]  239 	mov	a,sp
      0000F1 24 FC            [12]  240 	add	a,#0xfc
      0000F3 F5 81            [12]  241 	mov	sp,a
      0000F5 D0 04            [24]  242 	pop	ar4
      0000F7 D0 05            [24]  243 	pop	ar5
      0000F9 D0 06            [24]  244 	pop	ar6
      0000FB D0 07            [24]  245 	pop	ar7
      0000FD EB               [12]  246 	mov	a,r3
      0000FE 70 03            [24]  247 	jnz	00148$
      000100 02r02r02         [24]  248 	ljmp	00108$
      000103                        249 00148$:
      000103 C0 07            [24]  250 	push	ar7
      000105 C0 06            [24]  251 	push	ar6
      000107 C0 05            [24]  252 	push	ar5
      000109 C0 04            [24]  253 	push	ar4
      00010B E4               [12]  254 	clr	a
      00010C C0 E0            [24]  255 	push	acc
      00010E C0 E0            [24]  256 	push	acc
      000110 C0 E0            [24]  257 	push	acc
      000112 C0 E0            [24]  258 	push	acc
      000114 85*04 82         [24]  259 	mov	dpl,_atan2f_x_65536_25
      000117 85*05 83         [24]  260 	mov	dph,(_atan2f_x_65536_25 + 1)
      00011A 85*06 F0         [24]  261 	mov	b,(_atan2f_x_65536_25 + 2)
      00011D E5*07            [12]  262 	mov	a,(_atan2f_x_65536_25 + 3)
      00011F 12r00r00         [24]  263 	lcall	___fslt
      000122 E5 81            [12]  264 	mov	a,sp
      000124 24 FC            [12]  265 	add	a,#0xfc
      000126 F5 81            [12]  266 	mov	sp,a
      000128 D0 04            [24]  267 	pop	ar4
      00012A D0 05            [24]  268 	pop	ar5
      00012C D0 06            [24]  269 	pop	ar6
      00012E D0 07            [24]  270 	pop	ar7
      000130 E5 82            [12]  271 	mov	a,dpl
      000132 24 FF            [12]  272 	add	a,#0xff
      000134 92*00            [24]  273 	mov	_atan2f_sloc0_1_0,c
      000136 40 0A            [24]  274 	jc	00111$
      000138 78 DB            [12]  275 	mov	r0,#0xdb
      00013A 79 0F            [12]  276 	mov	r1,#0x0f
      00013C 7A 49            [12]  277 	mov	r2,#0x49
      00013E 7B 40            [12]  278 	mov	r3,#0x40
      000140 80 08            [24]  279 	sjmp	00112$
      000142                        280 00111$:
      000142 78 DB            [12]  281 	mov	r0,#0xdb
      000144 79 0F            [12]  282 	mov	r1,#0x0f
      000146 7A 49            [12]  283 	mov	r2,#0x49
      000148 7B C0            [12]  284 	mov	r3,#0xc0
      00014A                        285 00112$:
      00014A C0 00            [24]  286 	push	ar0
      00014C C0 01            [24]  287 	push	ar1
      00014E C0 02            [24]  288 	push	ar2
      000150 C0 03            [24]  289 	push	ar3
      000152 8C 82            [24]  290 	mov	dpl,r4
      000154 8D 83            [24]  291 	mov	dph,r5
      000156 8E F0            [24]  292 	mov	b,r6
      000158 EF               [12]  293 	mov	a,r7
      000159 12r00r00         [24]  294 	lcall	___fsadd
      00015C AC 82            [24]  295 	mov	r4,dpl
      00015E AD 83            [24]  296 	mov	r5,dph
      000160 AE F0            [24]  297 	mov	r6,b
      000162 FF               [12]  298 	mov	r7,a
      000163 E5 81            [12]  299 	mov	a,sp
      000165 24 FC            [12]  300 	add	a,#0xfc
      000167 F5 81            [12]  301 	mov	sp,a
      000169 02r02r02         [24]  302 	ljmp	00108$
      00016C                        303 00107$:
                                    304 ;	atan2f.c:51: r=-atanf(y/x);
      00016C C0*04            [24]  305 	push	_atan2f_x_65536_25
      00016E C0*05            [24]  306 	push	(_atan2f_x_65536_25 + 1)
      000170 C0*06            [24]  307 	push	(_atan2f_x_65536_25 + 2)
      000172 C0*07            [24]  308 	push	(_atan2f_x_65536_25 + 3)
      000174 85*00 82         [24]  309 	mov	dpl,_atan2f_PARM_2
      000177 85*01 83         [24]  310 	mov	dph,(_atan2f_PARM_2 + 1)
      00017A 85*02 F0         [24]  311 	mov	b,(_atan2f_PARM_2 + 2)
      00017D E5*03            [12]  312 	mov	a,(_atan2f_PARM_2 + 3)
      00017F 12r00r00         [24]  313 	lcall	___fsdiv
      000182 A8 82            [24]  314 	mov	r0,dpl
      000184 A9 83            [24]  315 	mov	r1,dph
      000186 AA F0            [24]  316 	mov	r2,b
      000188 FB               [12]  317 	mov	r3,a
      000189 E5 81            [12]  318 	mov	a,sp
      00018B 24 FC            [12]  319 	add	a,#0xfc
      00018D F5 81            [12]  320 	mov	sp,a
      00018F 88 82            [24]  321 	mov	dpl,r0
      000191 89 83            [24]  322 	mov	dph,r1
      000193 8A F0            [24]  323 	mov	b,r2
      000195 EB               [12]  324 	mov	a,r3
      000196 12r00r00         [24]  325 	lcall	_atanf
      000199 A8 82            [24]  326 	mov	r0,dpl
      00019B A9 83            [24]  327 	mov	r1,dph
      00019D AA F0            [24]  328 	mov	r2,b
      00019F FB               [12]  329 	mov	r3,a
      0001A0 88*08            [24]  330 	mov	_atan2f_r_65536_26,r0
      0001A2 89*09            [24]  331 	mov	(_atan2f_r_65536_26 + 1),r1
      0001A4 8A*0A            [24]  332 	mov	(_atan2f_r_65536_26 + 2),r2
      0001A6 EB               [12]  333 	mov	a,r3
      0001A7 B2 E7            [12]  334 	cpl	acc.7
      0001A9 F5*0B            [12]  335 	mov	(_atan2f_r_65536_26 + 3),a
                                    336 ;	atan2f.c:52: r+=(x<0.0?-HALF_PI:HALF_PI);
      0001AB E4               [12]  337 	clr	a
      0001AC C0 E0            [24]  338 	push	acc
      0001AE C0 E0            [24]  339 	push	acc
      0001B0 C0 E0            [24]  340 	push	acc
      0001B2 C0 E0            [24]  341 	push	acc
      0001B4 85*04 82         [24]  342 	mov	dpl,_atan2f_x_65536_25
      0001B7 85*05 83         [24]  343 	mov	dph,(_atan2f_x_65536_25 + 1)
      0001BA 85*06 F0         [24]  344 	mov	b,(_atan2f_x_65536_25 + 2)
      0001BD E5*07            [12]  345 	mov	a,(_atan2f_x_65536_25 + 3)
      0001BF 12r00r00         [24]  346 	lcall	___fslt
      0001C2 AB 82            [24]  347 	mov	r3,dpl
      0001C4 E5 81            [12]  348 	mov	a,sp
      0001C6 24 FC            [12]  349 	add	a,#0xfc
      0001C8 F5 81            [12]  350 	mov	sp,a
      0001CA EB               [12]  351 	mov	a,r3
      0001CB 60 0A            [24]  352 	jz	00113$
      0001CD 78 DB            [12]  353 	mov	r0,#0xdb
      0001CF 79 0F            [12]  354 	mov	r1,#0x0f
      0001D1 7A C9            [12]  355 	mov	r2,#0xc9
      0001D3 7B BF            [12]  356 	mov	r3,#0xbf
      0001D5 80 08            [24]  357 	sjmp	00114$
      0001D7                        358 00113$:
      0001D7 78 DB            [12]  359 	mov	r0,#0xdb
      0001D9 79 0F            [12]  360 	mov	r1,#0x0f
      0001DB 7A C9            [12]  361 	mov	r2,#0xc9
      0001DD 7B 3F            [12]  362 	mov	r3,#0x3f
      0001DF                        363 00114$:
      0001DF C0 00            [24]  364 	push	ar0
      0001E1 C0 01            [24]  365 	push	ar1
      0001E3 C0 02            [24]  366 	push	ar2
      0001E5 C0 03            [24]  367 	push	ar3
      0001E7 85*08 82         [24]  368 	mov	dpl,_atan2f_r_65536_26
      0001EA 85*09 83         [24]  369 	mov	dph,(_atan2f_r_65536_26 + 1)
      0001ED 85*0A F0         [24]  370 	mov	b,(_atan2f_r_65536_26 + 2)
      0001F0 E5*0B            [12]  371 	mov	a,(_atan2f_r_65536_26 + 3)
      0001F2 12r00r00         [24]  372 	lcall	___fsadd
      0001F5 AC 82            [24]  373 	mov	r4,dpl
      0001F7 AD 83            [24]  374 	mov	r5,dph
      0001F9 AE F0            [24]  375 	mov	r6,b
      0001FB FF               [12]  376 	mov	r7,a
      0001FC E5 81            [12]  377 	mov	a,sp
      0001FE 24 FC            [12]  378 	add	a,#0xfc
      000200 F5 81            [12]  379 	mov	sp,a
      000202                        380 00108$:
                                    381 ;	atan2f.c:54: return r;
      000202 8C 82            [24]  382 	mov	dpl,r4
      000204 8D 83            [24]  383 	mov	dph,r5
      000206 8E F0            [24]  384 	mov	b,r6
      000208 EF               [12]  385 	mov	a,r7
                                    386 ;	atan2f.c:55: }
      000209 22               [24]  387 	ret
                                    388 	.area CSEG    (CODE)
                                    389 	.area CONST   (CODE)
                                    390 	.area XINIT   (CODE)
                                    391 	.area CABS    (ABS,CODE)
