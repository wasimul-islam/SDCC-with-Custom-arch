                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module mbrlen
                                      6 	.optsdcc -mmcs51 --model-small
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _mbrtowc
                                     12 	.globl _mbrlen_PARM_3
                                     13 	.globl _mbrlen_PARM_2
                                     14 	.globl _mbrlen
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
      000000                         34 _mbrlen_sps_65536_10:
      000000                         35 	.ds 3
      000003                         36 _mbrlen_PARM_2:
      000003                         37 	.ds 2
      000005                         38 _mbrlen_PARM_3:
      000005                         39 	.ds 3
                                     40 ;--------------------------------------------------------
                                     41 ; overlayable items in internal ram
                                     42 ;--------------------------------------------------------
                                     43 ;--------------------------------------------------------
                                     44 ; indirectly addressable internal ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area ISEG    (DATA)
                                     47 ;--------------------------------------------------------
                                     48 ; absolute internal ram data
                                     49 ;--------------------------------------------------------
                                     50 	.area IABS    (ABS,DATA)
                                     51 	.area IABS    (ABS,DATA)
                                     52 ;--------------------------------------------------------
                                     53 ; bit data
                                     54 ;--------------------------------------------------------
                                     55 	.area BSEG    (BIT)
                                     56 ;--------------------------------------------------------
                                     57 ; paged external ram data
                                     58 ;--------------------------------------------------------
                                     59 	.area PSEG    (PAG,XDATA)
                                     60 ;--------------------------------------------------------
                                     61 ; uninitialized external ram data
                                     62 ;--------------------------------------------------------
                                     63 	.area XSEG    (XDATA)
                                     64 ;--------------------------------------------------------
                                     65 ; absolute external ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area XABS    (ABS,XDATA)
                                     68 ;--------------------------------------------------------
                                     69 ; initialized external ram data
                                     70 ;--------------------------------------------------------
                                     71 	.area XISEG   (XDATA)
                                     72 	.area HOME    (CODE)
                                     73 	.area GSINIT0 (CODE)
                                     74 	.area GSINIT1 (CODE)
                                     75 	.area GSINIT2 (CODE)
                                     76 	.area GSINIT3 (CODE)
                                     77 	.area GSINIT4 (CODE)
                                     78 	.area GSINIT5 (CODE)
                                     79 	.area GSINIT  (CODE)
                                     80 	.area GSFINAL (CODE)
                                     81 	.area CSEG    (CODE)
                                     82 ;--------------------------------------------------------
                                     83 ; global & static initialisations
                                     84 ;--------------------------------------------------------
                                     85 	.area HOME    (CODE)
                                     86 	.area GSINIT  (CODE)
                                     87 	.area GSFINAL (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 ;--------------------------------------------------------
                                     90 ; Home
                                     91 ;--------------------------------------------------------
                                     92 	.area HOME    (CODE)
                                     93 	.area HOME    (CODE)
                                     94 ;--------------------------------------------------------
                                     95 ; code
                                     96 ;--------------------------------------------------------
                                     97 	.area CSEG    (CODE)
                                     98 ;------------------------------------------------------------
                                     99 ;Allocation info for local variables in function 'mbrlen'
                                    100 ;------------------------------------------------------------
                                    101 ;sps                       Allocated with name '_mbrlen_sps_65536_10'
                                    102 ;n                         Allocated with name '_mbrlen_PARM_2'
                                    103 ;ps                        Allocated with name '_mbrlen_PARM_3'
                                    104 ;s                         Allocated to registers r5 r6 r7 
                                    105 ;------------------------------------------------------------
                                    106 ;	mbrlen.c:31: size_t mbrlen(const char *restrict s, size_t n, mbstate_t *restrict ps)
                                    107 ;	-----------------------------------------
                                    108 ;	 function mbrlen
                                    109 ;	-----------------------------------------
      000000                        110 _mbrlen:
                           000007   111 	ar7 = 0x07
                           000006   112 	ar6 = 0x06
                           000005   113 	ar5 = 0x05
                           000004   114 	ar4 = 0x04
                           000003   115 	ar3 = 0x03
                           000002   116 	ar2 = 0x02
                           000001   117 	ar1 = 0x01
                           000000   118 	ar0 = 0x00
      000000 AD 82            [24]  119 	mov	r5,dpl
      000002 AE 83            [24]  120 	mov	r6,dph
      000004 AF F0            [24]  121 	mov	r7,b
                                    122 ;	mbrlen.c:35: return(mbrtowc(0, s, n, ps ? ps : &sps));
      000006 E5*05            [12]  123 	mov	a,_mbrlen_PARM_3
      000008 45*06            [12]  124 	orl	a,(_mbrlen_PARM_3 + 1)
      00000A 60 08            [24]  125 	jz	00103$
      00000C AA*05            [24]  126 	mov	r2,_mbrlen_PARM_3
      00000E AB*06            [24]  127 	mov	r3,(_mbrlen_PARM_3 + 1)
      000010 AC*07            [24]  128 	mov	r4,(_mbrlen_PARM_3 + 2)
      000012 80 06            [24]  129 	sjmp	00104$
      000014                        130 00103$:
      000014 7Ar00            [12]  131 	mov	r2,#_mbrlen_sps_65536_10
      000016 7B 00            [12]  132 	mov	r3,#0x00
      000018 7C 40            [12]  133 	mov	r4,#0x40
      00001A                        134 00104$:
      00001A 8D*00            [24]  135 	mov	_mbrtowc_PARM_2,r5
      00001C 8E*01            [24]  136 	mov	(_mbrtowc_PARM_2 + 1),r6
      00001E 8F*02            [24]  137 	mov	(_mbrtowc_PARM_2 + 2),r7
      000020 85*03*00         [24]  138 	mov	_mbrtowc_PARM_3,_mbrlen_PARM_2
      000023 85*04*01         [24]  139 	mov	(_mbrtowc_PARM_3 + 1),(_mbrlen_PARM_2 + 1)
      000026 8A*00            [24]  140 	mov	_mbrtowc_PARM_4,r2
      000028 8B*01            [24]  141 	mov	(_mbrtowc_PARM_4 + 1),r3
      00002A 8C*02            [24]  142 	mov	(_mbrtowc_PARM_4 + 2),r4
      00002C 90 00 00         [24]  143 	mov	dptr,#0x0000
      00002F 75 F0 00         [24]  144 	mov	b,#0x00
                                    145 ;	mbrlen.c:36: }
      000032 02r00r00         [24]  146 	ljmp	_mbrtowc
                                    147 	.area CSEG    (CODE)
                                    148 	.area CONST   (CODE)
                                    149 	.area XINIT   (CODE)
                                    150 	.area CABS    (ABS,CODE)
