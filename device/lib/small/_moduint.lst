                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module _moduint
                                      6 	.optsdcc -mmcs51 --model-small
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 ;--------------------------------------------------------
                                     12 ; special function registers
                                     13 ;--------------------------------------------------------
                                     14 	.area RSEG    (ABS,DATA)
      000000                         15 	.org 0x0000
                                     16 ;--------------------------------------------------------
                                     17 ; special function bits
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; overlayable register banks
                                     23 ;--------------------------------------------------------
                                     24 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         25 	.ds 8
                                     26 ;--------------------------------------------------------
                                     27 ; internal ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area DSEG    (DATA)
                                     30 ;--------------------------------------------------------
                                     31 ; overlayable items in internal ram
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; indirectly addressable internal ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area ISEG    (DATA)
                                     37 ;--------------------------------------------------------
                                     38 ; absolute internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area IABS    (ABS,DATA)
                                     41 	.area IABS    (ABS,DATA)
                                     42 ;--------------------------------------------------------
                                     43 ; bit data
                                     44 ;--------------------------------------------------------
                                     45 	.area BSEG    (BIT)
                                     46 ;--------------------------------------------------------
                                     47 ; paged external ram data
                                     48 ;--------------------------------------------------------
                                     49 	.area PSEG    (PAG,XDATA)
                                     50 ;--------------------------------------------------------
                                     51 ; uninitialized external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area XSEG    (XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; absolute external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XABS    (ABS,XDATA)
                                     58 ;--------------------------------------------------------
                                     59 ; initialized external ram data
                                     60 ;--------------------------------------------------------
                                     61 	.area XISEG   (XDATA)
                                     62 	.area HOME    (CODE)
                                     63 	.area GSINIT0 (CODE)
                                     64 	.area GSINIT1 (CODE)
                                     65 	.area GSINIT2 (CODE)
                                     66 	.area GSINIT3 (CODE)
                                     67 	.area GSINIT4 (CODE)
                                     68 	.area GSINIT5 (CODE)
                                     69 	.area GSINIT  (CODE)
                                     70 	.area GSFINAL (CODE)
                                     71 	.area CSEG    (CODE)
                                     72 ;--------------------------------------------------------
                                     73 ; global & static initialisations
                                     74 ;--------------------------------------------------------
                                     75 	.area HOME    (CODE)
                                     76 	.area GSINIT  (CODE)
                                     77 	.area GSFINAL (CODE)
                                     78 	.area GSINIT  (CODE)
                                     79 ;--------------------------------------------------------
                                     80 ; Home
                                     81 ;--------------------------------------------------------
                                     82 	.area HOME    (CODE)
                                     83 	.area HOME    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; code
                                     86 ;--------------------------------------------------------
                                     87 	.area CSEG    (CODE)
                                     88 ;------------------------------------------------------------
                                     89 ;Allocation info for local variables in function '_moduint_dummy'
                                     90 ;------------------------------------------------------------
                                     91 ;	_moduint.c:56: _moduint_dummy (void) __naked
                                     92 ;	-----------------------------------------
                                     93 ;	 function _moduint_dummy
                                     94 ;	-----------------------------------------
      000000                         95 __moduint_dummy:
                                     96 ;	naked function: no prologue.
                                     97 ;	_moduint.c:171: __endasm;
                                     98 	.globl	__moduint
      000000                         99 __moduint:
                                    100 	.area	OSEG (OVR,DATA)
                                    101 	.globl	__moduint_PARM_2
                                    102 	.globl	__modsint_PARM_2
      000000                        103 __moduint_PARM_2:
      000000                        104 __modsint_PARM_2:
      000000                        105 	.ds	2
                                    106 	.area	CSEG (CODE)
      000000 E5*00            [12]  107 	mov	a,(__moduint_PARM_2) ; avoid endless loop
      000002 45*01            [12]  108 	orl	a,(__moduint_PARM_2 + 1)
      000004 60 46            [24]  109 	jz	div_by_0
      000006 7A 01            [12]  110 	mov	r2,#1
      000008                        111 loop1:
      000008 E5*00            [12]  112 	mov a,(__moduint_PARM_2) ; b <<= 1
      00000A 25 E0            [12]  113 	add	a,acc
      00000C F5*00            [12]  114 	mov	(__moduint_PARM_2),a
      00000E E5*01            [12]  115 	mov	a,(__moduint_PARM_2 + 1)
      000010 33               [12]  116 	rlc	a
      000011 40 12            [24]  117 	jc	msbset
      000013 F5*01            [12]  118 	mov	(__moduint_PARM_2 + 1),a
      000015 E5 82            [12]  119 	mov	a,dpl ; a - b
      000017 95*00            [12]  120 	subb	a,(__moduint_PARM_2) ; here carry is always clear
      000019 E5 83            [12]  121 	mov	a,dph
      00001B 95*01            [12]  122 	subb	a,(__moduint_PARM_2 + 1)
      00001D 40 03            [24]  123 	jc	start
      00001F 0A               [12]  124 	inc	r2
      000020 80 E6            [24]  125 	sjmp	loop1
      000022                        126 start:
      000022 C3               [12]  127 	clr c
      000023 E5*01            [12]  128 	mov	a,(__moduint_PARM_2 + 1) ; b >>= 1;
      000025                        129 msbset:
      000025 13               [12]  130 	rrc a
      000026 F5*01            [12]  131 	mov	(__moduint_PARM_2 + 1),a
      000028 E5*00            [12]  132 	mov	a,(__moduint_PARM_2)
      00002A 13               [12]  133 	rrc	a
      00002B F5*00            [12]  134 	mov	(__moduint_PARM_2),a
      00002D                        135 loop2:
      00002D C3               [12]  136 	clr c
      00002E E5 82            [12]  137 	mov	a,dpl ; a - b
      000030 95*00            [12]  138 	subb	a,(__moduint_PARM_2)
      000032 F5 F0            [12]  139 	mov	b,a
      000034 E5 83            [12]  140 	mov	a,dph
      000036 95*01            [12]  141 	subb	a,(__moduint_PARM_2 + 1)
      000038 40 05            [24]  142 	jc	smaller ; a >= b?
      00003A F5 83            [12]  143 	mov	dph,a ; -> yes; a = a - b;
      00003C 85 F0 82         [24]  144 	mov	dpl,b
      00003F                        145 smaller:
                                    146 ; -> no
      00003F C3               [12]  147 	clr	c
      000040 E5*01            [12]  148 	mov	a,(__moduint_PARM_2 + 1) ; b >>= 1;
      000042 13               [12]  149 	rrc	a
      000043 F5*01            [12]  150 	mov	(__moduint_PARM_2 + 1),a
      000045 E5*00            [12]  151 	mov	a,(__moduint_PARM_2)
      000047 13               [12]  152 	rrc	a
      000048 F5*00            [12]  153 	mov	(__moduint_PARM_2),a
      00004A DA E1            [24]  154 	djnz	r2,loop2
      00004C                        155 div_by_0:
      00004C 22               [24]  156 	ret
                                    157 ;	_moduint.c:172: }
                                    158 ;	naked function: no epilogue.
                                    159 	.area CSEG    (CODE)
                                    160 	.area CONST   (CODE)
                                    161 	.area XINIT   (CODE)
                                    162 	.area CABS    (ABS,CODE)
