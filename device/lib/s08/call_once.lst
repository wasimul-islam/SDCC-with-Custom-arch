                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.cs08
                              6 	.module call_once
                              7 	.optsdcc -ms08
                              8 	
                              9 	.area HOME    (CODE)
                             10 	.area GSINIT0 (CODE)
                             11 	.area GSINIT  (CODE)
                             12 	.area GSFINAL (CODE)
                             13 	.area CSEG    (CODE)
                             14 	.area XINIT   (CODE)
                             15 	.area CONST   (CODE)
                             16 	.area DSEG    (PAG)
                             17 	.area OSEG    (PAG, OVR)
                             18 	.area XSEG
                             19 	.area XISEG
                             20 ;--------------------------------------------------------
                             21 ; Public variables in this module
                             22 ;--------------------------------------------------------
                             23 	.globl _call_once_PARM_2
                             24 	.globl _call_once
                             25 ;--------------------------------------------------------
                             26 ; ram data
                             27 ;--------------------------------------------------------
                             28 	.area DSEG    (PAG)
   0000                      29 _call_once_sloc0_1_0:
   0000                      30 	.ds 1
                             31 ;--------------------------------------------------------
                             32 ; overlayable items in ram
                             33 ;--------------------------------------------------------
                             34 ;--------------------------------------------------------
                             35 ; absolute ram data
                             36 ;--------------------------------------------------------
                             37 	.area IABS    (ABS)
                             38 	.area IABS    (ABS)
                             39 ;--------------------------------------------------------
                             40 ; absolute external ram data
                             41 ;--------------------------------------------------------
                             42 	.area XABS    (ABS)
                             43 ;--------------------------------------------------------
                             44 ; initialized external ram data
                             45 ;--------------------------------------------------------
                             46 	.area XISEG
                             47 ;--------------------------------------------------------
                             48 ; extended address mode data
                             49 ;--------------------------------------------------------
                             50 	.area XSEG
   0000                      51 _call_once_PARM_2:
   0000                      52 	.ds 2
                             53 ;--------------------------------------------------------
                             54 ; global & static initialisations
                             55 ;--------------------------------------------------------
                             56 	.area HOME    (CODE)
                             57 	.area GSINIT  (CODE)
                             58 	.area GSFINAL (CODE)
                             59 	.area GSINIT  (CODE)
                             60 ;--------------------------------------------------------
                             61 ; Home
                             62 ;--------------------------------------------------------
                             63 	.area HOME    (CODE)
                             64 	.area HOME    (CODE)
                             65 ;--------------------------------------------------------
                             66 ; code
                             67 ;--------------------------------------------------------
                             68 	.area CSEG    (CODE)
                             69 ;------------------------------------------------------------
                             70 ;Allocation info for local variables in function 'call_once'
                             71 ;------------------------------------------------------------
                             72 ;sloc0                     Allocated with name '_call_once_sloc0_1_0'
                             73 ;func                      Allocated with name '_call_once_PARM_2'
                             74 ;flag                      Allocated to registers x h 
                             75 ;------------------------------------------------------------
                             76 ;../call_once.c:36: void call_once(_Bool *flag, void (*func)(void))
                             77 ;	-----------------------------------------
                             78 ;	 function call_once
                             79 ;	-----------------------------------------
                             80 ;	Register assignment is optimal.
                             81 ;	Stack space usage: 0 bytes.
   0000                      82 _call_once:
   0000 89            [ 2]   83 	pshx
   0001 97            [ 1]   84 	tax
   0002 8A            [ 3]   85 	pulh
                             86 ;../call_once.c:38: if (!*flag)
   0003 F6            [ 3]   87 	lda	,x
   0004 26 14         [ 3]   88 	bne	00103$
                             89 ;../call_once.c:40: func();
   0006 89            [ 2]   90 	pshx
   0007 8B            [ 2]   91 	pshh
   0008 AD 02         [ 5]   92 	bsr	00112$
   000A 20 09         [ 3]   93 	bra	00111$
   000C                      94 00112$:
   000C C6r00r01      [ 4]   95 	lda	(_call_once_PARM_2 + 1)
   000F 87            [ 2]   96 	psha
   0010 C6r00r00      [ 4]   97 	lda	_call_once_PARM_2
   0013 87            [ 2]   98 	psha
   0014 81            [ 6]   99 	rts
   0015                     100 00111$:
   0015 8A            [ 3]  101 	pulh
   0016 88            [ 3]  102 	pulx
                            103 ;../call_once.c:41: *flag = true;
   0017 A6 01         [ 2]  104 	lda	#0x01
   0019 F7            [ 2]  105 	sta	,x
   001A                     106 00103$:
                            107 ;../call_once.c:43: }
   001A 81            [ 6]  108 	rts
                            109 	.area CSEG    (CODE)
                            110 	.area CONST   (CODE)
                            111 	.area XINIT   (CODE)
                            112 	.area CABS    (ABS,CODE)
