                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.cs08
                              6 	.module floorf
                              7 	.optsdcc -ms08
                              8 	
                              9 	.area HOME    (CODE)
                             10 	.area GSINIT0 (CODE)
                             11 	.area GSINIT  (CODE)
                             12 	.area GSFINAL (CODE)
                             13 	.area CSEG    (CODE)
                             14 	.area XINIT   (CODE)
                             15 	.area CONST   (CODE)
                             16 	.area DSEG    (PAG)
                             17 	.area OSEG    (PAG, OVR)
                             18 	.area XSEG
                             19 	.area XISEG
                             20 ;--------------------------------------------------------
                             21 ; Public variables in this module
                             22 ;--------------------------------------------------------
                             23 	.globl _floorf
                             24 ;--------------------------------------------------------
                             25 ; ram data
                             26 ;--------------------------------------------------------
                             27 	.area DSEG    (PAG)
                             28 ;--------------------------------------------------------
                             29 ; overlayable items in ram
                             30 ;--------------------------------------------------------
                             31 ;--------------------------------------------------------
                             32 ; absolute ram data
                             33 ;--------------------------------------------------------
                             34 	.area IABS    (ABS)
                             35 	.area IABS    (ABS)
                             36 ;--------------------------------------------------------
                             37 ; absolute external ram data
                             38 ;--------------------------------------------------------
                             39 	.area XABS    (ABS)
                             40 ;--------------------------------------------------------
                             41 ; initialized external ram data
                             42 ;--------------------------------------------------------
                             43 	.area XISEG
                             44 ;--------------------------------------------------------
                             45 ; extended address mode data
                             46 ;--------------------------------------------------------
                             47 	.area XSEG
                             48 ;--------------------------------------------------------
                             49 ; global & static initialisations
                             50 ;--------------------------------------------------------
                             51 	.area HOME    (CODE)
                             52 	.area GSINIT  (CODE)
                             53 	.area GSFINAL (CODE)
                             54 	.area GSINIT  (CODE)
                             55 ;--------------------------------------------------------
                             56 ; Home
                             57 ;--------------------------------------------------------
                             58 	.area HOME    (CODE)
                             59 	.area HOME    (CODE)
                             60 ;--------------------------------------------------------
                             61 ; code
                             62 ;--------------------------------------------------------
                             63 	.area CSEG    (CODE)
                             64 ;------------------------------------------------------------
                             65 ;Allocation info for local variables in function 'floorf'
                             66 ;------------------------------------------------------------
                             67 ;x                         Allocated to stack - sp +15
                             68 ;r                         Allocated to stack - sp +9
                             69 ;sloc0                     Allocated to stack - sp +9
                             70 ;sloc1                     Allocated to stack - sp +5
                             71 ;sloc2                     Allocated to stack - sp +1
                             72 ;------------------------------------------------------------
                             73 ;../floorf.c:33: float floorf (float x) _FLOAT_FUNC_REENTRANT
                             74 ;	-----------------------------------------
                             75 ;	 function floorf
                             76 ;	-----------------------------------------
                             77 ;	Register assignment is optimal.
                             78 ;	Stack space usage: 12 bytes.
   0000                      79 _floorf:
   0000 A7 F4         [ 2]   80 	ais	#-12
                             81 ;../floorf.c:36: r=x;
   0002 95            [ 2]   82 	tsx
   0003 E6 0E         [ 3]   83 	lda	14,x
   0005 C7r00r00      [ 4]   84 	sta	___fs2slong_PARM_1
   0008 E6 0F         [ 3]   85 	lda	15,x
   000A C7r00r01      [ 4]   86 	sta	(___fs2slong_PARM_1 + 1)
   000D E6 10         [ 3]   87 	lda	16,x
   000F C7r00r02      [ 4]   88 	sta	(___fs2slong_PARM_1 + 2)
   0012 E6 11         [ 3]   89 	lda	17,x
   0014 C7r00r03      [ 4]   90 	sta	(___fs2slong_PARM_1 + 3)
   0017 CDr00r00      [ 6]   91 	jsr	___fs2slong
   001A 9E E7 0C      [ 4]   92 	sta	12,s
   001D 9E EF 0B      [ 4]   93 	stx	11,s
   0020 B6*00         [ 3]   94 	lda	*___SDCC_hc08_ret2
   0022 9E E7 0A      [ 4]   95 	sta	10,s
   0025 B6*00         [ 3]   96 	lda	*___SDCC_hc08_ret3
   0027 9E E7 09      [ 4]   97 	sta	9,s
                             98 ;../floorf.c:38: return (r+((r>x)?-1:0));
   002A 95            [ 2]   99 	tsx
   002B E6 08         [ 3]  100 	lda	8,x
   002D C7r00r00      [ 4]  101 	sta	___slong2fs_PARM_1
   0030 E6 09         [ 3]  102 	lda	9,x
   0032 C7r00r01      [ 4]  103 	sta	(___slong2fs_PARM_1 + 1)
   0035 E6 0A         [ 3]  104 	lda	10,x
   0037 C7r00r02      [ 4]  105 	sta	(___slong2fs_PARM_1 + 2)
   003A E6 0B         [ 3]  106 	lda	11,x
   003C C7r00r03      [ 4]  107 	sta	(___slong2fs_PARM_1 + 3)
   003F CDr00r00      [ 6]  108 	jsr	___slong2fs
   0042 9E E7 08      [ 4]  109 	sta	8,s
   0045 9E EF 07      [ 4]  110 	stx	7,s
   0048 B6*00         [ 3]  111 	lda	*___SDCC_hc08_ret2
   004A 9E E7 06      [ 4]  112 	sta	6,s
   004D B6*00         [ 3]  113 	lda	*___SDCC_hc08_ret3
   004F 9E E7 05      [ 4]  114 	sta	5,s
                            115 ;../floorf.c:37: if (r<=0)
   0052 95            [ 2]  116 	tsx
   0053 4F            [ 1]  117 	clra
   0054 E0 0B         [ 3]  118 	sub	11,x
   0056 4F            [ 1]  119 	clra
   0057 E2 0A         [ 3]  120 	sbc	10,x
   0059 4F            [ 1]  121 	clra
   005A E2 09         [ 3]  122 	sbc	9,x
   005C 4F            [ 1]  123 	clra
   005D E2 08         [ 3]  124 	sbc	8,x
   005F 90 03         [ 3]  125 	bge	00118$
   0061 CCr00rEF      [ 4]  126 	jmp	00102$
   0064                     127 00118$:
                            128 ;../floorf.c:38: return (r+((r>x)?-1:0));
   0064 E6 0E         [ 3]  129 	lda	14,x
   0066 C7r00r00      [ 4]  130 	sta	___fslt_PARM_1
   0069 E6 0F         [ 3]  131 	lda	15,x
   006B C7r00r01      [ 4]  132 	sta	(___fslt_PARM_1 + 1)
   006E E6 10         [ 3]  133 	lda	16,x
   0070 C7r00r02      [ 4]  134 	sta	(___fslt_PARM_1 + 2)
   0073 E6 11         [ 3]  135 	lda	17,x
   0075 C7r00r03      [ 4]  136 	sta	(___fslt_PARM_1 + 3)
   0078 E6 04         [ 3]  137 	lda	4,x
   007A C7r00r00      [ 4]  138 	sta	___fslt_PARM_2
   007D E6 05         [ 3]  139 	lda	5,x
   007F C7r00r01      [ 4]  140 	sta	(___fslt_PARM_2 + 1)
   0082 E6 06         [ 3]  141 	lda	6,x
   0084 C7r00r02      [ 4]  142 	sta	(___fslt_PARM_2 + 2)
   0087 E6 07         [ 3]  143 	lda	7,x
   0089 C7r00r03      [ 4]  144 	sta	(___fslt_PARM_2 + 3)
   008C CDr00r00      [ 6]  145 	jsr	___fslt
   008F 4D            [ 1]  146 	tsta
   0090 27 05         [ 3]  147 	beq	00106$
   0092 AE FF         [ 2]  148 	ldx	#0xff
   0094 9F            [ 1]  149 	txa
   0095 20 02         [ 3]  150 	bra	00107$
   0097                     151 00106$:
   0097 5F            [ 1]  152 	clrx
   0098 9F            [ 1]  153 	txa
   0099                     154 00107$:
   0099 9E E7 04      [ 4]  155 	sta	4,s
   009C 9F            [ 1]  156 	txa
   009D 9E E7 03      [ 4]  157 	sta	3,s
   00A0 49            [ 1]  158 	rola	
   00A1 4F            [ 1]  159 	clra	
   00A2 A2 00         [ 2]  160 	sbc	#0x00
   00A4 9E E7 02      [ 4]  161 	sta	2,s
   00A7 9E E7 01      [ 4]  162 	sta	1,s
   00AA 95            [ 2]  163 	tsx
   00AB 45r00r00      [ 3]  164 	ldhx	#___slong2fs_PARM_1
   00AE 9E E6 0C      [ 4]  165 	lda	12,s
   00B1 9E EB 04      [ 4]  166 	add	4,s
   00B4 E7 03         [ 3]  167 	sta	3,x
   00B6 9E E6 0B      [ 4]  168 	lda	11,s
   00B9 9E E9 03      [ 4]  169 	adc	3,s
   00BC E7 02         [ 3]  170 	sta	2,x
   00BE 9E E6 0A      [ 4]  171 	lda	10,s
   00C1 9E E9 02      [ 4]  172 	adc	2,s
   00C4 E7 01         [ 3]  173 	sta	1,x
   00C6 9E E6 09      [ 4]  174 	lda	9,s
   00C9 9E E9 01      [ 4]  175 	adc	1,s
   00CC F7            [ 2]  176 	sta	,x
   00CD CDr00r00      [ 6]  177 	jsr	___slong2fs
   00D0 9E E7 04      [ 4]  178 	sta	4,s
   00D3 9E EF 03      [ 4]  179 	stx	3,s
   00D6 B6*00         [ 3]  180 	lda	*___SDCC_hc08_ret2
   00D8 9E E7 02      [ 4]  181 	sta	2,s
   00DB B6*00         [ 3]  182 	lda	*___SDCC_hc08_ret3
   00DD 9E E7 01      [ 4]  183 	sta	1,s
   00E0 95            [ 2]  184 	tsx
   00E1 F6            [ 3]  185 	lda	,x
   00E2 B7*00         [ 3]  186 	sta	*___SDCC_hc08_ret3
   00E4 E6 01         [ 3]  187 	lda	1,x
   00E6 B7*00         [ 3]  188 	sta	*___SDCC_hc08_ret2
   00E8 EE 02         [ 3]  189 	ldx	2,x
   00EA 9E E6 04      [ 4]  190 	lda	4,s
   00ED 20 0E         [ 3]  191 	bra	00104$
   00EF                     192 00102$:
                            193 ;../floorf.c:40: return r;
   00EF 95            [ 2]  194 	tsx
   00F0 E6 04         [ 3]  195 	lda	4,x
   00F2 B7*00         [ 3]  196 	sta	*___SDCC_hc08_ret3
   00F4 E6 05         [ 3]  197 	lda	5,x
   00F6 B7*00         [ 3]  198 	sta	*___SDCC_hc08_ret2
   00F8 EE 06         [ 3]  199 	ldx	6,x
   00FA 9E E6 08      [ 4]  200 	lda	8,s
   00FD                     201 00104$:
                            202 ;../floorf.c:41: }
   00FD A7 0C         [ 2]  203 	ais	#12
   00FF 81            [ 6]  204 	rts
                            205 	.area CSEG    (CODE)
                            206 	.area CONST   (CODE)
                            207 	.area XINIT   (CODE)
                            208 	.area CABS    (ABS,CODE)
