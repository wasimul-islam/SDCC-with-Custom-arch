                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.cs08
                              6 	.module calloc
                              7 	.optsdcc -ms08
                              8 	
                              9 	.area HOME    (CODE)
                             10 	.area GSINIT0 (CODE)
                             11 	.area GSINIT  (CODE)
                             12 	.area GSFINAL (CODE)
                             13 	.area CSEG    (CODE)
                             14 	.area XINIT   (CODE)
                             15 	.area CONST   (CODE)
                             16 	.area DSEG    (PAG)
                             17 	.area OSEG    (PAG, OVR)
                             18 	.area XSEG
                             19 	.area XISEG
                             20 ;--------------------------------------------------------
                             21 ; Public variables in this module
                             22 ;--------------------------------------------------------
                             23 	.globl _memset
                             24 	.globl _malloc
                             25 	.globl _calloc_PARM_2
                             26 	.globl _calloc
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area DSEG    (PAG)
   0000                      31 _calloc_sloc0_1_0:
   0000                      32 	.ds 4
                             33 ;--------------------------------------------------------
                             34 ; overlayable items in ram
                             35 ;--------------------------------------------------------
                             36 ;--------------------------------------------------------
                             37 ; absolute ram data
                             38 ;--------------------------------------------------------
                             39 	.area IABS    (ABS)
                             40 	.area IABS    (ABS)
                             41 ;--------------------------------------------------------
                             42 ; absolute external ram data
                             43 ;--------------------------------------------------------
                             44 	.area XABS    (ABS)
                             45 ;--------------------------------------------------------
                             46 ; initialized external ram data
                             47 ;--------------------------------------------------------
                             48 	.area XISEG
                             49 ;--------------------------------------------------------
                             50 ; extended address mode data
                             51 ;--------------------------------------------------------
                             52 	.area XSEG
   0000                      53 _calloc_PARM_2:
   0000                      54 	.ds 2
   0002                      55 _calloc_ptr_65536_62:
   0002                      56 	.ds 2
                             57 ;--------------------------------------------------------
                             58 ; global & static initialisations
                             59 ;--------------------------------------------------------
                             60 	.area HOME    (CODE)
                             61 	.area GSINIT  (CODE)
                             62 	.area GSFINAL (CODE)
                             63 	.area GSINIT  (CODE)
                             64 ;--------------------------------------------------------
                             65 ; Home
                             66 ;--------------------------------------------------------
                             67 	.area HOME    (CODE)
                             68 	.area HOME    (CODE)
                             69 ;--------------------------------------------------------
                             70 ; code
                             71 ;--------------------------------------------------------
                             72 	.area CSEG    (CODE)
                             73 ;------------------------------------------------------------
                             74 ;Allocation info for local variables in function 'calloc'
                             75 ;------------------------------------------------------------
                             76 ;sloc0                     Allocated with name '_calloc_sloc0_1_0'
                             77 ;size                      Allocated with name '_calloc_PARM_2'
                             78 ;nmemb                     Allocated to registers a x 
                             79 ;ptr                       Allocated with name '_calloc_ptr_65536_62'
                             80 ;msize                     Allocated with name '_calloc_msize_65536_62'
                             81 ;------------------------------------------------------------
                             82 ;../calloc.c:44: void *calloc (size_t nmemb, size_t size)
                             83 ;	-----------------------------------------
                             84 ;	 function calloc
                             85 ;	-----------------------------------------
                             86 ;	Register assignment is optimal.
                             87 ;	Stack space usage: 0 bytes.
   0000                      88 _calloc:
                             89 ;../calloc.c:49: unsigned long msize = (unsigned long)nmemb * (unsigned long)size;
   0000 C7r00r03      [ 4]   90 	sta	(__mullong_PARM_1 + 3)
   0003 CFr00r02      [ 4]   91 	stx	(__mullong_PARM_1 + 2)
   0006 87            [ 2]   92 	psha
   0007 4F            [ 1]   93 	clra
   0008 C7r00r01      [ 4]   94 	sta	(__mullong_PARM_1 + 1)
   000B 4F            [ 1]   95 	clra
   000C C7r00r00      [ 4]   96 	sta	__mullong_PARM_1
   000F 86            [ 3]   97 	pula
   0010 32r00r00      [ 5]   98 	ldhx	_calloc_PARM_2
   0013 96r00r02      [ 5]   99 	sthx	(__mullong_PARM_2 + 2)
   0016 4F            [ 1]  100 	clra
   0017 C7r00r01      [ 4]  101 	sta	(__mullong_PARM_2 + 1)
   001A C7r00r00      [ 4]  102 	sta	__mullong_PARM_2
                            103 ;../calloc.c:54: if (msize > SIZE_MAX)
   001D CDr00r00      [ 6]  104 	jsr	__mullong
   0020 B7*03         [ 3]  105 	sta	*(_calloc_sloc0_1_0 + 3)
   0022 BF*02         [ 3]  106 	stx	*(_calloc_sloc0_1_0 + 2)
   0024 4E*00*01      [ 6]  107 	mov	*___SDCC_hc08_ret2,*(_calloc_sloc0_1_0 + 1)
   0027 4E*00*00      [ 6]  108 	mov	*___SDCC_hc08_ret3,*_calloc_sloc0_1_0
   002A A6 FF         [ 2]  109 	lda	#0xff
   002C B0*03         [ 3]  110 	sub	*(_calloc_sloc0_1_0 + 3)
   002E A6 FF         [ 2]  111 	lda	#0xff
   0030 B2*02         [ 3]  112 	sbc	*(_calloc_sloc0_1_0 + 2)
   0032 4F            [ 1]  113 	clra
   0033 B2*01         [ 3]  114 	sbc	*(_calloc_sloc0_1_0 + 1)
   0035 4F            [ 1]  115 	clra
   0036 B2*00         [ 3]  116 	sbc	*_calloc_sloc0_1_0
   0038 24 03         [ 3]  117 	bcc	00102$
                            118 ;../calloc.c:55: return(0);
   003A 4F            [ 1]  119 	clra
   003B 97            [ 1]  120 	tax
   003C 81            [ 6]  121 	rts
   003D                     122 00102$:
                            123 ;../calloc.c:57: if (ptr = malloc(msize))
   003D 4E*03*01      [ 6]  124 	mov	*(_calloc_sloc0_1_0 + 3),*(_calloc_sloc0_1_0 + 1)
   0040 4E*02*00      [ 6]  125 	mov	*(_calloc_sloc0_1_0 + 2),*_calloc_sloc0_1_0
   0043 B6*01         [ 3]  126 	lda	*(_calloc_sloc0_1_0 + 1)
   0045 BE*00         [ 3]  127 	ldx	*_calloc_sloc0_1_0
   0047 CDr00r00      [ 6]  128 	jsr	_malloc
   004A CFr00r02      [ 4]  129 	stx	_calloc_ptr_65536_62
   004D C7r00r03      [ 4]  130 	sta	(_calloc_ptr_65536_62 + 1)
   0050 4D            [ 1]  131 	tsta
   0051 26 01         [ 3]  132 	bne	00118$
   0053 5D            [ 1]  133 	tstx
   0054                     134 00118$:
   0054 27 18         [ 3]  135 	beq	00104$
                            136 ;../calloc.c:58: memset(ptr, 0, msize);
   0056 8C            [ 1]  137 	clrh
   0057 5F            [ 1]  138 	clrx
   0058 96r00r00      [ 5]  139 	sthx	_memset_PARM_2
   005B B6*00         [ 3]  140 	lda	*_calloc_sloc0_1_0
   005D C7r00r00      [ 4]  141 	sta	_memset_PARM_3
   0060 B6*01         [ 3]  142 	lda	*(_calloc_sloc0_1_0 + 1)
   0062 C7r00r01      [ 4]  143 	sta	(_memset_PARM_3 + 1)
   0065 C6r00r03      [ 4]  144 	lda	(_calloc_ptr_65536_62 + 1)
   0068 CEr00r02      [ 4]  145 	ldx	_calloc_ptr_65536_62
   006B CDr00r00      [ 6]  146 	jsr	_memset
   006E                     147 00104$:
                            148 ;../calloc.c:60: return(ptr);
   006E CEr00r02      [ 4]  149 	ldx	_calloc_ptr_65536_62
   0071 C6r00r03      [ 4]  150 	lda	(_calloc_ptr_65536_62 + 1)
                            151 ;../calloc.c:61: }
   0074 81            [ 6]  152 	rts
                            153 	.area CSEG    (CODE)
                            154 	.area CONST   (CODE)
                            155 	.area XINIT   (CODE)
                            156 	.area CABS    (ABS,CODE)
