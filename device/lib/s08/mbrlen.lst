                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.cs08
                              6 	.module mbrlen
                              7 	.optsdcc -ms08
                              8 	
                              9 	.area HOME    (CODE)
                             10 	.area GSINIT0 (CODE)
                             11 	.area GSINIT  (CODE)
                             12 	.area GSFINAL (CODE)
                             13 	.area CSEG    (CODE)
                             14 	.area XINIT   (CODE)
                             15 	.area CONST   (CODE)
                             16 	.area DSEG    (PAG)
                             17 	.area OSEG    (PAG, OVR)
                             18 	.area XSEG
                             19 	.area XISEG
                             20 ;--------------------------------------------------------
                             21 ; Public variables in this module
                             22 ;--------------------------------------------------------
                             23 	.globl _mbrtowc
                             24 	.globl _mbrlen_PARM_3
                             25 	.globl _mbrlen_PARM_2
                             26 	.globl _mbrlen
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area DSEG    (PAG)
                             31 ;--------------------------------------------------------
                             32 ; overlayable items in ram
                             33 ;--------------------------------------------------------
                             34 ;--------------------------------------------------------
                             35 ; absolute ram data
                             36 ;--------------------------------------------------------
                             37 	.area IABS    (ABS)
                             38 	.area IABS    (ABS)
                             39 ;--------------------------------------------------------
                             40 ; absolute external ram data
                             41 ;--------------------------------------------------------
                             42 	.area XABS    (ABS)
                             43 ;--------------------------------------------------------
                             44 ; initialized external ram data
                             45 ;--------------------------------------------------------
                             46 	.area XISEG
                             47 ;--------------------------------------------------------
                             48 ; extended address mode data
                             49 ;--------------------------------------------------------
                             50 	.area XSEG
   0000                      51 _mbrlen_PARM_2:
   0000                      52 	.ds 2
   0002                      53 _mbrlen_PARM_3:
   0002                      54 	.ds 2
   0004                      55 _mbrlen_s_65536_9:
   0004                      56 	.ds 2
   0006                      57 _mbrlen_sps_65536_10:
   0006                      58 	.ds 3
                             59 ;--------------------------------------------------------
                             60 ; global & static initialisations
                             61 ;--------------------------------------------------------
                             62 	.area HOME    (CODE)
                             63 	.area GSINIT  (CODE)
                             64 	.area GSFINAL (CODE)
                             65 	.area GSINIT  (CODE)
                             66 ;--------------------------------------------------------
                             67 ; Home
                             68 ;--------------------------------------------------------
                             69 	.area HOME    (CODE)
                             70 	.area HOME    (CODE)
                             71 ;--------------------------------------------------------
                             72 ; code
                             73 ;--------------------------------------------------------
                             74 	.area CSEG    (CODE)
                             75 ;------------------------------------------------------------
                             76 ;Allocation info for local variables in function 'mbrlen'
                             77 ;------------------------------------------------------------
                             78 ;n                         Allocated with name '_mbrlen_PARM_2'
                             79 ;ps                        Allocated with name '_mbrlen_PARM_3'
                             80 ;s                         Allocated with name '_mbrlen_s_65536_9'
                             81 ;sps                       Allocated with name '_mbrlen_sps_65536_10'
                             82 ;------------------------------------------------------------
                             83 ;../mbrlen.c:31: size_t mbrlen(const char *restrict s, size_t n, mbstate_t *restrict ps)
                             84 ;	-----------------------------------------
                             85 ;	 function mbrlen
                             86 ;	-----------------------------------------
                             87 ;	Register assignment is optimal.
                             88 ;	Stack space usage: 0 bytes.
   0000                      89 _mbrlen:
   0000 C7r00r05      [ 4]   90 	sta	(_mbrlen_s_65536_9 + 1)
   0003 CFr00r04      [ 4]   91 	stx	_mbrlen_s_65536_9
                             92 ;../mbrlen.c:35: return(mbrtowc(0, s, n, ps ? ps : &sps));
   0006 C6r00r02      [ 4]   93 	lda	_mbrlen_PARM_3
   0009 CAr00r03      [ 4]   94 	ora	(_mbrlen_PARM_3 + 1)
   000C 27 05         [ 3]   95 	beq	00103$
   000E 32r00r02      [ 5]   96 	ldhx	_mbrlen_PARM_3
   0011 20 03         [ 3]   97 	bra	00104$
   0013                      98 00103$:
   0013 45r00r06      [ 3]   99 	ldhx	#_mbrlen_sps_65536_10
   0016                     100 00104$:
   0016 C6r00r04      [ 4]  101 	lda	_mbrlen_s_65536_9
   0019 C7r00r00      [ 4]  102 	sta	_mbrtowc_PARM_2
   001C C6r00r05      [ 4]  103 	lda	(_mbrlen_s_65536_9 + 1)
   001F C7r00r01      [ 4]  104 	sta	(_mbrtowc_PARM_2 + 1)
   0022 C6r00r00      [ 4]  105 	lda	_mbrlen_PARM_2
   0025 C7r00r00      [ 4]  106 	sta	_mbrtowc_PARM_3
   0028 C6r00r01      [ 4]  107 	lda	(_mbrlen_PARM_2 + 1)
   002B C7r00r01      [ 4]  108 	sta	(_mbrtowc_PARM_3 + 1)
   002E 96r00r00      [ 5]  109 	sthx	_mbrtowc_PARM_4
   0031 4F            [ 1]  110 	clra
   0032 97            [ 1]  111 	tax
                            112 ;../mbrlen.c:36: }
   0033 CCr00r00      [ 4]  113 	jmp	_mbrtowc
                            114 	.area CSEG    (CODE)
                            115 	.area CONST   (CODE)
                            116 	.area XINIT   (CODE)
                            117 	.area CABS    (ABS,CODE)
