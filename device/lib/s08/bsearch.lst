                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.cs08
                              6 	.module bsearch
                              7 	.optsdcc -ms08
                              8 	
                              9 	.area HOME    (CODE)
                             10 	.area GSINIT0 (CODE)
                             11 	.area GSINIT  (CODE)
                             12 	.area GSFINAL (CODE)
                             13 	.area CSEG    (CODE)
                             14 	.area XINIT   (CODE)
                             15 	.area CONST   (CODE)
                             16 	.area DSEG    (PAG)
                             17 	.area OSEG    (PAG, OVR)
                             18 	.area XSEG
                             19 	.area XISEG
                             20 ;--------------------------------------------------------
                             21 ; Public variables in this module
                             22 ;--------------------------------------------------------
                             23 	.globl _bsearch_PARM_5
                             24 	.globl _bsearch_PARM_4
                             25 	.globl _bsearch_PARM_3
                             26 	.globl _bsearch_PARM_2
                             27 	.globl _bsearch
                             28 ;--------------------------------------------------------
                             29 ; ram data
                             30 ;--------------------------------------------------------
                             31 	.area DSEG    (PAG)
   0000                      32 _bsearch_sloc0_1_0:
   0000                      33 	.ds 2
                             34 ;--------------------------------------------------------
                             35 ; overlayable items in ram
                             36 ;--------------------------------------------------------
                             37 ;--------------------------------------------------------
                             38 ; absolute ram data
                             39 ;--------------------------------------------------------
                             40 	.area IABS    (ABS)
                             41 	.area IABS    (ABS)
                             42 ;--------------------------------------------------------
                             43 ; absolute external ram data
                             44 ;--------------------------------------------------------
                             45 	.area XABS    (ABS)
                             46 ;--------------------------------------------------------
                             47 ; initialized external ram data
                             48 ;--------------------------------------------------------
                             49 	.area XISEG
                             50 ;--------------------------------------------------------
                             51 ; extended address mode data
                             52 ;--------------------------------------------------------
                             53 	.area XSEG
   0000                      54 _bsearch_PARM_2:
   0000                      55 	.ds 2
   0002                      56 _bsearch_PARM_3:
   0002                      57 	.ds 2
   0004                      58 _bsearch_PARM_4:
   0004                      59 	.ds 2
   0006                      60 _bsearch_PARM_5:
   0006                      61 	.ds 2
   0008                      62 _bsearch_key_65536_36:
   0008                      63 	.ds 2
   000A                      64 _bsearch_left_131072_39:
   000A                      65 	.ds 2
   000C                      66 _bsearch_middle_196608_40:
   000C                      67 	.ds 2
   000E                      68 _bsearch_c_196608_40:
   000E                      69 	.ds 2
                             70 ;--------------------------------------------------------
                             71 ; global & static initialisations
                             72 ;--------------------------------------------------------
                             73 	.area HOME    (CODE)
                             74 	.area GSINIT  (CODE)
                             75 	.area GSFINAL (CODE)
                             76 	.area GSINIT  (CODE)
                             77 ;--------------------------------------------------------
                             78 ; Home
                             79 ;--------------------------------------------------------
                             80 	.area HOME    (CODE)
                             81 	.area HOME    (CODE)
                             82 ;--------------------------------------------------------
                             83 ; code
                             84 ;--------------------------------------------------------
                             85 	.area CSEG    (CODE)
                             86 ;------------------------------------------------------------
                             87 ;Allocation info for local variables in function 'bsearch'
                             88 ;------------------------------------------------------------
                             89 ;sloc0                     Allocated with name '_bsearch_sloc0_1_0'
                             90 ;base                      Allocated with name '_bsearch_PARM_2'
                             91 ;nmemb                     Allocated with name '_bsearch_PARM_3'
                             92 ;size                      Allocated with name '_bsearch_PARM_4'
                             93 ;compar                    Allocated with name '_bsearch_PARM_5'
                             94 ;key                       Allocated with name '_bsearch_key_65536_36'
                             95 ;left                      Allocated with name '_bsearch_left_131072_39'
                             96 ;middle                    Allocated with name '_bsearch_middle_196608_40'
                             97 ;c                         Allocated with name '_bsearch_c_196608_40'
                             98 ;------------------------------------------------------------
                             99 ;../bsearch.c:31: void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *) __reentrant)
                            100 ;	-----------------------------------------
                            101 ;	 function bsearch
                            102 ;	-----------------------------------------
                            103 ;	Register assignment is optimal.
                            104 ;	Stack space usage: 0 bytes.
   0000                     105 _bsearch:
   0000 C7r00r09      [ 4]  106 	sta	(_bsearch_key_65536_36 + 1)
   0003 CFr00r08      [ 4]  107 	stx	_bsearch_key_65536_36
                            108 ;../bsearch.c:33: for(const char *left = base; nmemb;)
   0006 32r00r00      [ 5]  109 	ldhx	_bsearch_PARM_2
   0009 96r00r0A      [ 5]  110 	sthx	_bsearch_left_131072_39
   000C                     111 00109$:
   000C C6r00r02      [ 4]  112 	lda	_bsearch_PARM_3
   000F CAr00r03      [ 4]  113 	ora	(_bsearch_PARM_3 + 1)
   0012 26 03         [ 3]  114 	bne	00133$
   0014 CCr00rA8      [ 4]  115 	jmp	00107$
   0017                     116 00133$:
                            117 ;../bsearch.c:35: const char *middle = left + nmemb / 2 * size;
   0017 C6r00r03      [ 4]  118 	lda	(_bsearch_PARM_3 + 1)
   001A CEr00r02      [ 4]  119 	ldx	_bsearch_PARM_3
   001D 54            [ 1]  120 	lsrx
   001E 46            [ 1]  121 	rora
   001F B7*01         [ 3]  122 	sta	*(_bsearch_sloc0_1_0 + 1)
   0021 BF*00         [ 3]  123 	stx	*_bsearch_sloc0_1_0
   0023 32r00r04      [ 5]  124 	ldhx	_bsearch_PARM_4
   0026 96r00r00      [ 5]  125 	sthx	__mulint_PARM_2
   0029 B6*01         [ 3]  126 	lda	*(_bsearch_sloc0_1_0 + 1)
   002B BE*00         [ 3]  127 	ldx	*_bsearch_sloc0_1_0
   002D CDr00r00      [ 6]  128 	jsr	__mulint
   0030 CBr00r0B      [ 4]  129 	add	(_bsearch_left_131072_39 + 1)
   0033 C7r00r0D      [ 4]  130 	sta	(_bsearch_middle_196608_40 + 1)
   0036 9F            [ 1]  131 	txa
   0037 C9r00r0A      [ 4]  132 	adc	_bsearch_left_131072_39
   003A C7r00r0C      [ 4]  133 	sta	_bsearch_middle_196608_40
                            134 ;../bsearch.c:36: int c = (*compar)(key, middle);
   003D 32r00r0C      [ 5]  135 	ldhx	_bsearch_middle_196608_40
   0040 89            [ 2]  136 	pshx
   0041 8B            [ 2]  137 	pshh
   0042 89            [ 2]  138 	pshx
   0043 8B            [ 2]  139 	pshh
   0044 AD 02         [ 5]  140 	bsr	00135$
   0046 20 0F         [ 3]  141 	bra	00134$
   0048                     142 00135$:
   0048 C6r00r07      [ 4]  143 	lda	(_bsearch_PARM_5 + 1)
   004B 87            [ 2]  144 	psha
   004C C6r00r06      [ 4]  145 	lda	_bsearch_PARM_5
   004F 87            [ 2]  146 	psha
   0050 C6r00r09      [ 4]  147 	lda	(_bsearch_key_65536_36 + 1)
   0053 CEr00r08      [ 4]  148 	ldx	_bsearch_key_65536_36
   0056 81            [ 6]  149 	rts
   0057                     150 00134$:
   0057 C7r00r0F      [ 4]  151 	sta	(_bsearch_c_196608_40 + 1)
   005A CFr00r0E      [ 4]  152 	stx	_bsearch_c_196608_40
   005D A7 02         [ 2]  153 	ais	#2
   005F 8A            [ 3]  154 	pulh
   0060 88            [ 3]  155 	pulx
                            156 ;../bsearch.c:38: if(c < 0)
   0061 C6r00r0E      [ 4]  157 	lda	_bsearch_c_196608_40
   0064 A0 00         [ 2]  158 	sub	#0x00
   0066 90 0C         [ 3]  159 	bge	00105$
                            160 ;../bsearch.c:39: nmemb = nmemb / 2;	
   0068 B6*00         [ 3]  161 	lda	*_bsearch_sloc0_1_0
   006A C7r00r02      [ 4]  162 	sta	_bsearch_PARM_3
   006D B6*01         [ 3]  163 	lda	*(_bsearch_sloc0_1_0 + 1)
   006F C7r00r03      [ 4]  164 	sta	(_bsearch_PARM_3 + 1)
   0072 20 98         [ 3]  165 	bra	00109$
   0074                     166 00105$:
                            167 ;../bsearch.c:40: else if(c > 0)
   0074 4F            [ 1]  168 	clra
   0075 C0r00r0F      [ 4]  169 	sub	(_bsearch_c_196608_40 + 1)
   0078 4F            [ 1]  170 	clra
   0079 C2r00r0E      [ 4]  171 	sbc	_bsearch_c_196608_40
   007C 90 25         [ 3]  172 	bge	00102$
                            173 ;../bsearch.c:42: left = middle + size;
   007E 45r00r0A      [ 3]  174 	ldhx	#_bsearch_left_131072_39
   0081 C6r00r0D      [ 4]  175 	lda	(_bsearch_middle_196608_40 + 1)
   0084 CBr00r05      [ 4]  176 	add	(_bsearch_PARM_4 + 1)
   0087 E7 01         [ 3]  177 	sta	1,x
   0089 C6r00r0C      [ 4]  178 	lda	_bsearch_middle_196608_40
   008C C9r00r04      [ 4]  179 	adc	_bsearch_PARM_4
   008F F7            [ 2]  180 	sta	,x
                            181 ;../bsearch.c:43: nmemb = (nmemb - 1) / 2;
   0090 32r00r02      [ 5]  182 	ldhx	_bsearch_PARM_3
   0093 AF FF         [ 2]  183 	aix	#-1
   0095 9F            [ 1]  184 	txa
   0096 8B            [ 2]  185 	pshh
   0097 88            [ 3]  186 	pulx
   0098 54            [ 1]  187 	lsrx
   0099 46            [ 1]  188 	rora
   009A C7r00r03      [ 4]  189 	sta	(_bsearch_PARM_3 + 1)
   009D CFr00r02      [ 4]  190 	stx	_bsearch_PARM_3
   00A0 CCr00r0C      [ 4]  191 	jmp	00109$
   00A3                     192 00102$:
                            193 ;../bsearch.c:46: return(middle);
   00A3 89            [ 2]  194 	pshx
   00A4 8B            [ 2]  195 	pshh
   00A5 88            [ 3]  196 	pulx
   00A6 86            [ 3]  197 	pula
   00A7 81            [ 6]  198 	rts
   00A8                     199 00107$:
                            200 ;../bsearch.c:49: return(0);
   00A8 4F            [ 1]  201 	clra
   00A9 97            [ 1]  202 	tax
                            203 ;../bsearch.c:50: }
   00AA 81            [ 6]  204 	rts
                            205 	.area CSEG    (CODE)
                            206 	.area CONST   (CODE)
                            207 	.area XINIT   (CODE)
                            208 	.area CABS    (ABS,CODE)
