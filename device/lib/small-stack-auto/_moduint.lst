                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module _moduint
                                      6 	.optsdcc -mmcs51 --model-small
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 ;--------------------------------------------------------
                                     12 ; special function registers
                                     13 ;--------------------------------------------------------
                                     14 	.area RSEG    (ABS,DATA)
      000000                         15 	.org 0x0000
                                     16 ;--------------------------------------------------------
                                     17 ; special function bits
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; overlayable register banks
                                     23 ;--------------------------------------------------------
                                     24 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         25 	.ds 8
                                     26 ;--------------------------------------------------------
                                     27 ; internal ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area DSEG    (DATA)
                                     30 ;--------------------------------------------------------
                                     31 ; overlayable items in internal ram
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; indirectly addressable internal ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area ISEG    (DATA)
                                     37 ;--------------------------------------------------------
                                     38 ; absolute internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area IABS    (ABS,DATA)
                                     41 	.area IABS    (ABS,DATA)
                                     42 ;--------------------------------------------------------
                                     43 ; bit data
                                     44 ;--------------------------------------------------------
                                     45 	.area BSEG    (BIT)
                                     46 ;--------------------------------------------------------
                                     47 ; paged external ram data
                                     48 ;--------------------------------------------------------
                                     49 	.area PSEG    (PAG,XDATA)
                                     50 ;--------------------------------------------------------
                                     51 ; uninitialized external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area XSEG    (XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; absolute external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XABS    (ABS,XDATA)
                                     58 ;--------------------------------------------------------
                                     59 ; initialized external ram data
                                     60 ;--------------------------------------------------------
                                     61 	.area XISEG   (XDATA)
                                     62 	.area HOME    (CODE)
                                     63 	.area GSINIT0 (CODE)
                                     64 	.area GSINIT1 (CODE)
                                     65 	.area GSINIT2 (CODE)
                                     66 	.area GSINIT3 (CODE)
                                     67 	.area GSINIT4 (CODE)
                                     68 	.area GSINIT5 (CODE)
                                     69 	.area GSINIT  (CODE)
                                     70 	.area GSFINAL (CODE)
                                     71 	.area CSEG    (CODE)
                                     72 ;--------------------------------------------------------
                                     73 ; global & static initialisations
                                     74 ;--------------------------------------------------------
                                     75 	.area HOME    (CODE)
                                     76 	.area GSINIT  (CODE)
                                     77 	.area GSFINAL (CODE)
                                     78 	.area GSINIT  (CODE)
                                     79 ;--------------------------------------------------------
                                     80 ; Home
                                     81 ;--------------------------------------------------------
                                     82 	.area HOME    (CODE)
                                     83 	.area HOME    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; code
                                     86 ;--------------------------------------------------------
                                     87 	.area CSEG    (CODE)
                                     88 ;------------------------------------------------------------
                                     89 ;Allocation info for local variables in function '_moduint_dummy'
                                     90 ;------------------------------------------------------------
                                     91 ;	_moduint.c:56: _moduint_dummy (void) __naked
                                     92 ;	-----------------------------------------
                                     93 ;	 function _moduint_dummy
                                     94 ;	-----------------------------------------
      000000                         95 __moduint_dummy:
                                     96 ;	naked function: no prologue.
                                     97 ;	_moduint.c:171: __endasm;
                                     98 	.globl	__moduint
      000000                         99 __moduint:
                           000000   100 	ar0	= 0 ; BUG register set is not considered
                           000001   101 	ar1	= 1
                                    102 	.globl	__modint
      000000 E5 81            [12]  103 	mov	a,sp
      000002 24 FE            [12]  104 	add	a,#-2 ; 2 bytes return address
      000004 F8               [12]  105 	mov	r0,a ; r0 points to bh
      000005 86 01            [24]  106 	mov	ar1,@r0 ; load bh
      000007 18               [12]  107 	dec	r0
      000008 86 00            [24]  108 	mov	ar0,@r0 ; load bl
      00000A                        109 __modint:
                                    110 ; entry point for __modsint
      00000A E8               [12]  111 	mov	a,r0 ; avoid endless loop
      00000B 49               [12]  112 	orl	a,r1
      00000C 60 36            [24]  113 	jz	div_by_0
      00000E 7A 01            [12]  114 	mov	r2,#1
      000010                        115 loop1:
      000010 E8               [12]  116 	mov a,r0 ; b <<= 1
      000011 25 E0            [12]  117 	add	a,acc
      000013 F8               [12]  118 	mov	r0,a
      000014 E9               [12]  119 	mov	a,r1
      000015 33               [12]  120 	rlc	a
      000016 40 0E            [24]  121 	jc	msbset
      000018 F9               [12]  122 	mov	r1,a
      000019 E5 82            [12]  123 	mov	a,dpl ; a - b
      00001B 98               [12]  124 	subb	a,r0 ; here carry is always clear
      00001C E5 83            [12]  125 	mov	a,dph
      00001E 99               [12]  126 	subb	a,r1
      00001F 40 03            [24]  127 	jc	start
      000021 0A               [12]  128 	inc	r2
      000022 80 EC            [24]  129 	sjmp	loop1
      000024                        130 start:
      000024 C3               [12]  131 	clr c
      000025 E9               [12]  132 	mov	a,r1 ; b >>= 1;
      000026                        133 msbset:
      000026 13               [12]  134 	rrc a
      000027 F9               [12]  135 	mov	r1,a
      000028 E8               [12]  136 	mov	a,r0
      000029 13               [12]  137 	rrc	a
      00002A F8               [12]  138 	mov	r0,a
      00002B                        139 loop2:
      00002B C3               [12]  140 	clr c
      00002C E5 82            [12]  141 	mov	a,dpl ; a - b
      00002E 98               [12]  142 	subb	a,r0
      00002F F5 F0            [12]  143 	mov	b,a
      000031 E5 83            [12]  144 	mov	a,dph
      000033 99               [12]  145 	subb	a,r1
      000034 40 05            [24]  146 	jc	smaller ; a >= b?
      000036 F5 83            [12]  147 	mov	dph,a ; -> yes; a = a - b;
      000038 85 F0 82         [24]  148 	mov	dpl,b
      00003B                        149 smaller:
                                    150 ; -> no
      00003B C3               [12]  151 	clr	c
      00003C E9               [12]  152 	mov	a,r1 ; b >>= 1;
      00003D 13               [12]  153 	rrc	a
      00003E F9               [12]  154 	mov	r1,a
      00003F E8               [12]  155 	mov	a,r0
      000040 13               [12]  156 	rrc	a
      000041 F8               [12]  157 	mov	r0,a
      000042 DA E7            [24]  158 	djnz	r2,loop2
      000044                        159 div_by_0:
      000044 22               [24]  160 	ret
                                    161 ;	_moduint.c:172: }
                                    162 ;	naked function: no epilogue.
                                    163 	.area CSEG    (CODE)
                                    164 	.area CONST   (CODE)
                                    165 	.area XINIT   (CODE)
                                    166 	.area CABS    (ABS,CODE)
