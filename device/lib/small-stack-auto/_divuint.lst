                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module _divuint
                                      6 	.optsdcc -mmcs51 --model-small
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 ;--------------------------------------------------------
                                     12 ; special function registers
                                     13 ;--------------------------------------------------------
                                     14 	.area RSEG    (ABS,DATA)
      000000                         15 	.org 0x0000
                                     16 ;--------------------------------------------------------
                                     17 ; special function bits
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; overlayable register banks
                                     23 ;--------------------------------------------------------
                                     24 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         25 	.ds 8
                                     26 ;--------------------------------------------------------
                                     27 ; internal ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area DSEG    (DATA)
                                     30 ;--------------------------------------------------------
                                     31 ; overlayable items in internal ram
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; indirectly addressable internal ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area ISEG    (DATA)
                                     37 ;--------------------------------------------------------
                                     38 ; absolute internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area IABS    (ABS,DATA)
                                     41 	.area IABS    (ABS,DATA)
                                     42 ;--------------------------------------------------------
                                     43 ; bit data
                                     44 ;--------------------------------------------------------
                                     45 	.area BSEG    (BIT)
                                     46 ;--------------------------------------------------------
                                     47 ; paged external ram data
                                     48 ;--------------------------------------------------------
                                     49 	.area PSEG    (PAG,XDATA)
                                     50 ;--------------------------------------------------------
                                     51 ; uninitialized external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area XSEG    (XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; absolute external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XABS    (ABS,XDATA)
                                     58 ;--------------------------------------------------------
                                     59 ; initialized external ram data
                                     60 ;--------------------------------------------------------
                                     61 	.area XISEG   (XDATA)
                                     62 	.area HOME    (CODE)
                                     63 	.area GSINIT0 (CODE)
                                     64 	.area GSINIT1 (CODE)
                                     65 	.area GSINIT2 (CODE)
                                     66 	.area GSINIT3 (CODE)
                                     67 	.area GSINIT4 (CODE)
                                     68 	.area GSINIT5 (CODE)
                                     69 	.area GSINIT  (CODE)
                                     70 	.area GSFINAL (CODE)
                                     71 	.area CSEG    (CODE)
                                     72 ;--------------------------------------------------------
                                     73 ; global & static initialisations
                                     74 ;--------------------------------------------------------
                                     75 	.area HOME    (CODE)
                                     76 	.area GSINIT  (CODE)
                                     77 	.area GSFINAL (CODE)
                                     78 	.area GSINIT  (CODE)
                                     79 ;--------------------------------------------------------
                                     80 ; Home
                                     81 ;--------------------------------------------------------
                                     82 	.area HOME    (CODE)
                                     83 	.area HOME    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; code
                                     86 ;--------------------------------------------------------
                                     87 	.area CSEG    (CODE)
                                     88 ;------------------------------------------------------------
                                     89 ;Allocation info for local variables in function '_divuint_dummy'
                                     90 ;------------------------------------------------------------
                                     91 ;	_divuint.c:57: _divuint_dummy (void) __naked
                                     92 ;	-----------------------------------------
                                     93 ;	 function _divuint_dummy
                                     94 ;	-----------------------------------------
      000000                         95 __divuint_dummy:
                                     96 ;	naked function: no prologue.
                                     97 ;	_divuint.c:153: __endasm;
                                     98 	.globl	__divuint
      000000                         99 __divuint:
                                    100 	.globl	__divint
      000000 E5 81            [12]  101 	mov	a,sp
      000002 24 FE            [12]  102 	add	a,#-2 ; 2 bytes return address
      000004 F8               [12]  103 	mov	r0,a ; r0 points to yh
      000005 E6               [12]  104 	mov	a,@r0 ; load yh
      000006 F9               [12]  105 	mov	r1,a
      000007 18               [12]  106 	dec	r0
      000008 E6               [12]  107 	mov	a,@r0 ; load yl
      000009 F8               [12]  108 	mov	r0,a
      00000A                        109 __divint:
                                    110 ; entry point for __divsint
      00000A 7A 10            [12]  111 	mov	r2,#16
      00000C E4               [12]  112 	clr	a
      00000D FB               [12]  113 	mov	r3,a
      00000E FC               [12]  114 	mov	r4,a
      00000F                        115 loop:
      00000F E5 82            [12]  116 	mov	a,dpl ; x <<= 1
      000011 25 E0            [12]  117 	add	a,acc
      000013 F5 82            [12]  118 	mov	dpl,a
      000015 E5 83            [12]  119 	mov	a,dph
      000017 33               [12]  120 	rlc	a
      000018 F5 83            [12]  121 	mov	dph,a
      00001A EB               [12]  122 	mov	a,r3 ; reste <<= 1
      00001B 33               [12]  123 	rlc	a ; feed in carry
      00001C FB               [12]  124 	mov	r3,a
      00001D EC               [12]  125 	mov	a,r4
      00001E 33               [12]  126 	rlc	a
      00001F FC               [12]  127 	mov	r4,a
      000020 EB               [12]  128 	mov	a,r3 ; reste - y
      000021 98               [12]  129 	subb	a,r0 ; here carry is always clear, because
                                    130 ;	reste <<= 1 never overflows
      000022 F5 F0            [12]  131 	mov	b,a
      000024 EC               [12]  132 	mov	a,r4
      000025 99               [12]  133 	subb	a,r1
      000026 40 06            [24]  134 	jc	smaller ; reste >= y?
      000028 FC               [12]  135 	mov	r4,a ; -> yes; reste = reste - y;
      000029 AB F0            [24]  136 	mov	r3,b
      00002B 43 82 01         [24]  137 	orl	dpl,#1
      00002E                        138 smaller:
                                    139 ; -> no
      00002E DA DF            [24]  140 	djnz	r2,loop
      000030 22               [24]  141 	ret
                                    142 ;	_divuint.c:154: }
                                    143 ;	naked function: no epilogue.
                                    144 	.area CSEG    (CODE)
                                    145 	.area CONST   (CODE)
                                    146 	.area XINIT   (CODE)
                                    147 	.area CABS    (ABS,CODE)
