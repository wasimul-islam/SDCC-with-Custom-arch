                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module rand
                                      6 	.optsdcc -mmcs51 --model-large
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _rand
                                     12 	.globl _srand
                                     13 ;--------------------------------------------------------
                                     14 ; special function registers
                                     15 ;--------------------------------------------------------
                                     16 	.area RSEG    (ABS,DATA)
      000000                         17 	.org 0x0000
                                     18 ;--------------------------------------------------------
                                     19 ; special function bits
                                     20 ;--------------------------------------------------------
                                     21 	.area RSEG    (ABS,DATA)
      000000                         22 	.org 0x0000
                                     23 ;--------------------------------------------------------
                                     24 ; overlayable register banks
                                     25 ;--------------------------------------------------------
                                     26 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         27 	.ds 8
                                     28 ;--------------------------------------------------------
                                     29 ; internal ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area DSEG    (DATA)
                                     32 ;--------------------------------------------------------
                                     33 ; overlayable items in internal ram
                                     34 ;--------------------------------------------------------
                                     35 	.area	OSEG    (OVR,DATA)
                                     36 ;--------------------------------------------------------
                                     37 ; indirectly addressable internal ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area ISEG    (DATA)
                                     40 ;--------------------------------------------------------
                                     41 ; absolute internal ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area IABS    (ABS,DATA)
                                     44 	.area IABS    (ABS,DATA)
                                     45 ;--------------------------------------------------------
                                     46 ; bit data
                                     47 ;--------------------------------------------------------
                                     48 	.area BSEG    (BIT)
                                     49 ;--------------------------------------------------------
                                     50 ; paged external ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area PSEG    (PAG,XDATA)
                                     53 ;--------------------------------------------------------
                                     54 ; uninitialized external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area XSEG    (XDATA)
      000000                         57 _srand_seed_65536_41:
      000000                         58 	.ds 2
                                     59 ;--------------------------------------------------------
                                     60 ; absolute external ram data
                                     61 ;--------------------------------------------------------
                                     62 	.area XABS    (ABS,XDATA)
                                     63 ;--------------------------------------------------------
                                     64 ; initialized external ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area XISEG   (XDATA)
      000000                         67 _s:
      000000                         68 	.ds 4
                                     69 	.area HOME    (CODE)
                                     70 	.area GSINIT0 (CODE)
                                     71 	.area GSINIT1 (CODE)
                                     72 	.area GSINIT2 (CODE)
                                     73 	.area GSINIT3 (CODE)
                                     74 	.area GSINIT4 (CODE)
                                     75 	.area GSINIT5 (CODE)
                                     76 	.area GSINIT  (CODE)
                                     77 	.area GSFINAL (CODE)
                                     78 	.area CSEG    (CODE)
                                     79 ;--------------------------------------------------------
                                     80 ; global & static initialisations
                                     81 ;--------------------------------------------------------
                                     82 	.area HOME    (CODE)
                                     83 	.area GSINIT  (CODE)
                                     84 	.area GSFINAL (CODE)
                                     85 	.area GSINIT  (CODE)
                                     86 ;--------------------------------------------------------
                                     87 ; Home
                                     88 ;--------------------------------------------------------
                                     89 	.area HOME    (CODE)
                                     90 	.area HOME    (CODE)
                                     91 ;--------------------------------------------------------
                                     92 ; code
                                     93 ;--------------------------------------------------------
                                     94 	.area CSEG    (CODE)
                                     95 ;------------------------------------------------------------
                                     96 ;Allocation info for local variables in function 'rand'
                                     97 ;------------------------------------------------------------
                                     98 ;t                         Allocated to registers r4 r5 r6 r7 
                                     99 ;------------------------------------------------------------
                                    100 ;	rand.c:40: int rand(void)
                                    101 ;	-----------------------------------------
                                    102 ;	 function rand
                                    103 ;	-----------------------------------------
      000000                        104 _rand:
                           000007   105 	ar7 = 0x07
                           000006   106 	ar6 = 0x06
                           000005   107 	ar5 = 0x05
                           000004   108 	ar4 = 0x04
                           000003   109 	ar3 = 0x03
                           000002   110 	ar2 = 0x02
                           000001   111 	ar1 = 0x01
                           000000   112 	ar0 = 0x00
                                    113 ;	rand.c:42: register unsigned long t = s;
      000000 90r00r00         [24]  114 	mov	dptr,#_s
      000003 E0               [24]  115 	movx	a,@dptr
      000004 FC               [12]  116 	mov	r4,a
      000005 A3               [24]  117 	inc	dptr
      000006 E0               [24]  118 	movx	a,@dptr
      000007 FD               [12]  119 	mov	r5,a
      000008 A3               [24]  120 	inc	dptr
      000009 E0               [24]  121 	movx	a,@dptr
      00000A FE               [12]  122 	mov	r6,a
      00000B A3               [24]  123 	inc	dptr
      00000C E0               [24]  124 	movx	a,@dptr
      00000D FF               [12]  125 	mov	r7,a
                                    126 ;	rand.c:44: t ^= t >> 10;
      00000E 8D 00            [24]  127 	mov	ar0,r5
      000010 EE               [12]  128 	mov	a,r6
      000011 C3               [12]  129 	clr	c
      000012 13               [12]  130 	rrc	a
      000013 C8               [12]  131 	xch	a,r0
      000014 13               [12]  132 	rrc	a
      000015 C8               [12]  133 	xch	a,r0
      000016 C3               [12]  134 	clr	c
      000017 13               [12]  135 	rrc	a
      000018 C8               [12]  136 	xch	a,r0
      000019 13               [12]  137 	rrc	a
      00001A C8               [12]  138 	xch	a,r0
      00001B F9               [12]  139 	mov	r1,a
      00001C EF               [12]  140 	mov	a,r7
      00001D 03               [12]  141 	rr	a
      00001E 03               [12]  142 	rr	a
      00001F 54 C0            [12]  143 	anl	a,#0xc0
      000021 49               [12]  144 	orl	a,r1
      000022 F9               [12]  145 	mov	r1,a
      000023 EF               [12]  146 	mov	a,r7
      000024 03               [12]  147 	rr	a
      000025 03               [12]  148 	rr	a
      000026 54 3F            [12]  149 	anl	a,#0x3f
      000028 FA               [12]  150 	mov	r2,a
      000029 7B 00            [12]  151 	mov	r3,#0x00
      00002B EC               [12]  152 	mov	a,r4
      00002C 62 00            [12]  153 	xrl	ar0,a
      00002E ED               [12]  154 	mov	a,r5
      00002F 62 01            [12]  155 	xrl	ar1,a
      000031 EE               [12]  156 	mov	a,r6
      000032 62 02            [12]  157 	xrl	ar2,a
      000034 EF               [12]  158 	mov	a,r7
      000035 62 03            [12]  159 	xrl	ar3,a
                                    160 ;	rand.c:45: t ^= t << 9;
      000037 E8               [12]  161 	mov	a,r0
      000038 28               [12]  162 	add	a,r0
      000039 FD               [12]  163 	mov	r5,a
      00003A E9               [12]  164 	mov	a,r1
      00003B 33               [12]  165 	rlc	a
      00003C FE               [12]  166 	mov	r6,a
      00003D EA               [12]  167 	mov	a,r2
      00003E 33               [12]  168 	rlc	a
      00003F FF               [12]  169 	mov	r7,a
      000040 7C 00            [12]  170 	mov	r4,#0x00
      000042 E8               [12]  171 	mov	a,r0
      000043 62 04            [12]  172 	xrl	ar4,a
      000045 E9               [12]  173 	mov	a,r1
      000046 62 05            [12]  174 	xrl	ar5,a
      000048 EA               [12]  175 	mov	a,r2
      000049 62 06            [12]  176 	xrl	ar6,a
      00004B EB               [12]  177 	mov	a,r3
      00004C 62 07            [12]  178 	xrl	ar7,a
                                    179 ;	rand.c:46: t ^= t >> 25;
      00004E EF               [12]  180 	mov	a,r7
      00004F C3               [12]  181 	clr	c
      000050 13               [12]  182 	rrc	a
      000051 F8               [12]  183 	mov	r0,a
      000052 E4               [12]  184 	clr	a
      000053 F9               [12]  185 	mov	r1,a
      000054 FA               [12]  186 	mov	r2,a
      000055 FB               [12]  187 	mov	r3,a
      000056 E8               [12]  188 	mov	a,r0
      000057 62 04            [12]  189 	xrl	ar4,a
      000059 E9               [12]  190 	mov	a,r1
      00005A 62 05            [12]  191 	xrl	ar5,a
      00005C EA               [12]  192 	mov	a,r2
      00005D 62 06            [12]  193 	xrl	ar6,a
      00005F EB               [12]  194 	mov	a,r3
      000060 62 07            [12]  195 	xrl	ar7,a
                                    196 ;	rand.c:48: s = t;
      000062 90r00r00         [24]  197 	mov	dptr,#_s
      000065 EC               [12]  198 	mov	a,r4
      000066 F0               [24]  199 	movx	@dptr,a
      000067 ED               [12]  200 	mov	a,r5
      000068 A3               [24]  201 	inc	dptr
      000069 F0               [24]  202 	movx	@dptr,a
      00006A EE               [12]  203 	mov	a,r6
      00006B A3               [24]  204 	inc	dptr
      00006C F0               [24]  205 	movx	@dptr,a
      00006D EF               [12]  206 	mov	a,r7
      00006E A3               [24]  207 	inc	dptr
      00006F F0               [24]  208 	movx	@dptr,a
                                    209 ;	rand.c:50: return(t & RAND_MAX);
      000070 53 05 7F         [24]  210 	anl	ar5,#0x7f
      000073 8C 82            [24]  211 	mov	dpl,r4
      000075 8D 83            [24]  212 	mov	dph,r5
                                    213 ;	rand.c:51: }
      000077 22               [24]  214 	ret
                                    215 ;------------------------------------------------------------
                                    216 ;Allocation info for local variables in function 'srand'
                                    217 ;------------------------------------------------------------
                                    218 ;seed                      Allocated with name '_srand_seed_65536_41'
                                    219 ;------------------------------------------------------------
                                    220 ;	rand.c:53: void srand(unsigned int seed)
                                    221 ;	-----------------------------------------
                                    222 ;	 function srand
                                    223 ;	-----------------------------------------
      000078                        224 _srand:
      000078 AF 83            [24]  225 	mov	r7,dph
      00007A E5 82            [12]  226 	mov	a,dpl
      00007C 90r00r00         [24]  227 	mov	dptr,#_srand_seed_65536_41
      00007F F0               [24]  228 	movx	@dptr,a
      000080 EF               [12]  229 	mov	a,r7
      000081 A3               [24]  230 	inc	dptr
      000082 F0               [24]  231 	movx	@dptr,a
                                    232 ;	rand.c:55: s = seed | 0x80000000; /* s shall not become 0 */
      000083 90r00r00         [24]  233 	mov	dptr,#_srand_seed_65536_41
      000086 E0               [24]  234 	movx	a,@dptr
      000087 FE               [12]  235 	mov	r6,a
      000088 A3               [24]  236 	inc	dptr
      000089 E0               [24]  237 	movx	a,@dptr
      00008A FF               [12]  238 	mov	r7,a
      00008B 7D 00            [12]  239 	mov	r5,#0x00
      00008D 7C 00            [12]  240 	mov	r4,#0x00
      00008F 90r00r00         [24]  241 	mov	dptr,#_s
      000092 EE               [12]  242 	mov	a,r6
      000093 F0               [24]  243 	movx	@dptr,a
      000094 EF               [12]  244 	mov	a,r7
      000095 A3               [24]  245 	inc	dptr
      000096 F0               [24]  246 	movx	@dptr,a
      000097 ED               [12]  247 	mov	a,r5
      000098 A3               [24]  248 	inc	dptr
      000099 F0               [24]  249 	movx	@dptr,a
      00009A 74 80            [12]  250 	mov	a,#0x80
      00009C 4C               [12]  251 	orl	a,r4
      00009D A3               [24]  252 	inc	dptr
      00009E F0               [24]  253 	movx	@dptr,a
                                    254 ;	rand.c:56: }
      00009F 22               [24]  255 	ret
                                    256 	.area CSEG    (CODE)
                                    257 	.area CONST   (CODE)
                                    258 	.area XINIT   (CODE)
      000000                        259 __xinit__s:
      000000 01 00 00 80            260 	.byte #0x01, #0x00, #0x00, #0x80	; 2147483649
                                    261 	.area CABS    (ABS,CODE)
