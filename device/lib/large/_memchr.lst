                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module _memchr
                                      6 	.optsdcc -mmcs51 --model-large
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _memchr_PARM_3
                                     12 	.globl _memchr_PARM_2
                                     13 	.globl _memchr
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 	.area RSEG    (ABS,DATA)
      000000                         18 	.org 0x0000
                                     19 ;--------------------------------------------------------
                                     20 ; special function bits
                                     21 ;--------------------------------------------------------
                                     22 	.area RSEG    (ABS,DATA)
      000000                         23 	.org 0x0000
                                     24 ;--------------------------------------------------------
                                     25 ; overlayable register banks
                                     26 ;--------------------------------------------------------
                                     27 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         28 	.ds 8
                                     29 ;--------------------------------------------------------
                                     30 ; internal ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area DSEG    (DATA)
                                     33 ;--------------------------------------------------------
                                     34 ; overlayable items in internal ram
                                     35 ;--------------------------------------------------------
                                     36 	.area	OSEG    (OVR,DATA)
      000000                         37 _memchr_sloc0_1_0:
      000000                         38 	.ds 3
                                     39 ;--------------------------------------------------------
                                     40 ; indirectly addressable internal ram data
                                     41 ;--------------------------------------------------------
                                     42 	.area ISEG    (DATA)
                                     43 ;--------------------------------------------------------
                                     44 ; absolute internal ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area IABS    (ABS,DATA)
                                     47 	.area IABS    (ABS,DATA)
                                     48 ;--------------------------------------------------------
                                     49 ; bit data
                                     50 ;--------------------------------------------------------
                                     51 	.area BSEG    (BIT)
                                     52 ;--------------------------------------------------------
                                     53 ; paged external ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area PSEG    (PAG,XDATA)
                                     56 ;--------------------------------------------------------
                                     57 ; uninitialized external ram data
                                     58 ;--------------------------------------------------------
                                     59 	.area XSEG    (XDATA)
      000000                         60 _memchr_PARM_2:
      000000                         61 	.ds 2
      000002                         62 _memchr_PARM_3:
      000002                         63 	.ds 2
      000004                         64 _memchr_s_65536_26:
      000004                         65 	.ds 3
                                     66 ;--------------------------------------------------------
                                     67 ; absolute external ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area XABS    (ABS,XDATA)
                                     70 ;--------------------------------------------------------
                                     71 ; initialized external ram data
                                     72 ;--------------------------------------------------------
                                     73 	.area XISEG   (XDATA)
                                     74 	.area HOME    (CODE)
                                     75 	.area GSINIT0 (CODE)
                                     76 	.area GSINIT1 (CODE)
                                     77 	.area GSINIT2 (CODE)
                                     78 	.area GSINIT3 (CODE)
                                     79 	.area GSINIT4 (CODE)
                                     80 	.area GSINIT5 (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 	.area GSFINAL (CODE)
                                     83 	.area CSEG    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; global & static initialisations
                                     86 ;--------------------------------------------------------
                                     87 	.area HOME    (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 	.area GSFINAL (CODE)
                                     90 	.area GSINIT  (CODE)
                                     91 ;--------------------------------------------------------
                                     92 ; Home
                                     93 ;--------------------------------------------------------
                                     94 	.area HOME    (CODE)
                                     95 	.area HOME    (CODE)
                                     96 ;--------------------------------------------------------
                                     97 ; code
                                     98 ;--------------------------------------------------------
                                     99 	.area CSEG    (CODE)
                                    100 ;------------------------------------------------------------
                                    101 ;Allocation info for local variables in function 'memchr'
                                    102 ;------------------------------------------------------------
                                    103 ;c                         Allocated with name '_memchr_PARM_2'
                                    104 ;n                         Allocated with name '_memchr_PARM_3'
                                    105 ;s                         Allocated with name '_memchr_s_65536_26'
                                    106 ;p                         Allocated with name '_memchr_p_65536_27'
                                    107 ;end                       Allocated with name '_memchr_end_65536_27'
                                    108 ;sloc0                     Allocated with name '_memchr_sloc0_1_0'
                                    109 ;------------------------------------------------------------
                                    110 ;	_memchr.c:31: void *memchr(const void *s, int c, size_t n)
                                    111 ;	-----------------------------------------
                                    112 ;	 function memchr
                                    113 ;	-----------------------------------------
      000000                        114 _memchr:
                           000007   115 	ar7 = 0x07
                           000006   116 	ar6 = 0x06
                           000005   117 	ar5 = 0x05
                           000004   118 	ar4 = 0x04
                           000003   119 	ar3 = 0x03
                           000002   120 	ar2 = 0x02
                           000001   121 	ar1 = 0x01
                           000000   122 	ar0 = 0x00
      000000 AF F0            [24]  123 	mov	r7,b
      000002 AE 83            [24]  124 	mov	r6,dph
      000004 E5 82            [12]  125 	mov	a,dpl
      000006 90r00r04         [24]  126 	mov	dptr,#_memchr_s_65536_26
      000009 F0               [24]  127 	movx	@dptr,a
      00000A EE               [12]  128 	mov	a,r6
      00000B A3               [24]  129 	inc	dptr
      00000C F0               [24]  130 	movx	@dptr,a
      00000D EF               [12]  131 	mov	a,r7
      00000E A3               [24]  132 	inc	dptr
      00000F F0               [24]  133 	movx	@dptr,a
                                    134 ;	_memchr.c:33: unsigned char *p = (unsigned char *)s;
      000010 90r00r04         [24]  135 	mov	dptr,#_memchr_s_65536_26
      000013 E0               [24]  136 	movx	a,@dptr
      000014 FD               [12]  137 	mov	r5,a
      000015 A3               [24]  138 	inc	dptr
      000016 E0               [24]  139 	movx	a,@dptr
      000017 FE               [12]  140 	mov	r6,a
      000018 A3               [24]  141 	inc	dptr
      000019 E0               [24]  142 	movx	a,@dptr
      00001A FF               [12]  143 	mov	r7,a
                                    144 ;	_memchr.c:34: unsigned char *end = p + n;
      00001B 90r00r02         [24]  145 	mov	dptr,#_memchr_PARM_3
      00001E E0               [24]  146 	movx	a,@dptr
      00001F FB               [12]  147 	mov	r3,a
      000020 A3               [24]  148 	inc	dptr
      000021 E0               [24]  149 	movx	a,@dptr
      000022 FC               [12]  150 	mov	r4,a
      000023 EB               [12]  151 	mov	a,r3
      000024 2D               [12]  152 	add	a,r5
      000025 FB               [12]  153 	mov	r3,a
      000026 EC               [12]  154 	mov	a,r4
      000027 3E               [12]  155 	addc	a,r6
      000028 FA               [12]  156 	mov	r2,a
      000029 8F 04            [24]  157 	mov	ar4,r7
                                    158 ;	_memchr.c:38: return(0);
      00002B 90r00r00         [24]  159 	mov	dptr,#_memchr_PARM_2
      00002E E0               [24]  160 	movx	a,@dptr
      00002F F8               [12]  161 	mov	r0,a
      000030 A3               [24]  162 	inc	dptr
      000031 E0               [24]  163 	movx	a,@dptr
      000032 F9               [12]  164 	mov	r1,a
      000033 8D*00            [24]  165 	mov	_memchr_sloc0_1_0,r5
      000035 8E*01            [24]  166 	mov	(_memchr_sloc0_1_0 + 1),r6
      000037 8F*02            [24]  167 	mov	(_memchr_sloc0_1_0 + 2),r7
      000039                        168 00105$:
                                    169 ;	_memchr.c:35: for(; p != end; p++)
      000039 C0*00            [24]  170 	push	_memchr_sloc0_1_0
      00003B C0*01            [24]  171 	push	(_memchr_sloc0_1_0 + 1)
      00003D C0*02            [24]  172 	push	(_memchr_sloc0_1_0 + 2)
      00003F 8B 82            [24]  173 	mov	dpl,r3
      000041 8A 83            [24]  174 	mov	dph,r2
      000043 8C F0            [24]  175 	mov	b,r4
      000045 12r00r00         [24]  176 	lcall	___gptr_cmp
      000048 15 81            [12]  177 	dec	sp
      00004A 15 81            [12]  178 	dec	sp
      00004C 15 81            [12]  179 	dec	sp
      00004E 60 3F            [24]  180 	jz	00103$
                                    181 ;	_memchr.c:36: if(*p == (unsigned char)c)
      000050 C0 03            [24]  182 	push	ar3
      000052 C0 02            [24]  183 	push	ar2
      000054 C0 04            [24]  184 	push	ar4
      000056 85*00 82         [24]  185 	mov	dpl,_memchr_sloc0_1_0
      000059 85*01 83         [24]  186 	mov	dph,(_memchr_sloc0_1_0 + 1)
      00005C 85*02 F0         [24]  187 	mov	b,(_memchr_sloc0_1_0 + 2)
      00005F 12r00r00         [24]  188 	lcall	__gptrget
      000062 FC               [12]  189 	mov	r4,a
      000063 88 03            [24]  190 	mov	ar3,r0
      000065 B5 03 02         [24]  191 	cjne	a,ar3,00122$
      000068 80 08            [24]  192 	sjmp	00123$
      00006A                        193 00122$:
      00006A D0 04            [24]  194 	pop	ar4
      00006C D0 02            [24]  195 	pop	ar2
      00006E D0 03            [24]  196 	pop	ar3
      000070 80 13            [24]  197 	sjmp	00106$
      000072                        198 00123$:
      000072 D0 04            [24]  199 	pop	ar4
      000074 D0 02            [24]  200 	pop	ar2
      000076 D0 03            [24]  201 	pop	ar3
                                    202 ;	_memchr.c:37: return((void *)p);
      000078 AD*00            [24]  203 	mov	r5,_memchr_sloc0_1_0
      00007A AE*01            [24]  204 	mov	r6,(_memchr_sloc0_1_0 + 1)
      00007C AF*02            [24]  205 	mov	r7,(_memchr_sloc0_1_0 + 2)
      00007E 8D 82            [24]  206 	mov	dpl,r5
      000080 8E 83            [24]  207 	mov	dph,r6
      000082 8F F0            [24]  208 	mov	b,r7
      000084 22               [24]  209 	ret
      000085                        210 00106$:
                                    211 ;	_memchr.c:35: for(; p != end; p++)
      000085 05*00            [12]  212 	inc	_memchr_sloc0_1_0
      000087 E4               [12]  213 	clr	a
      000088 B5*00 AE         [24]  214 	cjne	a,_memchr_sloc0_1_0,00105$
      00008B 05*01            [12]  215 	inc	(_memchr_sloc0_1_0 + 1)
      00008D 80 AA            [24]  216 	sjmp	00105$
      00008F                        217 00103$:
                                    218 ;	_memchr.c:38: return(0);
      00008F 90 00 00         [24]  219 	mov	dptr,#0x0000
      000092 75 F0 00         [24]  220 	mov	b,#0x00
                                    221 ;	_memchr.c:39: }
      000095 22               [24]  222 	ret
                                    223 	.area CSEG    (CODE)
                                    224 	.area CONST   (CODE)
                                    225 	.area XINIT   (CODE)
                                    226 	.area CABS    (ABS,CODE)
