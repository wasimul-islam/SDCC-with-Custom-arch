                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module bsearch
                                      6 	.optsdcc -mmcs51 --model-large
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _bsearch_PARM_5
                                     12 	.globl _bsearch_PARM_4
                                     13 	.globl _bsearch_PARM_3
                                     14 	.globl _bsearch_PARM_2
                                     15 	.globl _bsearch
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; special function bits
                                     23 ;--------------------------------------------------------
                                     24 	.area RSEG    (ABS,DATA)
      000000                         25 	.org 0x0000
                                     26 ;--------------------------------------------------------
                                     27 ; overlayable register banks
                                     28 ;--------------------------------------------------------
                                     29 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         30 	.ds 8
                                     31 ;--------------------------------------------------------
                                     32 ; internal ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area DSEG    (DATA)
      000000                         35 _bsearch_sloc0_1_0:
      000000                         36 	.ds 2
      000002                         37 _bsearch_sloc1_1_0:
      000002                         38 	.ds 3
      000005                         39 _bsearch_sloc2_1_0:
      000005                         40 	.ds 3
                                     41 ;--------------------------------------------------------
                                     42 ; overlayable items in internal ram
                                     43 ;--------------------------------------------------------
                                     44 ;--------------------------------------------------------
                                     45 ; indirectly addressable internal ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area ISEG    (DATA)
                                     48 ;--------------------------------------------------------
                                     49 ; absolute internal ram data
                                     50 ;--------------------------------------------------------
                                     51 	.area IABS    (ABS,DATA)
                                     52 	.area IABS    (ABS,DATA)
                                     53 ;--------------------------------------------------------
                                     54 ; bit data
                                     55 ;--------------------------------------------------------
                                     56 	.area BSEG    (BIT)
                                     57 ;--------------------------------------------------------
                                     58 ; paged external ram data
                                     59 ;--------------------------------------------------------
                                     60 	.area PSEG    (PAG,XDATA)
                                     61 ;--------------------------------------------------------
                                     62 ; uninitialized external ram data
                                     63 ;--------------------------------------------------------
                                     64 	.area XSEG    (XDATA)
      000000                         65 _bsearch_PARM_2:
      000000                         66 	.ds 3
      000003                         67 _bsearch_PARM_3:
      000003                         68 	.ds 2
      000005                         69 _bsearch_PARM_4:
      000005                         70 	.ds 2
      000007                         71 _bsearch_PARM_5:
      000007                         72 	.ds 2
      000009                         73 _bsearch_key_65536_39:
      000009                         74 	.ds 3
      00000C                         75 _bsearch_left_131072_42:
      00000C                         76 	.ds 3
                                     77 ;--------------------------------------------------------
                                     78 ; absolute external ram data
                                     79 ;--------------------------------------------------------
                                     80 	.area XABS    (ABS,XDATA)
                                     81 ;--------------------------------------------------------
                                     82 ; initialized external ram data
                                     83 ;--------------------------------------------------------
                                     84 	.area XISEG   (XDATA)
                                     85 	.area HOME    (CODE)
                                     86 	.area GSINIT0 (CODE)
                                     87 	.area GSINIT1 (CODE)
                                     88 	.area GSINIT2 (CODE)
                                     89 	.area GSINIT3 (CODE)
                                     90 	.area GSINIT4 (CODE)
                                     91 	.area GSINIT5 (CODE)
                                     92 	.area GSINIT  (CODE)
                                     93 	.area GSFINAL (CODE)
                                     94 	.area CSEG    (CODE)
                                     95 ;--------------------------------------------------------
                                     96 ; global & static initialisations
                                     97 ;--------------------------------------------------------
                                     98 	.area HOME    (CODE)
                                     99 	.area GSINIT  (CODE)
                                    100 	.area GSFINAL (CODE)
                                    101 	.area GSINIT  (CODE)
                                    102 ;--------------------------------------------------------
                                    103 ; Home
                                    104 ;--------------------------------------------------------
                                    105 	.area HOME    (CODE)
                                    106 	.area HOME    (CODE)
                                    107 ;--------------------------------------------------------
                                    108 ; code
                                    109 ;--------------------------------------------------------
                                    110 	.area CSEG    (CODE)
                                    111 ;------------------------------------------------------------
                                    112 ;Allocation info for local variables in function 'bsearch'
                                    113 ;------------------------------------------------------------
                                    114 ;sloc0                     Allocated with name '_bsearch_sloc0_1_0'
                                    115 ;sloc1                     Allocated with name '_bsearch_sloc1_1_0'
                                    116 ;sloc2                     Allocated with name '_bsearch_sloc2_1_0'
                                    117 ;base                      Allocated with name '_bsearch_PARM_2'
                                    118 ;nmemb                     Allocated with name '_bsearch_PARM_3'
                                    119 ;size                      Allocated with name '_bsearch_PARM_4'
                                    120 ;compar                    Allocated with name '_bsearch_PARM_5'
                                    121 ;key                       Allocated with name '_bsearch_key_65536_39'
                                    122 ;left                      Allocated with name '_bsearch_left_131072_42'
                                    123 ;middle                    Allocated with name '_bsearch_middle_196608_43'
                                    124 ;c                         Allocated with name '_bsearch_c_196608_43'
                                    125 ;------------------------------------------------------------
                                    126 ;	bsearch.c:31: void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *) __reentrant)
                                    127 ;	-----------------------------------------
                                    128 ;	 function bsearch
                                    129 ;	-----------------------------------------
      000000                        130 _bsearch:
                           000007   131 	ar7 = 0x07
                           000006   132 	ar6 = 0x06
                           000005   133 	ar5 = 0x05
                           000004   134 	ar4 = 0x04
                           000003   135 	ar3 = 0x03
                           000002   136 	ar2 = 0x02
                           000001   137 	ar1 = 0x01
                           000000   138 	ar0 = 0x00
      000000 AF F0            [24]  139 	mov	r7,b
      000002 AE 83            [24]  140 	mov	r6,dph
      000004 E5 82            [12]  141 	mov	a,dpl
      000006 90r00r09         [24]  142 	mov	dptr,#_bsearch_key_65536_39
      000009 F0               [24]  143 	movx	@dptr,a
      00000A EE               [12]  144 	mov	a,r6
      00000B A3               [24]  145 	inc	dptr
      00000C F0               [24]  146 	movx	@dptr,a
      00000D EF               [12]  147 	mov	a,r7
      00000E A3               [24]  148 	inc	dptr
      00000F F0               [24]  149 	movx	@dptr,a
                                    150 ;	bsearch.c:33: for(const char *left = base; nmemb;)
      000010 90r00r00         [24]  151 	mov	dptr,#_bsearch_PARM_2
      000013 E0               [24]  152 	movx	a,@dptr
      000014 FD               [12]  153 	mov	r5,a
      000015 A3               [24]  154 	inc	dptr
      000016 E0               [24]  155 	movx	a,@dptr
      000017 FE               [12]  156 	mov	r6,a
      000018 A3               [24]  157 	inc	dptr
      000019 E0               [24]  158 	movx	a,@dptr
      00001A FF               [12]  159 	mov	r7,a
      00001B 90r00r0C         [24]  160 	mov	dptr,#_bsearch_left_131072_42
      00001E ED               [12]  161 	mov	a,r5
      00001F F0               [24]  162 	movx	@dptr,a
      000020 EE               [12]  163 	mov	a,r6
      000021 A3               [24]  164 	inc	dptr
      000022 F0               [24]  165 	movx	@dptr,a
      000023 EF               [12]  166 	mov	a,r7
      000024 A3               [24]  167 	inc	dptr
      000025 F0               [24]  168 	movx	@dptr,a
      000026                        169 00109$:
      000026 90r00r03         [24]  170 	mov	dptr,#_bsearch_PARM_3
      000029 E0               [24]  171 	movx	a,@dptr
      00002A FE               [12]  172 	mov	r6,a
      00002B A3               [24]  173 	inc	dptr
      00002C E0               [24]  174 	movx	a,@dptr
      00002D FF               [12]  175 	mov	r7,a
      00002E 4E               [12]  176 	orl	a,r6
      00002F 70 03            [24]  177 	jnz	00129$
      000031 02r01r3C         [24]  178 	ljmp	00107$
      000034                        179 00129$:
                                    180 ;	bsearch.c:35: const char *middle = left + nmemb / 2 * size;
      000034 8E 04            [24]  181 	mov	ar4,r6
      000036 EF               [12]  182 	mov	a,r7
      000037 C3               [12]  183 	clr	c
      000038 13               [12]  184 	rrc	a
      000039 CC               [12]  185 	xch	a,r4
      00003A 13               [12]  186 	rrc	a
      00003B CC               [12]  187 	xch	a,r4
      00003C FD               [12]  188 	mov	r5,a
      00003D 90r00r05         [24]  189 	mov	dptr,#_bsearch_PARM_4
      000040 E0               [24]  190 	movx	a,@dptr
      000041 FA               [12]  191 	mov	r2,a
      000042 A3               [24]  192 	inc	dptr
      000043 E0               [24]  193 	movx	a,@dptr
      000044 FB               [12]  194 	mov	r3,a
      000045 90r00r00         [24]  195 	mov	dptr,#__mulint_PARM_2
      000048 EA               [12]  196 	mov	a,r2
      000049 F0               [24]  197 	movx	@dptr,a
      00004A EB               [12]  198 	mov	a,r3
      00004B A3               [24]  199 	inc	dptr
      00004C F0               [24]  200 	movx	@dptr,a
      00004D 8C 82            [24]  201 	mov	dpl,r4
      00004F 8D 83            [24]  202 	mov	dph,r5
      000051 C0 07            [24]  203 	push	ar7
      000053 C0 06            [24]  204 	push	ar6
      000055 C0 05            [24]  205 	push	ar5
      000057 C0 04            [24]  206 	push	ar4
      000059 C0 03            [24]  207 	push	ar3
      00005B C0 02            [24]  208 	push	ar2
      00005D 12r00r00         [24]  209 	lcall	__mulint
      000060 85 82*00         [24]  210 	mov	_bsearch_sloc0_1_0,dpl
      000063 85 83*01         [24]  211 	mov	(_bsearch_sloc0_1_0 + 1),dph
      000066 D0 02            [24]  212 	pop	ar2
      000068 D0 03            [24]  213 	pop	ar3
      00006A D0 04            [24]  214 	pop	ar4
      00006C D0 05            [24]  215 	pop	ar5
      00006E D0 06            [24]  216 	pop	ar6
      000070 D0 07            [24]  217 	pop	ar7
      000072 C0 06            [24]  218 	push	ar6
      000074 C0 07            [24]  219 	push	ar7
      000076 90r00r0C         [24]  220 	mov	dptr,#_bsearch_left_131072_42
      000079 E0               [24]  221 	movx	a,@dptr
      00007A F9               [12]  222 	mov	r1,a
      00007B A3               [24]  223 	inc	dptr
      00007C E0               [24]  224 	movx	a,@dptr
      00007D FE               [12]  225 	mov	r6,a
      00007E A3               [24]  226 	inc	dptr
      00007F E0               [24]  227 	movx	a,@dptr
      000080 FF               [12]  228 	mov	r7,a
      000081 E5*00            [12]  229 	mov	a,_bsearch_sloc0_1_0
      000083 29               [12]  230 	add	a,r1
      000084 F5*02            [12]  231 	mov	_bsearch_sloc1_1_0,a
      000086 E5*01            [12]  232 	mov	a,(_bsearch_sloc0_1_0 + 1)
      000088 3E               [12]  233 	addc	a,r6
      000089 F5*03            [12]  234 	mov	(_bsearch_sloc1_1_0 + 1),a
      00008B 8F*04            [24]  235 	mov	(_bsearch_sloc1_1_0 + 2),r7
                                    236 ;	bsearch.c:36: int c = (*compar)(key, middle);
      00008D A9*02            [24]  237 	mov	r1,_bsearch_sloc1_1_0
      00008F AE*03            [24]  238 	mov	r6,(_bsearch_sloc1_1_0 + 1)
      000091 AF*04            [24]  239 	mov	r7,(_bsearch_sloc1_1_0 + 2)
      000093 89*05            [24]  240 	mov	_bsearch_sloc2_1_0,r1
      000095 8E*06            [24]  241 	mov	(_bsearch_sloc2_1_0 + 1),r6
      000097 8F*07            [24]  242 	mov	(_bsearch_sloc2_1_0 + 2),r7
      000099 90r00r09         [24]  243 	mov	dptr,#_bsearch_key_65536_39
      00009C E0               [24]  244 	movx	a,@dptr
      00009D F8               [12]  245 	mov	r0,a
      00009E A3               [24]  246 	inc	dptr
      00009F E0               [24]  247 	movx	a,@dptr
      0000A0 FE               [12]  248 	mov	r6,a
      0000A1 A3               [24]  249 	inc	dptr
      0000A2 E0               [24]  250 	movx	a,@dptr
      0000A3 FF               [12]  251 	mov	r7,a
      0000A4 C0 07            [24]  252 	push	ar7
      0000A6 C0 06            [24]  253 	push	ar6
      0000A8 C0 05            [24]  254 	push	ar5
      0000AA C0 04            [24]  255 	push	ar4
      0000AC C0 03            [24]  256 	push	ar3
      0000AE C0 02            [24]  257 	push	ar2
      0000B0 C0*05            [24]  258 	push	_bsearch_sloc2_1_0
      0000B2 C0*06            [24]  259 	push	(_bsearch_sloc2_1_0 + 1)
      0000B4 C0*07            [24]  260 	push	(_bsearch_sloc2_1_0 + 2)
      0000B6 12r00rBB         [24]  261 	lcall	00130$
      0000B9 80 11            [24]  262 	sjmp	00131$
      0000BB                        263 00130$:
      0000BB 90r00r07         [24]  264 	mov	dptr,#_bsearch_PARM_5
      0000BE E0               [24]  265 	movx	a,@dptr
      0000BF C0 E0            [24]  266 	push	acc
      0000C1 A3               [24]  267 	inc	dptr
      0000C2 E0               [24]  268 	movx	a,@dptr
      0000C3 C0 E0            [24]  269 	push	acc
      0000C5 88 82            [24]  270 	mov	dpl,r0
      0000C7 8E 83            [24]  271 	mov	dph,r6
      0000C9 8F F0            [24]  272 	mov	b,r7
      0000CB 22               [24]  273 	ret
      0000CC                        274 00131$:
      0000CC 85 82*05         [24]  275 	mov	_bsearch_sloc2_1_0,dpl
      0000CF 85 83*06         [24]  276 	mov	(_bsearch_sloc2_1_0 + 1),dph
      0000D2 15 81            [12]  277 	dec	sp
      0000D4 15 81            [12]  278 	dec	sp
      0000D6 15 81            [12]  279 	dec	sp
      0000D8 D0 02            [24]  280 	pop	ar2
      0000DA D0 03            [24]  281 	pop	ar3
      0000DC D0 04            [24]  282 	pop	ar4
      0000DE D0 05            [24]  283 	pop	ar5
      0000E0 D0 06            [24]  284 	pop	ar6
      0000E2 D0 07            [24]  285 	pop	ar7
                                    286 ;	bsearch.c:38: if(c < 0)
      0000E4 E5*06            [12]  287 	mov	a,(_bsearch_sloc2_1_0 + 1)
      0000E6 D0 07            [24]  288 	pop	ar7
      0000E8 D0 06            [24]  289 	pop	ar6
      0000EA 30 E7 0B         [24]  290 	jnb	acc.7,00105$
                                    291 ;	bsearch.c:39: nmemb = nmemb / 2;	
      0000ED 90r00r03         [24]  292 	mov	dptr,#_bsearch_PARM_3
      0000F0 EC               [12]  293 	mov	a,r4
      0000F1 F0               [24]  294 	movx	@dptr,a
      0000F2 ED               [12]  295 	mov	a,r5
      0000F3 A3               [24]  296 	inc	dptr
      0000F4 F0               [24]  297 	movx	@dptr,a
      0000F5 02r00r26         [24]  298 	ljmp	00109$
      0000F8                        299 00105$:
                                    300 ;	bsearch.c:40: else if(c > 0)
      0000F8 C3               [12]  301 	clr	c
      0000F9 E4               [12]  302 	clr	a
      0000FA 95*05            [12]  303 	subb	a,_bsearch_sloc2_1_0
      0000FC 74 80            [12]  304 	mov	a,#(0x00 ^ 0x80)
      0000FE 85*06 F0         [24]  305 	mov	b,(_bsearch_sloc2_1_0 + 1)
      000101 63 F0 80         [24]  306 	xrl	b,#0x80
      000104 95 F0            [12]  307 	subb	a,b
      000106 50 27            [24]  308 	jnc	00102$
                                    309 ;	bsearch.c:42: left = middle + size;
      000108 90r00r0C         [24]  310 	mov	dptr,#_bsearch_left_131072_42
      00010B EA               [12]  311 	mov	a,r2
      00010C 25*02            [12]  312 	add	a,_bsearch_sloc1_1_0
      00010E F0               [24]  313 	movx	@dptr,a
      00010F EB               [12]  314 	mov	a,r3
      000110 35*03            [12]  315 	addc	a,(_bsearch_sloc1_1_0 + 1)
      000112 A3               [24]  316 	inc	dptr
      000113 F0               [24]  317 	movx	@dptr,a
      000114 E5*04            [12]  318 	mov	a,(_bsearch_sloc1_1_0 + 2)
      000116 A3               [24]  319 	inc	dptr
      000117 F0               [24]  320 	movx	@dptr,a
                                    321 ;	bsearch.c:43: nmemb = (nmemb - 1) / 2;
      000118 1E               [12]  322 	dec	r6
      000119 BE FF 01         [24]  323 	cjne	r6,#0xff,00134$
      00011C 1F               [12]  324 	dec	r7
      00011D                        325 00134$:
      00011D EF               [12]  326 	mov	a,r7
      00011E C3               [12]  327 	clr	c
      00011F 13               [12]  328 	rrc	a
      000120 CE               [12]  329 	xch	a,r6
      000121 13               [12]  330 	rrc	a
      000122 CE               [12]  331 	xch	a,r6
      000123 FF               [12]  332 	mov	r7,a
      000124 90r00r03         [24]  333 	mov	dptr,#_bsearch_PARM_3
      000127 EE               [12]  334 	mov	a,r6
      000128 F0               [24]  335 	movx	@dptr,a
      000129 EF               [12]  336 	mov	a,r7
      00012A A3               [24]  337 	inc	dptr
      00012B F0               [24]  338 	movx	@dptr,a
      00012C 02r00r26         [24]  339 	ljmp	00109$
      00012F                        340 00102$:
                                    341 ;	bsearch.c:46: return(middle);
      00012F AD*02            [24]  342 	mov	r5,_bsearch_sloc1_1_0
      000131 AE*03            [24]  343 	mov	r6,(_bsearch_sloc1_1_0 + 1)
      000133 AF*04            [24]  344 	mov	r7,(_bsearch_sloc1_1_0 + 2)
      000135 8D 82            [24]  345 	mov	dpl,r5
      000137 8E 83            [24]  346 	mov	dph,r6
      000139 8F F0            [24]  347 	mov	b,r7
      00013B 22               [24]  348 	ret
      00013C                        349 00107$:
                                    350 ;	bsearch.c:49: return(0);
      00013C 90 00 00         [24]  351 	mov	dptr,#0x0000
      00013F 75 F0 00         [24]  352 	mov	b,#0x00
                                    353 ;	bsearch.c:50: }
      000142 22               [24]  354 	ret
                                    355 	.area CSEG    (CODE)
                                    356 	.area CONST   (CODE)
                                    357 	.area XINIT   (CODE)
                                    358 	.area CABS    (ABS,CODE)
