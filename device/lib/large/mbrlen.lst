                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module mbrlen
                                      6 	.optsdcc -mmcs51 --model-large
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _mbrtowc
                                     12 	.globl _mbrlen_PARM_3
                                     13 	.globl _mbrlen_PARM_2
                                     14 	.globl _mbrlen
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
                                     34 ;--------------------------------------------------------
                                     35 ; overlayable items in internal ram
                                     36 ;--------------------------------------------------------
                                     37 ;--------------------------------------------------------
                                     38 ; indirectly addressable internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area ISEG    (DATA)
                                     41 ;--------------------------------------------------------
                                     42 ; absolute internal ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area IABS    (ABS,DATA)
                                     45 	.area IABS    (ABS,DATA)
                                     46 ;--------------------------------------------------------
                                     47 ; bit data
                                     48 ;--------------------------------------------------------
                                     49 	.area BSEG    (BIT)
                                     50 ;--------------------------------------------------------
                                     51 ; paged external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area PSEG    (PAG,XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; uninitialized external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XSEG    (XDATA)
      000000                         58 _mbrlen_PARM_2:
      000000                         59 	.ds 2
      000002                         60 _mbrlen_PARM_3:
      000002                         61 	.ds 3
      000005                         62 _mbrlen_s_65536_9:
      000005                         63 	.ds 3
      000008                         64 _mbrlen_sps_65536_10:
      000008                         65 	.ds 3
                                     66 ;--------------------------------------------------------
                                     67 ; absolute external ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area XABS    (ABS,XDATA)
                                     70 ;--------------------------------------------------------
                                     71 ; initialized external ram data
                                     72 ;--------------------------------------------------------
                                     73 	.area XISEG   (XDATA)
                                     74 	.area HOME    (CODE)
                                     75 	.area GSINIT0 (CODE)
                                     76 	.area GSINIT1 (CODE)
                                     77 	.area GSINIT2 (CODE)
                                     78 	.area GSINIT3 (CODE)
                                     79 	.area GSINIT4 (CODE)
                                     80 	.area GSINIT5 (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 	.area GSFINAL (CODE)
                                     83 	.area CSEG    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; global & static initialisations
                                     86 ;--------------------------------------------------------
                                     87 	.area HOME    (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 	.area GSFINAL (CODE)
                                     90 	.area GSINIT  (CODE)
                                     91 ;--------------------------------------------------------
                                     92 ; Home
                                     93 ;--------------------------------------------------------
                                     94 	.area HOME    (CODE)
                                     95 	.area HOME    (CODE)
                                     96 ;--------------------------------------------------------
                                     97 ; code
                                     98 ;--------------------------------------------------------
                                     99 	.area CSEG    (CODE)
                                    100 ;------------------------------------------------------------
                                    101 ;Allocation info for local variables in function 'mbrlen'
                                    102 ;------------------------------------------------------------
                                    103 ;n                         Allocated with name '_mbrlen_PARM_2'
                                    104 ;ps                        Allocated with name '_mbrlen_PARM_3'
                                    105 ;s                         Allocated with name '_mbrlen_s_65536_9'
                                    106 ;sps                       Allocated with name '_mbrlen_sps_65536_10'
                                    107 ;------------------------------------------------------------
                                    108 ;	mbrlen.c:31: size_t mbrlen(const char *restrict s, size_t n, mbstate_t *restrict ps)
                                    109 ;	-----------------------------------------
                                    110 ;	 function mbrlen
                                    111 ;	-----------------------------------------
      000000                        112 _mbrlen:
                           000007   113 	ar7 = 0x07
                           000006   114 	ar6 = 0x06
                           000005   115 	ar5 = 0x05
                           000004   116 	ar4 = 0x04
                           000003   117 	ar3 = 0x03
                           000002   118 	ar2 = 0x02
                           000001   119 	ar1 = 0x01
                           000000   120 	ar0 = 0x00
      000000 AF F0            [24]  121 	mov	r7,b
      000002 AE 83            [24]  122 	mov	r6,dph
      000004 E5 82            [12]  123 	mov	a,dpl
      000006 90r00r05         [24]  124 	mov	dptr,#_mbrlen_s_65536_9
      000009 F0               [24]  125 	movx	@dptr,a
      00000A EE               [12]  126 	mov	a,r6
      00000B A3               [24]  127 	inc	dptr
      00000C F0               [24]  128 	movx	@dptr,a
      00000D EF               [12]  129 	mov	a,r7
      00000E A3               [24]  130 	inc	dptr
      00000F F0               [24]  131 	movx	@dptr,a
                                    132 ;	mbrlen.c:35: return(mbrtowc(0, s, n, ps ? ps : &sps));
      000010 90r00r05         [24]  133 	mov	dptr,#_mbrlen_s_65536_9
      000013 E0               [24]  134 	movx	a,@dptr
      000014 FD               [12]  135 	mov	r5,a
      000015 A3               [24]  136 	inc	dptr
      000016 E0               [24]  137 	movx	a,@dptr
      000017 FE               [12]  138 	mov	r6,a
      000018 A3               [24]  139 	inc	dptr
      000019 E0               [24]  140 	movx	a,@dptr
      00001A FF               [12]  141 	mov	r7,a
      00001B 90r00r00         [24]  142 	mov	dptr,#_mbrlen_PARM_2
      00001E E0               [24]  143 	movx	a,@dptr
      00001F FB               [12]  144 	mov	r3,a
      000020 A3               [24]  145 	inc	dptr
      000021 E0               [24]  146 	movx	a,@dptr
      000022 FC               [12]  147 	mov	r4,a
      000023 90r00r02         [24]  148 	mov	dptr,#_mbrlen_PARM_3
      000026 E0               [24]  149 	movx	a,@dptr
      000027 F8               [12]  150 	mov	r0,a
      000028 A3               [24]  151 	inc	dptr
      000029 E0               [24]  152 	movx	a,@dptr
      00002A F9               [12]  153 	mov	r1,a
      00002B A3               [24]  154 	inc	dptr
      00002C E0               [24]  155 	movx	a,@dptr
      00002D FA               [12]  156 	mov	r2,a
      00002E 90r00r02         [24]  157 	mov	dptr,#_mbrlen_PARM_3
      000031 E0               [24]  158 	movx	a,@dptr
      000032 F5 F0            [12]  159 	mov	b,a
      000034 A3               [24]  160 	inc	dptr
      000035 E0               [24]  161 	movx	a,@dptr
      000036 45 F0            [12]  162 	orl	a,b
      000038 60 02            [24]  163 	jz	00103$
      00003A 80 06            [24]  164 	sjmp	00104$
      00003C                        165 00103$:
      00003C 78r08            [12]  166 	mov	r0,#_mbrlen_sps_65536_10
      00003E 79s00            [12]  167 	mov	r1,#(_mbrlen_sps_65536_10 >> 8)
      000040 7A 00            [12]  168 	mov	r2,#0x00
      000042                        169 00104$:
      000042 90r00r00         [24]  170 	mov	dptr,#_mbrtowc_PARM_2
      000045 ED               [12]  171 	mov	a,r5
      000046 F0               [24]  172 	movx	@dptr,a
      000047 EE               [12]  173 	mov	a,r6
      000048 A3               [24]  174 	inc	dptr
      000049 F0               [24]  175 	movx	@dptr,a
      00004A EF               [12]  176 	mov	a,r7
      00004B A3               [24]  177 	inc	dptr
      00004C F0               [24]  178 	movx	@dptr,a
      00004D 90r00r00         [24]  179 	mov	dptr,#_mbrtowc_PARM_3
      000050 EB               [12]  180 	mov	a,r3
      000051 F0               [24]  181 	movx	@dptr,a
      000052 EC               [12]  182 	mov	a,r4
      000053 A3               [24]  183 	inc	dptr
      000054 F0               [24]  184 	movx	@dptr,a
      000055 90r00r00         [24]  185 	mov	dptr,#_mbrtowc_PARM_4
      000058 E8               [12]  186 	mov	a,r0
      000059 F0               [24]  187 	movx	@dptr,a
      00005A E9               [12]  188 	mov	a,r1
      00005B A3               [24]  189 	inc	dptr
      00005C F0               [24]  190 	movx	@dptr,a
      00005D EA               [12]  191 	mov	a,r2
      00005E A3               [24]  192 	inc	dptr
      00005F F0               [24]  193 	movx	@dptr,a
      000060 90 00 00         [24]  194 	mov	dptr,#0x0000
      000063 75 F0 00         [24]  195 	mov	b,#0x00
                                    196 ;	mbrlen.c:36: }
      000066 02r00r00         [24]  197 	ljmp	_mbrtowc
                                    198 	.area CSEG    (CODE)
                                    199 	.area CONST   (CODE)
                                    200 	.area XINIT   (CODE)
                                    201 	.area CABS    (ABS,CODE)
