                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module powf
                                      6 	.optsdcc -mmcs51 --model-large
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _logf
                                     12 	.globl _expf
                                     13 	.globl _powf_PARM_2
                                     14 	.globl _powf
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
                                     34 ;--------------------------------------------------------
                                     35 ; overlayable items in internal ram
                                     36 ;--------------------------------------------------------
                                     37 ;--------------------------------------------------------
                                     38 ; indirectly addressable internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area ISEG    (DATA)
                                     41 ;--------------------------------------------------------
                                     42 ; absolute internal ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area IABS    (ABS,DATA)
                                     45 	.area IABS    (ABS,DATA)
                                     46 ;--------------------------------------------------------
                                     47 ; bit data
                                     48 ;--------------------------------------------------------
                                     49 	.area BSEG    (BIT)
      000000                         50 _powf_sloc0_1_0:
      000000                         51 	.ds 1
                                     52 ;--------------------------------------------------------
                                     53 ; paged external ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area PSEG    (PAG,XDATA)
                                     56 ;--------------------------------------------------------
                                     57 ; uninitialized external ram data
                                     58 ;--------------------------------------------------------
                                     59 	.area XSEG    (XDATA)
      000000                         60 _powf_PARM_2:
      000000                         61 	.ds 4
      000004                         62 _powf_x_65536_25:
      000004                         63 	.ds 4
                                     64 ;--------------------------------------------------------
                                     65 ; absolute external ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area XABS    (ABS,XDATA)
                                     68 ;--------------------------------------------------------
                                     69 ; initialized external ram data
                                     70 ;--------------------------------------------------------
                                     71 	.area XISEG   (XDATA)
                                     72 	.area HOME    (CODE)
                                     73 	.area GSINIT0 (CODE)
                                     74 	.area GSINIT1 (CODE)
                                     75 	.area GSINIT2 (CODE)
                                     76 	.area GSINIT3 (CODE)
                                     77 	.area GSINIT4 (CODE)
                                     78 	.area GSINIT5 (CODE)
                                     79 	.area GSINIT  (CODE)
                                     80 	.area GSFINAL (CODE)
                                     81 	.area CSEG    (CODE)
                                     82 ;--------------------------------------------------------
                                     83 ; global & static initialisations
                                     84 ;--------------------------------------------------------
                                     85 	.area HOME    (CODE)
                                     86 	.area GSINIT  (CODE)
                                     87 	.area GSFINAL (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 ;--------------------------------------------------------
                                     90 ; Home
                                     91 ;--------------------------------------------------------
                                     92 	.area HOME    (CODE)
                                     93 	.area HOME    (CODE)
                                     94 ;--------------------------------------------------------
                                     95 ; code
                                     96 ;--------------------------------------------------------
                                     97 	.area CSEG    (CODE)
                                     98 ;------------------------------------------------------------
                                     99 ;Allocation info for local variables in function 'powf'
                                    100 ;------------------------------------------------------------
                                    101 ;y                         Allocated with name '_powf_PARM_2'
                                    102 ;x                         Allocated with name '_powf_x_65536_25'
                                    103 ;------------------------------------------------------------
                                    104 ;	powf.c:35: float powf(float x, float y)
                                    105 ;	-----------------------------------------
                                    106 ;	 function powf
                                    107 ;	-----------------------------------------
      000000                        108 _powf:
                           000007   109 	ar7 = 0x07
                           000006   110 	ar6 = 0x06
                           000005   111 	ar5 = 0x05
                           000004   112 	ar4 = 0x04
                           000003   113 	ar3 = 0x03
                           000002   114 	ar2 = 0x02
                           000001   115 	ar1 = 0x01
                           000000   116 	ar0 = 0x00
      000000 AF 82            [24]  117 	mov	r7,dpl
      000002 AE 83            [24]  118 	mov	r6,dph
      000004 AD F0            [24]  119 	mov	r5,b
      000006 FC               [12]  120 	mov	r4,a
      000007 90r00r04         [24]  121 	mov	dptr,#_powf_x_65536_25
      00000A EF               [12]  122 	mov	a,r7
      00000B F0               [24]  123 	movx	@dptr,a
      00000C EE               [12]  124 	mov	a,r6
      00000D A3               [24]  125 	inc	dptr
      00000E F0               [24]  126 	movx	@dptr,a
      00000F ED               [12]  127 	mov	a,r5
      000010 A3               [24]  128 	inc	dptr
      000011 F0               [24]  129 	movx	@dptr,a
      000012 EC               [12]  130 	mov	a,r4
      000013 A3               [24]  131 	inc	dptr
      000014 F0               [24]  132 	movx	@dptr,a
                                    133 ;	powf.c:37: if(y == 0.0) return 1.0;
      000015 90r00r00         [24]  134 	mov	dptr,#_powf_PARM_2
      000018 E0               [24]  135 	movx	a,@dptr
      000019 FC               [12]  136 	mov	r4,a
      00001A A3               [24]  137 	inc	dptr
      00001B E0               [24]  138 	movx	a,@dptr
      00001C FD               [12]  139 	mov	r5,a
      00001D A3               [24]  140 	inc	dptr
      00001E E0               [24]  141 	movx	a,@dptr
      00001F FE               [12]  142 	mov	r6,a
      000020 A3               [24]  143 	inc	dptr
      000021 E0               [24]  144 	movx	a,@dptr
      000022 FF               [12]  145 	mov	r7,a
      000023 8C F0            [24]  146 	mov	b,r4
      000025 ED               [12]  147 	mov	a,r5
      000026 42 F0            [12]  148 	orl	b,a
      000028 EE               [12]  149 	mov	a,r6
      000029 42 F0            [12]  150 	orl	b,a
      00002B EF               [12]  151 	mov	a,r7
      00002C 54 7F            [12]  152 	anl	a,#0x7F
      00002E 45 F0            [12]  153 	orl	a,b
      000030 70 09            [24]  154 	jnz	00102$
      000032 90 00 00         [24]  155 	mov	dptr,#0x0000
      000035 75 F0 80         [24]  156 	mov	b,#0x80
      000038 74 3F            [12]  157 	mov	a,#0x3f
      00003A 22               [24]  158 	ret
      00003B                        159 00102$:
                                    160 ;	powf.c:38: if(y == 1.0) return x;
      00003B C0 07            [24]  161 	push	ar7
      00003D C0 06            [24]  162 	push	ar6
      00003F C0 05            [24]  163 	push	ar5
      000041 C0 04            [24]  164 	push	ar4
      000043 E4               [12]  165 	clr	a
      000044 C0 E0            [24]  166 	push	acc
      000046 C0 E0            [24]  167 	push	acc
      000048 74 80            [12]  168 	mov	a,#0x80
      00004A C0 E0            [24]  169 	push	acc
      00004C 74 3F            [12]  170 	mov	a,#0x3f
      00004E C0 E0            [24]  171 	push	acc
      000050 8C 82            [24]  172 	mov	dpl,r4
      000052 8D 83            [24]  173 	mov	dph,r5
      000054 8E F0            [24]  174 	mov	b,r6
      000056 EF               [12]  175 	mov	a,r7
      000057 12r00r00         [24]  176 	lcall	___fseq
      00005A AB 82            [24]  177 	mov	r3,dpl
      00005C E5 81            [12]  178 	mov	a,sp
      00005E 24 FC            [12]  179 	add	a,#0xfc
      000060 F5 81            [12]  180 	mov	sp,a
      000062 D0 04            [24]  181 	pop	ar4
      000064 D0 05            [24]  182 	pop	ar5
      000066 D0 06            [24]  183 	pop	ar6
      000068 D0 07            [24]  184 	pop	ar7
      00006A EB               [12]  185 	mov	a,r3
      00006B 60 14            [24]  186 	jz	00104$
      00006D 90r00r04         [24]  187 	mov	dptr,#_powf_x_65536_25
      000070 E0               [24]  188 	movx	a,@dptr
      000071 F8               [12]  189 	mov	r0,a
      000072 A3               [24]  190 	inc	dptr
      000073 E0               [24]  191 	movx	a,@dptr
      000074 F9               [12]  192 	mov	r1,a
      000075 A3               [24]  193 	inc	dptr
      000076 E0               [24]  194 	movx	a,@dptr
      000077 FA               [12]  195 	mov	r2,a
      000078 A3               [24]  196 	inc	dptr
      000079 E0               [24]  197 	movx	a,@dptr
      00007A 88 82            [24]  198 	mov	dpl,r0
      00007C 89 83            [24]  199 	mov	dph,r1
      00007E 8A F0            [24]  200 	mov	b,r2
      000080 22               [24]  201 	ret
      000081                        202 00104$:
                                    203 ;	powf.c:39: if(x <= 0.0) return 0.0;
      000081 90r00r04         [24]  204 	mov	dptr,#_powf_x_65536_25
      000084 E0               [24]  205 	movx	a,@dptr
      000085 F8               [12]  206 	mov	r0,a
      000086 A3               [24]  207 	inc	dptr
      000087 E0               [24]  208 	movx	a,@dptr
      000088 F9               [12]  209 	mov	r1,a
      000089 A3               [24]  210 	inc	dptr
      00008A E0               [24]  211 	movx	a,@dptr
      00008B FA               [12]  212 	mov	r2,a
      00008C A3               [24]  213 	inc	dptr
      00008D E0               [24]  214 	movx	a,@dptr
      00008E FB               [12]  215 	mov	r3,a
      00008F C0 07            [24]  216 	push	ar7
      000091 C0 06            [24]  217 	push	ar6
      000093 C0 05            [24]  218 	push	ar5
      000095 C0 04            [24]  219 	push	ar4
      000097 C0 03            [24]  220 	push	ar3
      000099 C0 02            [24]  221 	push	ar2
      00009B C0 01            [24]  222 	push	ar1
      00009D C0 00            [24]  223 	push	ar0
      00009F C0 00            [24]  224 	push	ar0
      0000A1 C0 01            [24]  225 	push	ar1
      0000A3 C0 02            [24]  226 	push	ar2
      0000A5 C0 03            [24]  227 	push	ar3
      0000A7 90 00 00         [24]  228 	mov	dptr,#(0x00&0x00ff)
      0000AA E4               [12]  229 	clr	a
      0000AB F5 F0            [12]  230 	mov	b,a
      0000AD 12r00r00         [24]  231 	lcall	___fslt
      0000B0 E5 81            [12]  232 	mov	a,sp
      0000B2 24 FC            [12]  233 	add	a,#0xfc
      0000B4 F5 81            [12]  234 	mov	sp,a
      0000B6 D0 00            [24]  235 	pop	ar0
      0000B8 D0 01            [24]  236 	pop	ar1
      0000BA D0 02            [24]  237 	pop	ar2
      0000BC D0 03            [24]  238 	pop	ar3
      0000BE D0 04            [24]  239 	pop	ar4
      0000C0 D0 05            [24]  240 	pop	ar5
      0000C2 D0 06            [24]  241 	pop	ar6
      0000C4 D0 07            [24]  242 	pop	ar7
      0000C6 E5 82            [12]  243 	mov	a,dpl
      0000C8 24 FF            [12]  244 	add	a,#0xff
      0000CA 92*00            [24]  245 	mov	_powf_sloc0_1_0,c
      0000CC 40 07            [24]  246 	jc	00106$
      0000CE 90 00 00         [24]  247 	mov	dptr,#(0x00&0x00ff)
      0000D1 E4               [12]  248 	clr	a
      0000D2 F5 F0            [12]  249 	mov	b,a
      0000D4 22               [24]  250 	ret
      0000D5                        251 00106$:
                                    252 ;	powf.c:40: return expf(logf(x) * y);
      0000D5 88 82            [24]  253 	mov	dpl,r0
      0000D7 89 83            [24]  254 	mov	dph,r1
      0000D9 8A F0            [24]  255 	mov	b,r2
      0000DB EB               [12]  256 	mov	a,r3
      0000DC C0 07            [24]  257 	push	ar7
      0000DE C0 06            [24]  258 	push	ar6
      0000E0 C0 05            [24]  259 	push	ar5
      0000E2 C0 04            [24]  260 	push	ar4
      0000E4 12r00r00         [24]  261 	lcall	_logf
      0000E7 A8 82            [24]  262 	mov	r0,dpl
      0000E9 A9 83            [24]  263 	mov	r1,dph
      0000EB AA F0            [24]  264 	mov	r2,b
      0000ED FB               [12]  265 	mov	r3,a
      0000EE D0 04            [24]  266 	pop	ar4
      0000F0 D0 05            [24]  267 	pop	ar5
      0000F2 D0 06            [24]  268 	pop	ar6
      0000F4 D0 07            [24]  269 	pop	ar7
      0000F6 C0 04            [24]  270 	push	ar4
      0000F8 C0 05            [24]  271 	push	ar5
      0000FA C0 06            [24]  272 	push	ar6
      0000FC C0 07            [24]  273 	push	ar7
      0000FE 88 82            [24]  274 	mov	dpl,r0
      000100 89 83            [24]  275 	mov	dph,r1
      000102 8A F0            [24]  276 	mov	b,r2
      000104 EB               [12]  277 	mov	a,r3
      000105 12r00r00         [24]  278 	lcall	___fsmul
      000108 AC 82            [24]  279 	mov	r4,dpl
      00010A AD 83            [24]  280 	mov	r5,dph
      00010C AE F0            [24]  281 	mov	r6,b
      00010E FF               [12]  282 	mov	r7,a
      00010F E5 81            [12]  283 	mov	a,sp
      000111 24 FC            [12]  284 	add	a,#0xfc
      000113 F5 81            [12]  285 	mov	sp,a
      000115 8C 82            [24]  286 	mov	dpl,r4
      000117 8D 83            [24]  287 	mov	dph,r5
      000119 8E F0            [24]  288 	mov	b,r6
      00011B EF               [12]  289 	mov	a,r7
                                    290 ;	powf.c:41: }
      00011C 02r00r00         [24]  291 	ljmp	_expf
                                    292 	.area CSEG    (CODE)
                                    293 	.area CONST   (CODE)
                                    294 	.area XINIT   (CODE)
                                    295 	.area CABS    (ABS,CODE)
