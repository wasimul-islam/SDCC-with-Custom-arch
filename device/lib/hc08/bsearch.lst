                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module bsearch
                              6 	.optsdcc -mhc08
                              7 	
                              8 	.area HOME    (CODE)
                              9 	.area GSINIT0 (CODE)
                             10 	.area GSINIT  (CODE)
                             11 	.area GSFINAL (CODE)
                             12 	.area CSEG    (CODE)
                             13 	.area XINIT   (CODE)
                             14 	.area CONST   (CODE)
                             15 	.area DSEG    (PAG)
                             16 	.area OSEG    (PAG, OVR)
                             17 	.area XSEG
                             18 	.area XISEG
                             19 ;--------------------------------------------------------
                             20 ; Public variables in this module
                             21 ;--------------------------------------------------------
                             22 	.globl _bsearch_PARM_5
                             23 	.globl _bsearch_PARM_4
                             24 	.globl _bsearch_PARM_3
                             25 	.globl _bsearch_PARM_2
                             26 	.globl _bsearch
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area DSEG    (PAG)
   0000                      31 _bsearch_sloc0_1_0:
   0000                      32 	.ds 2
                             33 ;--------------------------------------------------------
                             34 ; overlayable items in ram
                             35 ;--------------------------------------------------------
                             36 ;--------------------------------------------------------
                             37 ; absolute ram data
                             38 ;--------------------------------------------------------
                             39 	.area IABS    (ABS)
                             40 	.area IABS    (ABS)
                             41 ;--------------------------------------------------------
                             42 ; absolute external ram data
                             43 ;--------------------------------------------------------
                             44 	.area XABS    (ABS)
                             45 ;--------------------------------------------------------
                             46 ; initialized external ram data
                             47 ;--------------------------------------------------------
                             48 	.area XISEG
                             49 ;--------------------------------------------------------
                             50 ; extended address mode data
                             51 ;--------------------------------------------------------
                             52 	.area XSEG
   0000                      53 _bsearch_PARM_2:
   0000                      54 	.ds 2
   0002                      55 _bsearch_PARM_3:
   0002                      56 	.ds 2
   0004                      57 _bsearch_PARM_4:
   0004                      58 	.ds 2
   0006                      59 _bsearch_PARM_5:
   0006                      60 	.ds 2
   0008                      61 _bsearch_key_65536_36:
   0008                      62 	.ds 2
   000A                      63 _bsearch_left_131072_39:
   000A                      64 	.ds 2
   000C                      65 _bsearch_middle_196608_40:
   000C                      66 	.ds 2
   000E                      67 _bsearch_c_196608_40:
   000E                      68 	.ds 2
                             69 ;--------------------------------------------------------
                             70 ; global & static initialisations
                             71 ;--------------------------------------------------------
                             72 	.area HOME    (CODE)
                             73 	.area GSINIT  (CODE)
                             74 	.area GSFINAL (CODE)
                             75 	.area GSINIT  (CODE)
                             76 ;--------------------------------------------------------
                             77 ; Home
                             78 ;--------------------------------------------------------
                             79 	.area HOME    (CODE)
                             80 	.area HOME    (CODE)
                             81 ;--------------------------------------------------------
                             82 ; code
                             83 ;--------------------------------------------------------
                             84 	.area CSEG    (CODE)
                             85 ;------------------------------------------------------------
                             86 ;Allocation info for local variables in function 'bsearch'
                             87 ;------------------------------------------------------------
                             88 ;sloc0                     Allocated with name '_bsearch_sloc0_1_0'
                             89 ;base                      Allocated with name '_bsearch_PARM_2'
                             90 ;nmemb                     Allocated with name '_bsearch_PARM_3'
                             91 ;size                      Allocated with name '_bsearch_PARM_4'
                             92 ;compar                    Allocated with name '_bsearch_PARM_5'
                             93 ;key                       Allocated with name '_bsearch_key_65536_36'
                             94 ;left                      Allocated with name '_bsearch_left_131072_39'
                             95 ;middle                    Allocated with name '_bsearch_middle_196608_40'
                             96 ;c                         Allocated with name '_bsearch_c_196608_40'
                             97 ;------------------------------------------------------------
                             98 ;../bsearch.c:31: void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *) __reentrant)
                             99 ;	-----------------------------------------
                            100 ;	 function bsearch
                            101 ;	-----------------------------------------
                            102 ;	Register assignment is optimal.
                            103 ;	Stack space usage: 0 bytes.
   0000                     104 _bsearch:
   0000 C7r00r09      [ 4]  105 	sta	(_bsearch_key_65536_36 + 1)
   0003 CFr00r08      [ 4]  106 	stx	_bsearch_key_65536_36
                            107 ;../bsearch.c:33: for(const char *left = base; nmemb;)
   0006 C6r00r01      [ 4]  108 	lda	(_bsearch_PARM_2 + 1)
   0009 C7r00r0B      [ 4]  109 	sta	(_bsearch_left_131072_39 + 1)
   000C C6r00r00      [ 4]  110 	lda	_bsearch_PARM_2
   000F C7r00r0A      [ 4]  111 	sta	_bsearch_left_131072_39
   0012                     112 00109$:
   0012 C6r00r02      [ 4]  113 	lda	_bsearch_PARM_3
   0015 CAr00r03      [ 4]  114 	ora	(_bsearch_PARM_3 + 1)
   0018 26 03         [ 3]  115 	bne	00133$
   001A CCr00rBE      [ 3]  116 	jmp	00107$
   001D                     117 00133$:
                            118 ;../bsearch.c:35: const char *middle = left + nmemb / 2 * size;
   001D C6r00r03      [ 4]  119 	lda	(_bsearch_PARM_3 + 1)
   0020 CEr00r02      [ 4]  120 	ldx	_bsearch_PARM_3
   0023 54            [ 1]  121 	lsrx
   0024 46            [ 1]  122 	rora
   0025 B7*01         [ 3]  123 	sta	*(_bsearch_sloc0_1_0 + 1)
   0027 BF*00         [ 3]  124 	stx	*_bsearch_sloc0_1_0
   0029 C6r00r04      [ 4]  125 	lda	_bsearch_PARM_4
   002C C7r00r00      [ 4]  126 	sta	__mulint_PARM_2
   002F C6r00r05      [ 4]  127 	lda	(_bsearch_PARM_4 + 1)
   0032 C7r00r01      [ 4]  128 	sta	(__mulint_PARM_2 + 1)
   0035 B6*01         [ 3]  129 	lda	*(_bsearch_sloc0_1_0 + 1)
   0037 BE*00         [ 3]  130 	ldx	*_bsearch_sloc0_1_0
   0039 CDr00r00      [ 5]  131 	jsr	__mulint
   003C CBr00r0B      [ 4]  132 	add	(_bsearch_left_131072_39 + 1)
   003F C7r00r0D      [ 4]  133 	sta	(_bsearch_middle_196608_40 + 1)
   0042 9F            [ 1]  134 	txa
   0043 C9r00r0A      [ 4]  135 	adc	_bsearch_left_131072_39
   0046 C7r00r0C      [ 4]  136 	sta	_bsearch_middle_196608_40
                            137 ;../bsearch.c:36: int c = (*compar)(key, middle);
   0049 C6r00r0C      [ 4]  138 	lda	_bsearch_middle_196608_40
   004C 87            [ 2]  139 	psha
   004D 8A            [ 2]  140 	pulh
   004E CEr00r0D      [ 4]  141 	ldx	(_bsearch_middle_196608_40 + 1)
   0051 89            [ 2]  142 	pshx
   0052 8B            [ 2]  143 	pshh
   0053 89            [ 2]  144 	pshx
   0054 8B            [ 2]  145 	pshh
   0055 AD 02         [ 4]  146 	bsr	00135$
   0057 20 0F         [ 3]  147 	bra	00134$
   0059                     148 00135$:
   0059 C6r00r07      [ 4]  149 	lda	(_bsearch_PARM_5 + 1)
   005C 87            [ 2]  150 	psha
   005D C6r00r06      [ 4]  151 	lda	_bsearch_PARM_5
   0060 87            [ 2]  152 	psha
   0061 C6r00r09      [ 4]  153 	lda	(_bsearch_key_65536_36 + 1)
   0064 CEr00r08      [ 4]  154 	ldx	_bsearch_key_65536_36
   0067 81            [ 4]  155 	rts
   0068                     156 00134$:
   0068 C7r00r0F      [ 4]  157 	sta	(_bsearch_c_196608_40 + 1)
   006B CFr00r0E      [ 4]  158 	stx	_bsearch_c_196608_40
   006E A7 02         [ 2]  159 	ais	#2
   0070 8A            [ 2]  160 	pulh
   0071 88            [ 2]  161 	pulx
                            162 ;../bsearch.c:38: if(c < 0)
   0072 C6r00r0E      [ 4]  163 	lda	_bsearch_c_196608_40
   0075 A0 00         [ 2]  164 	sub	#0x00
   0077 90 0C         [ 3]  165 	bge	00105$
                            166 ;../bsearch.c:39: nmemb = nmemb / 2;	
   0079 B6*00         [ 3]  167 	lda	*_bsearch_sloc0_1_0
   007B C7r00r02      [ 4]  168 	sta	_bsearch_PARM_3
   007E B6*01         [ 3]  169 	lda	*(_bsearch_sloc0_1_0 + 1)
   0080 C7r00r03      [ 4]  170 	sta	(_bsearch_PARM_3 + 1)
   0083 20 8D         [ 3]  171 	bra	00109$
   0085                     172 00105$:
                            173 ;../bsearch.c:40: else if(c > 0)
   0085 4F            [ 1]  174 	clra
   0086 C0r00r0F      [ 4]  175 	sub	(_bsearch_c_196608_40 + 1)
   0089 4F            [ 1]  176 	clra
   008A C2r00r0E      [ 4]  177 	sbc	_bsearch_c_196608_40
   008D 90 2A         [ 3]  178 	bge	00102$
                            179 ;../bsearch.c:42: left = middle + size;
   008F 45r00r0A      [ 3]  180 	ldhx	#_bsearch_left_131072_39
   0092 C6r00r0D      [ 4]  181 	lda	(_bsearch_middle_196608_40 + 1)
   0095 CBr00r05      [ 4]  182 	add	(_bsearch_PARM_4 + 1)
   0098 E7 01         [ 3]  183 	sta	1,x
   009A C6r00r0C      [ 4]  184 	lda	_bsearch_middle_196608_40
   009D C9r00r04      [ 4]  185 	adc	_bsearch_PARM_4
   00A0 F7            [ 2]  186 	sta	,x
                            187 ;../bsearch.c:43: nmemb = (nmemb - 1) / 2;
   00A1 C6r00r03      [ 4]  188 	lda	(_bsearch_PARM_3 + 1)
   00A4 A0 01         [ 2]  189 	sub	#0x01
   00A6 87            [ 2]  190 	psha
   00A7 C6r00r02      [ 4]  191 	lda	_bsearch_PARM_3
   00AA A2 00         [ 2]  192 	sbc	#0x00
   00AC 97            [ 1]  193 	tax
   00AD 86            [ 2]  194 	pula
   00AE 54            [ 1]  195 	lsrx
   00AF 46            [ 1]  196 	rora
   00B0 C7r00r03      [ 4]  197 	sta	(_bsearch_PARM_3 + 1)
   00B3 CFr00r02      [ 4]  198 	stx	_bsearch_PARM_3
   00B6 CCr00r12      [ 3]  199 	jmp	00109$
   00B9                     200 00102$:
                            201 ;../bsearch.c:46: return(middle);
   00B9 89            [ 2]  202 	pshx
   00BA 8B            [ 2]  203 	pshh
   00BB 88            [ 2]  204 	pulx
   00BC 86            [ 2]  205 	pula
   00BD 81            [ 4]  206 	rts
   00BE                     207 00107$:
                            208 ;../bsearch.c:49: return(0);
   00BE 4F            [ 1]  209 	clra
   00BF 97            [ 1]  210 	tax
                            211 ;../bsearch.c:50: }
   00C0 81            [ 4]  212 	rts
                            213 	.area CSEG    (CODE)
                            214 	.area CONST   (CODE)
                            215 	.area XINIT   (CODE)
                            216 	.area CABS    (ABS,CODE)
