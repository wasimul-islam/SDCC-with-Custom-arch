                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ISO C Compiler 
                              3 ; Version 4.2.14 #0 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module calloc
                              6 	.optsdcc -mhc08
                              7 	
                              8 	.area HOME    (CODE)
                              9 	.area GSINIT0 (CODE)
                             10 	.area GSINIT  (CODE)
                             11 	.area GSFINAL (CODE)
                             12 	.area CSEG    (CODE)
                             13 	.area XINIT   (CODE)
                             14 	.area CONST   (CODE)
                             15 	.area DSEG    (PAG)
                             16 	.area OSEG    (PAG, OVR)
                             17 	.area XSEG
                             18 	.area XISEG
                             19 ;--------------------------------------------------------
                             20 ; Public variables in this module
                             21 ;--------------------------------------------------------
                             22 	.globl _memset
                             23 	.globl _malloc
                             24 	.globl _calloc_PARM_2
                             25 	.globl _calloc
                             26 ;--------------------------------------------------------
                             27 ; ram data
                             28 ;--------------------------------------------------------
                             29 	.area DSEG    (PAG)
   0000                      30 _calloc_sloc0_1_0:
   0000                      31 	.ds 4
                             32 ;--------------------------------------------------------
                             33 ; overlayable items in ram
                             34 ;--------------------------------------------------------
                             35 ;--------------------------------------------------------
                             36 ; absolute ram data
                             37 ;--------------------------------------------------------
                             38 	.area IABS    (ABS)
                             39 	.area IABS    (ABS)
                             40 ;--------------------------------------------------------
                             41 ; absolute external ram data
                             42 ;--------------------------------------------------------
                             43 	.area XABS    (ABS)
                             44 ;--------------------------------------------------------
                             45 ; initialized external ram data
                             46 ;--------------------------------------------------------
                             47 	.area XISEG
                             48 ;--------------------------------------------------------
                             49 ; extended address mode data
                             50 ;--------------------------------------------------------
                             51 	.area XSEG
   0000                      52 _calloc_PARM_2:
   0000                      53 	.ds 2
   0002                      54 _calloc_ptr_65536_62:
   0002                      55 	.ds 2
                             56 ;--------------------------------------------------------
                             57 ; global & static initialisations
                             58 ;--------------------------------------------------------
                             59 	.area HOME    (CODE)
                             60 	.area GSINIT  (CODE)
                             61 	.area GSFINAL (CODE)
                             62 	.area GSINIT  (CODE)
                             63 ;--------------------------------------------------------
                             64 ; Home
                             65 ;--------------------------------------------------------
                             66 	.area HOME    (CODE)
                             67 	.area HOME    (CODE)
                             68 ;--------------------------------------------------------
                             69 ; code
                             70 ;--------------------------------------------------------
                             71 	.area CSEG    (CODE)
                             72 ;------------------------------------------------------------
                             73 ;Allocation info for local variables in function 'calloc'
                             74 ;------------------------------------------------------------
                             75 ;sloc0                     Allocated with name '_calloc_sloc0_1_0'
                             76 ;size                      Allocated with name '_calloc_PARM_2'
                             77 ;nmemb                     Allocated to registers a x 
                             78 ;ptr                       Allocated with name '_calloc_ptr_65536_62'
                             79 ;msize                     Allocated with name '_calloc_msize_65536_62'
                             80 ;------------------------------------------------------------
                             81 ;../calloc.c:44: void *calloc (size_t nmemb, size_t size)
                             82 ;	-----------------------------------------
                             83 ;	 function calloc
                             84 ;	-----------------------------------------
                             85 ;	Register assignment is optimal.
                             86 ;	Stack space usage: 0 bytes.
   0000                      87 _calloc:
                             88 ;../calloc.c:49: unsigned long msize = (unsigned long)nmemb * (unsigned long)size;
   0000 C7r00r03      [ 4]   89 	sta	(__mullong_PARM_1 + 3)
   0003 CFr00r02      [ 4]   90 	stx	(__mullong_PARM_1 + 2)
   0006 87            [ 2]   91 	psha
   0007 4F            [ 1]   92 	clra
   0008 C7r00r01      [ 4]   93 	sta	(__mullong_PARM_1 + 1)
   000B 4F            [ 1]   94 	clra
   000C C7r00r00      [ 4]   95 	sta	__mullong_PARM_1
   000F 86            [ 2]   96 	pula
   0010 C6r00r01      [ 4]   97 	lda	(_calloc_PARM_2 + 1)
   0013 C7r00r03      [ 4]   98 	sta	(__mullong_PARM_2 + 3)
   0016 C6r00r00      [ 4]   99 	lda	_calloc_PARM_2
   0019 C7r00r02      [ 4]  100 	sta	(__mullong_PARM_2 + 2)
   001C 4F            [ 1]  101 	clra
   001D C7r00r01      [ 4]  102 	sta	(__mullong_PARM_2 + 1)
   0020 C7r00r00      [ 4]  103 	sta	__mullong_PARM_2
                            104 ;../calloc.c:54: if (msize > SIZE_MAX)
   0023 CDr00r00      [ 5]  105 	jsr	__mullong
   0026 B7*03         [ 3]  106 	sta	*(_calloc_sloc0_1_0 + 3)
   0028 BF*02         [ 3]  107 	stx	*(_calloc_sloc0_1_0 + 2)
   002A 4E*00*01      [ 5]  108 	mov	*___SDCC_hc08_ret2,*(_calloc_sloc0_1_0 + 1)
   002D 4E*00*00      [ 5]  109 	mov	*___SDCC_hc08_ret3,*_calloc_sloc0_1_0
   0030 A6 FF         [ 2]  110 	lda	#0xff
   0032 B0*03         [ 3]  111 	sub	*(_calloc_sloc0_1_0 + 3)
   0034 A6 FF         [ 2]  112 	lda	#0xff
   0036 B2*02         [ 3]  113 	sbc	*(_calloc_sloc0_1_0 + 2)
   0038 4F            [ 1]  114 	clra
   0039 B2*01         [ 3]  115 	sbc	*(_calloc_sloc0_1_0 + 1)
   003B 4F            [ 1]  116 	clra
   003C B2*00         [ 3]  117 	sbc	*_calloc_sloc0_1_0
   003E 24 03         [ 3]  118 	bcc	00102$
                            119 ;../calloc.c:55: return(0);
   0040 4F            [ 1]  120 	clra
   0041 97            [ 1]  121 	tax
   0042 81            [ 4]  122 	rts
   0043                     123 00102$:
                            124 ;../calloc.c:57: if (ptr = malloc(msize))
   0043 4E*03*01      [ 5]  125 	mov	*(_calloc_sloc0_1_0 + 3),*(_calloc_sloc0_1_0 + 1)
   0046 4E*02*00      [ 5]  126 	mov	*(_calloc_sloc0_1_0 + 2),*_calloc_sloc0_1_0
   0049 B6*01         [ 3]  127 	lda	*(_calloc_sloc0_1_0 + 1)
   004B BE*00         [ 3]  128 	ldx	*_calloc_sloc0_1_0
   004D CDr00r00      [ 5]  129 	jsr	_malloc
   0050 CFr00r02      [ 4]  130 	stx	_calloc_ptr_65536_62
   0053 C7r00r03      [ 4]  131 	sta	(_calloc_ptr_65536_62 + 1)
   0056 4D            [ 1]  132 	tsta
   0057 26 01         [ 3]  133 	bne	00118$
   0059 5D            [ 1]  134 	tstx
   005A                     135 00118$:
   005A 27 17         [ 3]  136 	beq	00104$
                            137 ;../calloc.c:58: memset(ptr, 0, msize);
   005C 4F            [ 1]  138 	clra
   005D C7r00r00      [ 4]  139 	sta	_memset_PARM_2
   0060 B6*00         [ 3]  140 	lda	*_calloc_sloc0_1_0
   0062 C7r00r00      [ 4]  141 	sta	_memset_PARM_3
   0065 B6*01         [ 3]  142 	lda	*(_calloc_sloc0_1_0 + 1)
   0067 C7r00r01      [ 4]  143 	sta	(_memset_PARM_3 + 1)
   006A C6r00r03      [ 4]  144 	lda	(_calloc_ptr_65536_62 + 1)
   006D CEr00r02      [ 4]  145 	ldx	_calloc_ptr_65536_62
   0070 CDr00r00      [ 5]  146 	jsr	_memset
   0073                     147 00104$:
                            148 ;../calloc.c:60: return(ptr);
   0073 CEr00r02      [ 4]  149 	ldx	_calloc_ptr_65536_62
   0076 C6r00r03      [ 4]  150 	lda	(_calloc_ptr_65536_62 + 1)
                            151 ;../calloc.c:61: }
   0079 81            [ 4]  152 	rts
                            153 	.area CSEG    (CODE)
                            154 	.area CONST   (CODE)
                            155 	.area XINIT   (CODE)
                            156 	.area CABS    (ABS,CODE)
