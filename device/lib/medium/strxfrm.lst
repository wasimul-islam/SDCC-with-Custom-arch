                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module strxfrm
                                      6 	.optsdcc -mmcs51 --model-medium
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _strlen
                                     12 	.globl _strncpy
                                     13 	.globl _strxfrm_PARM_3
                                     14 	.globl _strxfrm_PARM_2
                                     15 	.globl _strxfrm
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; special function bits
                                     23 ;--------------------------------------------------------
                                     24 	.area RSEG    (ABS,DATA)
      000000                         25 	.org 0x0000
                                     26 ;--------------------------------------------------------
                                     27 ; overlayable register banks
                                     28 ;--------------------------------------------------------
                                     29 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         30 	.ds 8
                                     31 ;--------------------------------------------------------
                                     32 ; internal ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area DSEG    (DATA)
                                     35 ;--------------------------------------------------------
                                     36 ; overlayable items in internal ram
                                     37 ;--------------------------------------------------------
                                     38 ;--------------------------------------------------------
                                     39 ; indirectly addressable internal ram data
                                     40 ;--------------------------------------------------------
                                     41 	.area ISEG    (DATA)
                                     42 ;--------------------------------------------------------
                                     43 ; absolute internal ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area IABS    (ABS,DATA)
                                     46 	.area IABS    (ABS,DATA)
                                     47 ;--------------------------------------------------------
                                     48 ; bit data
                                     49 ;--------------------------------------------------------
                                     50 	.area BSEG    (BIT)
                                     51 ;--------------------------------------------------------
                                     52 ; paged external ram data
                                     53 ;--------------------------------------------------------
                                     54 	.area PSEG    (PAG,XDATA)
      000000                         55 _strxfrm_PARM_2:
      000000                         56 	.ds 3
      000003                         57 _strxfrm_PARM_3:
      000003                         58 	.ds 2
                                     59 ;--------------------------------------------------------
                                     60 ; uninitialized external ram data
                                     61 ;--------------------------------------------------------
                                     62 	.area XSEG    (XDATA)
                                     63 ;--------------------------------------------------------
                                     64 ; absolute external ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area XABS    (ABS,XDATA)
                                     67 ;--------------------------------------------------------
                                     68 ; initialized external ram data
                                     69 ;--------------------------------------------------------
                                     70 	.area XISEG   (XDATA)
                                     71 	.area HOME    (CODE)
                                     72 	.area GSINIT0 (CODE)
                                     73 	.area GSINIT1 (CODE)
                                     74 	.area GSINIT2 (CODE)
                                     75 	.area GSINIT3 (CODE)
                                     76 	.area GSINIT4 (CODE)
                                     77 	.area GSINIT5 (CODE)
                                     78 	.area GSINIT  (CODE)
                                     79 	.area GSFINAL (CODE)
                                     80 	.area CSEG    (CODE)
                                     81 ;--------------------------------------------------------
                                     82 ; global & static initialisations
                                     83 ;--------------------------------------------------------
                                     84 	.area HOME    (CODE)
                                     85 	.area GSINIT  (CODE)
                                     86 	.area GSFINAL (CODE)
                                     87 	.area GSINIT  (CODE)
                                     88 ;--------------------------------------------------------
                                     89 ; Home
                                     90 ;--------------------------------------------------------
                                     91 	.area HOME    (CODE)
                                     92 	.area HOME    (CODE)
                                     93 ;--------------------------------------------------------
                                     94 ; code
                                     95 ;--------------------------------------------------------
                                     96 	.area CSEG    (CODE)
                                     97 ;------------------------------------------------------------
                                     98 ;Allocation info for local variables in function 'strxfrm'
                                     99 ;------------------------------------------------------------
                                    100 ;	strxfrm.c:31: size_t strxfrm(char *dest, const char *src, size_t n)
                                    101 ;	-----------------------------------------
                                    102 ;	 function strxfrm
                                    103 ;	-----------------------------------------
      000000                        104 _strxfrm:
                           000007   105 	ar7 = 0x07
                           000006   106 	ar6 = 0x06
                           000005   107 	ar5 = 0x05
                           000004   108 	ar4 = 0x04
                           000003   109 	ar3 = 0x03
                           000002   110 	ar2 = 0x02
                           000001   111 	ar1 = 0x01
                           000000   112 	ar0 = 0x00
      000000 AD 82            [24]  113 	mov	r5,dpl
      000002 AE 83            [24]  114 	mov	r6,dph
      000004 AF F0            [24]  115 	mov	r7,b
                                    116 ;	strxfrm.c:33: strncpy(dest, src, n);
      000006 78r00            [12]  117 	mov	r0,#_strxfrm_PARM_2
      000008 79r00            [12]  118 	mov	r1,#_strncpy_PARM_2
      00000A E2               [24]  119 	movx	a,@r0
      00000B F3               [24]  120 	movx	@r1,a
      00000C 08               [12]  121 	inc	r0
      00000D E2               [24]  122 	movx	a,@r0
      00000E 09               [12]  123 	inc	r1
      00000F F3               [24]  124 	movx	@r1,a
      000010 08               [12]  125 	inc	r0
      000011 E2               [24]  126 	movx	a,@r0
      000012 09               [12]  127 	inc	r1
      000013 F3               [24]  128 	movx	@r1,a
      000014 78r03            [12]  129 	mov	r0,#_strxfrm_PARM_3
      000016 79r00            [12]  130 	mov	r1,#_strncpy_PARM_3
      000018 E2               [24]  131 	movx	a,@r0
      000019 F3               [24]  132 	movx	@r1,a
      00001A 08               [12]  133 	inc	r0
      00001B E2               [24]  134 	movx	a,@r0
      00001C 09               [12]  135 	inc	r1
      00001D F3               [24]  136 	movx	@r1,a
      00001E 8D 82            [24]  137 	mov	dpl,r5
      000020 8E 83            [24]  138 	mov	dph,r6
      000022 8F F0            [24]  139 	mov	b,r7
      000024 12r00r00         [24]  140 	lcall	_strncpy
                                    141 ;	strxfrm.c:34: return(strlen(src) + 1);
      000027 78r00            [12]  142 	mov	r0,#_strxfrm_PARM_2
      000029 E2               [24]  143 	movx	a,@r0
      00002A F5 82            [12]  144 	mov	dpl,a
      00002C 08               [12]  145 	inc	r0
      00002D E2               [24]  146 	movx	a,@r0
      00002E F5 83            [12]  147 	mov	dph,a
      000030 08               [12]  148 	inc	r0
      000031 E2               [24]  149 	movx	a,@r0
      000032 F5 F0            [12]  150 	mov	b,a
      000034 12r00r00         [24]  151 	lcall	_strlen
      000037 E5 82            [12]  152 	mov	a,dpl
      000039 85 83 F0         [24]  153 	mov	b,dph
      00003C 24 01            [12]  154 	add	a,#0x01
      00003E F5 82            [12]  155 	mov	dpl,a
      000040 E4               [12]  156 	clr	a
      000041 35 F0            [12]  157 	addc	a,b
      000043 F5 83            [12]  158 	mov	dph,a
                                    159 ;	strxfrm.c:35: }
      000045 22               [24]  160 	ret
                                    161 	.area CSEG    (CODE)
                                    162 	.area CONST   (CODE)
                                    163 	.area XINIT   (CODE)
                                    164 	.area CABS    (ABS,CODE)
