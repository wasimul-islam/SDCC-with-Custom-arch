                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module atol
                                      6 	.optsdcc -mmcs51 --model-medium
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _atol
                                     12 ;--------------------------------------------------------
                                     13 ; special function registers
                                     14 ;--------------------------------------------------------
                                     15 	.area RSEG    (ABS,DATA)
      000000                         16 	.org 0x0000
                                     17 ;--------------------------------------------------------
                                     18 ; special function bits
                                     19 ;--------------------------------------------------------
                                     20 	.area RSEG    (ABS,DATA)
      000000                         21 	.org 0x0000
                                     22 ;--------------------------------------------------------
                                     23 ; overlayable register banks
                                     24 ;--------------------------------------------------------
                                     25 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         26 	.ds 8
                                     27 ;--------------------------------------------------------
                                     28 ; internal ram data
                                     29 ;--------------------------------------------------------
                                     30 	.area DSEG    (DATA)
      000000                         31 _atol_sloc1_1_0:
      000000                         32 	.ds 3
      000003                         33 _atol_sloc2_1_0:
      000003                         34 	.ds 4
                                     35 ;--------------------------------------------------------
                                     36 ; overlayable items in internal ram
                                     37 ;--------------------------------------------------------
                                     38 ;--------------------------------------------------------
                                     39 ; indirectly addressable internal ram data
                                     40 ;--------------------------------------------------------
                                     41 	.area ISEG    (DATA)
                                     42 ;--------------------------------------------------------
                                     43 ; absolute internal ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area IABS    (ABS,DATA)
                                     46 	.area IABS    (ABS,DATA)
                                     47 ;--------------------------------------------------------
                                     48 ; bit data
                                     49 ;--------------------------------------------------------
                                     50 	.area BSEG    (BIT)
      000000                         51 _atol_sloc0_1_0:
      000000                         52 	.ds 1
                                     53 ;--------------------------------------------------------
                                     54 ; paged external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area PSEG    (PAG,XDATA)
      000000                         57 _atol_ret_65536_60:
      000000                         58 	.ds 4
      000004                         59 _atol_neg_65536_60:
      000004                         60 	.ds 1
                                     61 ;--------------------------------------------------------
                                     62 ; uninitialized external ram data
                                     63 ;--------------------------------------------------------
                                     64 	.area XSEG    (XDATA)
                                     65 ;--------------------------------------------------------
                                     66 ; absolute external ram data
                                     67 ;--------------------------------------------------------
                                     68 	.area XABS    (ABS,XDATA)
                                     69 ;--------------------------------------------------------
                                     70 ; initialized external ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area XISEG   (XDATA)
                                     73 	.area HOME    (CODE)
                                     74 	.area GSINIT0 (CODE)
                                     75 	.area GSINIT1 (CODE)
                                     76 	.area GSINIT2 (CODE)
                                     77 	.area GSINIT3 (CODE)
                                     78 	.area GSINIT4 (CODE)
                                     79 	.area GSINIT5 (CODE)
                                     80 	.area GSINIT  (CODE)
                                     81 	.area GSFINAL (CODE)
                                     82 	.area CSEG    (CODE)
                                     83 ;--------------------------------------------------------
                                     84 ; global & static initialisations
                                     85 ;--------------------------------------------------------
                                     86 	.area HOME    (CODE)
                                     87 	.area GSINIT  (CODE)
                                     88 	.area GSFINAL (CODE)
                                     89 	.area GSINIT  (CODE)
                                     90 ;--------------------------------------------------------
                                     91 ; Home
                                     92 ;--------------------------------------------------------
                                     93 	.area HOME    (CODE)
                                     94 	.area HOME    (CODE)
                                     95 ;--------------------------------------------------------
                                     96 ; code
                                     97 ;--------------------------------------------------------
                                     98 	.area CSEG    (CODE)
                                     99 ;------------------------------------------------------------
                                    100 ;Allocation info for local variables in function 'atol'
                                    101 ;------------------------------------------------------------
                                    102 ;sloc1                     Allocated with name '_atol_sloc1_1_0'
                                    103 ;sloc2                     Allocated with name '_atol_sloc2_1_0'
                                    104 ;------------------------------------------------------------
                                    105 ;	atol.c:34: long int atol(const char *nptr)
                                    106 ;	-----------------------------------------
                                    107 ;	 function atol
                                    108 ;	-----------------------------------------
      000000                        109 _atol:
                           000007   110 	ar7 = 0x07
                           000006   111 	ar6 = 0x06
                           000005   112 	ar5 = 0x05
                           000004   113 	ar4 = 0x04
                           000003   114 	ar3 = 0x03
                           000002   115 	ar2 = 0x02
                           000001   116 	ar1 = 0x01
                           000000   117 	ar0 = 0x00
      000000 AD 82            [24]  118 	mov	r5,dpl
      000002 AE 83            [24]  119 	mov	r6,dph
      000004 AF F0            [24]  120 	mov	r7,b
                                    121 ;	atol.c:36: long int ret = 0;
      000006 78r00            [12]  122 	mov	r0,#_atol_ret_65536_60
      000008 E4               [12]  123 	clr	a
      000009 F2               [24]  124 	movx	@r0,a
      00000A 08               [12]  125 	inc	r0
      00000B F2               [24]  126 	movx	@r0,a
      00000C 08               [12]  127 	inc	r0
      00000D F2               [24]  128 	movx	@r0,a
      00000E 08               [12]  129 	inc	r0
      00000F F2               [24]  130 	movx	@r0,a
                                    131 ;	atol.c:39: while (isblank (*nptr))
      000010                        132 00101$:
      000010 8D 82            [24]  133 	mov	dpl,r5
      000012 8E 83            [24]  134 	mov	dph,r6
      000014 8F F0            [24]  135 	mov	b,r7
      000016 12r00r00         [24]  136 	lcall	__gptrget
      000019 FC               [12]  137 	mov	r4,a
                                    138 ;	../../device/include/ctype.h:53: return ((unsigned char)c == ' ' || (unsigned char)c == '\t');
      00001A BC 20 02         [24]  139 	cjne	r4,#0x20,00161$
      00001D 80 03            [24]  140 	sjmp	00115$
      00001F                        141 00161$:
      00001F BC 09 07         [24]  142 	cjne	r4,#0x09,00131$
      000022                        143 00115$:
                                    144 ;	atol.c:40: nptr++;
      000022 0D               [12]  145 	inc	r5
      000023 BD 00 EA         [24]  146 	cjne	r5,#0x00,00101$
      000026 0E               [12]  147 	inc	r6
      000027 80 E7            [24]  148 	sjmp	00101$
      000029                        149 00131$:
      000029 8D 02            [24]  150 	mov	ar2,r5
      00002B 8E 03            [24]  151 	mov	ar3,r6
      00002D 8F 04            [24]  152 	mov	ar4,r7
                                    153 ;	atol.c:42: neg = (*nptr == '-');
      00002F 8D 82            [24]  154 	mov	dpl,r5
      000031 8E 83            [24]  155 	mov	dph,r6
      000033 8F F0            [24]  156 	mov	b,r7
      000035 12r00r00         [24]  157 	lcall	__gptrget
      000038 FF               [12]  158 	mov	r7,a
      000039 78r04            [12]  159 	mov	r0,#_atol_neg_65536_60
      00003B E4               [12]  160 	clr	a
      00003C BF 2D 01         [24]  161 	cjne	r7,#0x2d,00165$
      00003F 04               [12]  162 	inc	a
      000040                        163 00165$:
      000040 F2               [24]  164 	movx	@r0,a
                                    165 ;	atol.c:44: if (*nptr == '-' || *nptr == '+')
      000041 BF 2D 02         [24]  166 	cjne	r7,#0x2d,00167$
      000044 80 03            [24]  167 	sjmp	00104$
      000046                        168 00167$:
      000046 BF 2B 05         [24]  169 	cjne	r7,#0x2b,00129$
      000049                        170 00104$:
                                    171 ;	atol.c:45: nptr++;
      000049 0A               [12]  172 	inc	r2
      00004A BA 00 01         [24]  173 	cjne	r2,#0x00,00170$
      00004D 0B               [12]  174 	inc	r3
      00004E                        175 00170$:
                                    176 ;	atol.c:47: while (isdigit (*nptr))
      00004E                        177 00129$:
      00004E 8A*00            [24]  178 	mov	_atol_sloc1_1_0,r2
      000050 8B*01            [24]  179 	mov	(_atol_sloc1_1_0 + 1),r3
      000052 8C*02            [24]  180 	mov	(_atol_sloc1_1_0 + 2),r4
      000054                        181 00107$:
      000054 85*00 82         [24]  182 	mov	dpl,_atol_sloc1_1_0
      000057 85*01 83         [24]  183 	mov	dph,(_atol_sloc1_1_0 + 1)
      00005A 85*02 F0         [24]  184 	mov	b,(_atol_sloc1_1_0 + 2)
      00005D 12r00r00         [24]  185 	lcall	__gptrget
      000060 FC               [12]  186 	mov	r4,a
                                    187 ;	../../device/include/ctype.h:62: return ((unsigned char)c >= '0' && (unsigned char)c <= '9');
      000061 BC 30 00         [24]  188 	cjne	r4,#0x30,00171$
      000064                        189 00171$:
      000064 92*00            [24]  190 	mov	_atol_sloc0_1_0,c
      000066 40 69            [24]  191 	jc	00109$
      000068 EC               [12]  192 	mov	a,r4
      000069 24 C6            [12]  193 	add	a,#0xff - 0x39
      00006B 92*00            [24]  194 	mov	_atol_sloc0_1_0,c
      00006D 40 62            [24]  195 	jc	00109$
                                    196 ;	atol.c:48: ret = ret * 10 + (*(nptr++) - '0');
      00006F 78r00            [12]  197 	mov	r0,#_atol_ret_65536_60
      000071 79r00            [12]  198 	mov	r1,#__mullong_PARM_2
      000073 E2               [24]  199 	movx	a,@r0
      000074 F3               [24]  200 	movx	@r1,a
      000075 08               [12]  201 	inc	r0
      000076 E2               [24]  202 	movx	a,@r0
      000077 09               [12]  203 	inc	r1
      000078 F3               [24]  204 	movx	@r1,a
      000079 08               [12]  205 	inc	r0
      00007A E2               [24]  206 	movx	a,@r0
      00007B 09               [12]  207 	inc	r1
      00007C F3               [24]  208 	movx	@r1,a
      00007D 08               [12]  209 	inc	r0
      00007E E2               [24]  210 	movx	a,@r0
      00007F 09               [12]  211 	inc	r1
      000080 F3               [24]  212 	movx	@r1,a
      000081 90 00 0A         [24]  213 	mov	dptr,#(0x0a&0x00ff)
      000084 E4               [12]  214 	clr	a
      000085 F5 F0            [12]  215 	mov	b,a
      000087 12r00r00         [24]  216 	lcall	__mullong
      00008A 85 82*03         [24]  217 	mov	_atol_sloc2_1_0,dpl
      00008D 85 83*04         [24]  218 	mov	(_atol_sloc2_1_0 + 1),dph
      000090 85 F0*05         [24]  219 	mov	(_atol_sloc2_1_0 + 2),b
      000093 F5*06            [12]  220 	mov	(_atol_sloc2_1_0 + 3),a
      000095 85*00 82         [24]  221 	mov	dpl,_atol_sloc1_1_0
      000098 85*01 83         [24]  222 	mov	dph,(_atol_sloc1_1_0 + 1)
      00009B 85*02 F0         [24]  223 	mov	b,(_atol_sloc1_1_0 + 2)
      00009E 12r00r00         [24]  224 	lcall	__gptrget
      0000A1 FE               [12]  225 	mov	r6,a
      0000A2 A3               [24]  226 	inc	dptr
      0000A3 85 82*00         [24]  227 	mov	_atol_sloc1_1_0,dpl
      0000A6 85 83*01         [24]  228 	mov	(_atol_sloc1_1_0 + 1),dph
      0000A9 7D 00            [12]  229 	mov	r5,#0x00
      0000AB EE               [12]  230 	mov	a,r6
      0000AC 24 D0            [12]  231 	add	a,#0xd0
      0000AE FE               [12]  232 	mov	r6,a
      0000AF ED               [12]  233 	mov	a,r5
      0000B0 34 FF            [12]  234 	addc	a,#0xff
      0000B2 FD               [12]  235 	mov	r5,a
      0000B3 8E 04            [24]  236 	mov	ar4,r6
      0000B5 33               [12]  237 	rlc	a
      0000B6 95 E0            [12]  238 	subb	a,acc
      0000B8 FE               [12]  239 	mov	r6,a
      0000B9 FF               [12]  240 	mov	r7,a
      0000BA 78r00            [12]  241 	mov	r0,#_atol_ret_65536_60
      0000BC EC               [12]  242 	mov	a,r4
      0000BD 25*03            [12]  243 	add	a,_atol_sloc2_1_0
      0000BF F2               [24]  244 	movx	@r0,a
      0000C0 ED               [12]  245 	mov	a,r5
      0000C1 35*04            [12]  246 	addc	a,(_atol_sloc2_1_0 + 1)
      0000C3 08               [12]  247 	inc	r0
      0000C4 F2               [24]  248 	movx	@r0,a
      0000C5 EE               [12]  249 	mov	a,r6
      0000C6 35*05            [12]  250 	addc	a,(_atol_sloc2_1_0 + 2)
      0000C8 08               [12]  251 	inc	r0
      0000C9 F2               [24]  252 	movx	@r0,a
      0000CA EF               [12]  253 	mov	a,r7
      0000CB 35*06            [12]  254 	addc	a,(_atol_sloc2_1_0 + 3)
      0000CD 08               [12]  255 	inc	r0
      0000CE F2               [24]  256 	movx	@r0,a
      0000CF 80 83            [24]  257 	sjmp	00107$
      0000D1                        258 00109$:
                                    259 ;	atol.c:50: return (neg ? -ret : ret); // Since -LONG_MIN is LONG_MIN in sdcc, the result value always turns out ok.
      0000D1 78r04            [12]  260 	mov	r0,#_atol_neg_65536_60
      0000D3 E2               [24]  261 	movx	a,@r0
      0000D4 60 1C            [24]  262 	jz	00120$
      0000D6 78r00            [12]  263 	mov	r0,#_atol_ret_65536_60
      0000D8 E2               [24]  264 	movx	a,@r0
      0000D9 D3               [12]  265 	setb	c
      0000DA F4               [12]  266 	cpl	a
      0000DB 34 00            [12]  267 	addc	a,#0x00
      0000DD FC               [12]  268 	mov	r4,a
      0000DE 08               [12]  269 	inc	r0
      0000DF E2               [24]  270 	movx	a,@r0
      0000E0 F4               [12]  271 	cpl	a
      0000E1 34 00            [12]  272 	addc	a,#0x00
      0000E3 FD               [12]  273 	mov	r5,a
      0000E4 08               [12]  274 	inc	r0
      0000E5 E2               [24]  275 	movx	a,@r0
      0000E6 F4               [12]  276 	cpl	a
      0000E7 34 00            [12]  277 	addc	a,#0x00
      0000E9 FE               [12]  278 	mov	r6,a
      0000EA 08               [12]  279 	inc	r0
      0000EB E2               [24]  280 	movx	a,@r0
      0000EC F4               [12]  281 	cpl	a
      0000ED 34 00            [12]  282 	addc	a,#0x00
      0000EF FF               [12]  283 	mov	r7,a
      0000F0 80 0D            [24]  284 	sjmp	00121$
      0000F2                        285 00120$:
      0000F2 78r00            [12]  286 	mov	r0,#_atol_ret_65536_60
      0000F4 E2               [24]  287 	movx	a,@r0
      0000F5 FC               [12]  288 	mov	r4,a
      0000F6 08               [12]  289 	inc	r0
      0000F7 E2               [24]  290 	movx	a,@r0
      0000F8 FD               [12]  291 	mov	r5,a
      0000F9 08               [12]  292 	inc	r0
      0000FA E2               [24]  293 	movx	a,@r0
      0000FB FE               [12]  294 	mov	r6,a
      0000FC 08               [12]  295 	inc	r0
      0000FD E2               [24]  296 	movx	a,@r0
      0000FE FF               [12]  297 	mov	r7,a
      0000FF                        298 00121$:
      0000FF 8C 82            [24]  299 	mov	dpl,r4
      000101 8D 83            [24]  300 	mov	dph,r5
      000103 8E F0            [24]  301 	mov	b,r6
      000105 EF               [12]  302 	mov	a,r7
                                    303 ;	atol.c:51: }
      000106 22               [24]  304 	ret
                                    305 	.area CSEG    (CODE)
                                    306 	.area CONST   (CODE)
                                    307 	.area XINIT   (CODE)
                                    308 	.area CABS    (ABS,CODE)
