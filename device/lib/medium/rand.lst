                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module rand
                                      6 	.optsdcc -mmcs51 --model-medium
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _rand
                                     12 	.globl _srand
                                     13 ;--------------------------------------------------------
                                     14 ; special function registers
                                     15 ;--------------------------------------------------------
                                     16 	.area RSEG    (ABS,DATA)
      000000                         17 	.org 0x0000
                                     18 ;--------------------------------------------------------
                                     19 ; special function bits
                                     20 ;--------------------------------------------------------
                                     21 	.area RSEG    (ABS,DATA)
      000000                         22 	.org 0x0000
                                     23 ;--------------------------------------------------------
                                     24 ; overlayable register banks
                                     25 ;--------------------------------------------------------
                                     26 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         27 	.ds 8
                                     28 ;--------------------------------------------------------
                                     29 ; internal ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area DSEG    (DATA)
                                     32 ;--------------------------------------------------------
                                     33 ; overlayable items in internal ram
                                     34 ;--------------------------------------------------------
                                     35 	.area	OSEG    (OVR,DATA)
      000000                         36 _rand_t_65536_40:
      000000                         37 	.ds 4
      000004                         38 _rand_sloc0_1_0:
      000004                         39 	.ds 4
                                     40 ;--------------------------------------------------------
                                     41 ; indirectly addressable internal ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area ISEG    (DATA)
                                     44 ;--------------------------------------------------------
                                     45 ; absolute internal ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area IABS    (ABS,DATA)
                                     48 	.area IABS    (ABS,DATA)
                                     49 ;--------------------------------------------------------
                                     50 ; bit data
                                     51 ;--------------------------------------------------------
                                     52 	.area BSEG    (BIT)
                                     53 ;--------------------------------------------------------
                                     54 ; paged external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area PSEG    (PAG,XDATA)
      000000                         57 _s:
      000000                         58 	.ds 4
                                     59 ;--------------------------------------------------------
                                     60 ; uninitialized external ram data
                                     61 ;--------------------------------------------------------
                                     62 	.area XSEG    (XDATA)
                                     63 ;--------------------------------------------------------
                                     64 ; absolute external ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area XABS    (ABS,XDATA)
                                     67 ;--------------------------------------------------------
                                     68 ; initialized external ram data
                                     69 ;--------------------------------------------------------
                                     70 	.area XISEG   (XDATA)
                                     71 	.area HOME    (CODE)
                                     72 	.area GSINIT0 (CODE)
                                     73 	.area GSINIT1 (CODE)
                                     74 	.area GSINIT2 (CODE)
                                     75 	.area GSINIT3 (CODE)
                                     76 	.area GSINIT4 (CODE)
                                     77 	.area GSINIT5 (CODE)
                                     78 	.area GSINIT  (CODE)
                                     79 	.area GSFINAL (CODE)
                                     80 	.area CSEG    (CODE)
                                     81 ;--------------------------------------------------------
                                     82 ; global & static initialisations
                                     83 ;--------------------------------------------------------
                                     84 	.area HOME    (CODE)
                                     85 	.area GSINIT  (CODE)
                                     86 	.area GSFINAL (CODE)
                                     87 	.area GSINIT  (CODE)
                                     88 ;	rand.c:38: static uint32_t s = 0x80000001;
      000000 78r00            [12]   89 	mov	r0,#_s
      000002 74 01            [12]   90 	mov	a,#0x01
      000004 F2               [24]   91 	movx	@r0,a
      000005 E4               [12]   92 	clr	a
      000006 08               [12]   93 	inc	r0
      000007 F2               [24]   94 	movx	@r0,a
      000008 08               [12]   95 	inc	r0
      000009 F2               [24]   96 	movx	@r0,a
      00000A 74 80            [12]   97 	mov	a,#0x80
      00000C 08               [12]   98 	inc	r0
      00000D F2               [24]   99 	movx	@r0,a
                                    100 ;--------------------------------------------------------
                                    101 ; Home
                                    102 ;--------------------------------------------------------
                                    103 	.area HOME    (CODE)
                                    104 	.area HOME    (CODE)
                                    105 ;--------------------------------------------------------
                                    106 ; code
                                    107 ;--------------------------------------------------------
                                    108 	.area CSEG    (CODE)
                                    109 ;------------------------------------------------------------
                                    110 ;Allocation info for local variables in function 'rand'
                                    111 ;------------------------------------------------------------
                                    112 ;t                         Allocated with name '_rand_t_65536_40'
                                    113 ;sloc0                     Allocated with name '_rand_sloc0_1_0'
                                    114 ;------------------------------------------------------------
                                    115 ;	rand.c:40: int rand(void)
                                    116 ;	-----------------------------------------
                                    117 ;	 function rand
                                    118 ;	-----------------------------------------
      000000                        119 _rand:
                           000007   120 	ar7 = 0x07
                           000006   121 	ar6 = 0x06
                           000005   122 	ar5 = 0x05
                           000004   123 	ar4 = 0x04
                           000003   124 	ar3 = 0x03
                           000002   125 	ar2 = 0x02
                           000001   126 	ar1 = 0x01
                           000000   127 	ar0 = 0x00
                                    128 ;	rand.c:42: register unsigned long t = s;
      000000 78r00            [12]  129 	mov	r0,#_s
      000002 E2               [24]  130 	movx	a,@r0
      000003 F5*04            [12]  131 	mov	_rand_sloc0_1_0,a
      000005 08               [12]  132 	inc	r0
      000006 E2               [24]  133 	movx	a,@r0
      000007 F5*05            [12]  134 	mov	(_rand_sloc0_1_0 + 1),a
      000009 08               [12]  135 	inc	r0
      00000A E2               [24]  136 	movx	a,@r0
      00000B F5*06            [12]  137 	mov	(_rand_sloc0_1_0 + 2),a
      00000D 08               [12]  138 	inc	r0
      00000E E2               [24]  139 	movx	a,@r0
      00000F F5*07            [12]  140 	mov	(_rand_sloc0_1_0 + 3),a
                                    141 ;	rand.c:44: t ^= t >> 10;
      000011 AA*05            [24]  142 	mov	r2,(_rand_sloc0_1_0 + 1)
      000013 E5*06            [12]  143 	mov	a,(_rand_sloc0_1_0 + 2)
      000015 C3               [12]  144 	clr	c
      000016 13               [12]  145 	rrc	a
      000017 CA               [12]  146 	xch	a,r2
      000018 13               [12]  147 	rrc	a
      000019 CA               [12]  148 	xch	a,r2
      00001A C3               [12]  149 	clr	c
      00001B 13               [12]  150 	rrc	a
      00001C CA               [12]  151 	xch	a,r2
      00001D 13               [12]  152 	rrc	a
      00001E CA               [12]  153 	xch	a,r2
      00001F FB               [12]  154 	mov	r3,a
      000020 E5*07            [12]  155 	mov	a,(_rand_sloc0_1_0 + 3)
      000022 03               [12]  156 	rr	a
      000023 03               [12]  157 	rr	a
      000024 54 C0            [12]  158 	anl	a,#0xc0
      000026 4B               [12]  159 	orl	a,r3
      000027 FB               [12]  160 	mov	r3,a
      000028 E5*07            [12]  161 	mov	a,(_rand_sloc0_1_0 + 3)
      00002A 03               [12]  162 	rr	a
      00002B 03               [12]  163 	rr	a
      00002C 54 3F            [12]  164 	anl	a,#0x3f
      00002E FE               [12]  165 	mov	r6,a
      00002F 7F 00            [12]  166 	mov	r7,#0x00
      000031 EA               [12]  167 	mov	a,r2
      000032 62*04            [12]  168 	xrl	_rand_sloc0_1_0,a
      000034 EB               [12]  169 	mov	a,r3
      000035 62*05            [12]  170 	xrl	(_rand_sloc0_1_0 + 1),a
      000037 EE               [12]  171 	mov	a,r6
      000038 62*06            [12]  172 	xrl	(_rand_sloc0_1_0 + 2),a
      00003A EF               [12]  173 	mov	a,r7
      00003B 62*07            [12]  174 	xrl	(_rand_sloc0_1_0 + 3),a
                                    175 ;	rand.c:45: t ^= t << 9;
      00003D E5*04            [12]  176 	mov	a,_rand_sloc0_1_0
      00003F 25*04            [12]  177 	add	a,_rand_sloc0_1_0
      000041 FD               [12]  178 	mov	r5,a
      000042 E5*05            [12]  179 	mov	a,(_rand_sloc0_1_0 + 1)
      000044 33               [12]  180 	rlc	a
      000045 FE               [12]  181 	mov	r6,a
      000046 E5*06            [12]  182 	mov	a,(_rand_sloc0_1_0 + 2)
      000048 33               [12]  183 	rlc	a
      000049 FF               [12]  184 	mov	r7,a
      00004A E4               [12]  185 	clr	a
      00004B 65*04            [12]  186 	xrl	a,_rand_sloc0_1_0
      00004D F5*00            [12]  187 	mov	_rand_t_65536_40,a
      00004F ED               [12]  188 	mov	a,r5
      000050 65*05            [12]  189 	xrl	a,(_rand_sloc0_1_0 + 1)
      000052 F5*01            [12]  190 	mov	(_rand_t_65536_40 + 1),a
      000054 EE               [12]  191 	mov	a,r6
      000055 65*06            [12]  192 	xrl	a,(_rand_sloc0_1_0 + 2)
      000057 F5*02            [12]  193 	mov	(_rand_t_65536_40 + 2),a
      000059 EF               [12]  194 	mov	a,r7
      00005A 65*07            [12]  195 	xrl	a,(_rand_sloc0_1_0 + 3)
                                    196 ;	rand.c:46: t ^= t >> 25;
      00005C F5*03            [12]  197 	mov	(_rand_t_65536_40 + 3),a
      00005E C3               [12]  198 	clr	c
      00005F 13               [12]  199 	rrc	a
      000060 FA               [12]  200 	mov	r2,a
      000061 E4               [12]  201 	clr	a
      000062 FB               [12]  202 	mov	r3,a
      000063 FE               [12]  203 	mov	r6,a
      000064 FF               [12]  204 	mov	r7,a
      000065 E5*00            [12]  205 	mov	a,_rand_t_65536_40
      000067 62 02            [12]  206 	xrl	ar2,a
      000069 E5*01            [12]  207 	mov	a,(_rand_t_65536_40 + 1)
      00006B 62 03            [12]  208 	xrl	ar3,a
      00006D E5*02            [12]  209 	mov	a,(_rand_t_65536_40 + 2)
      00006F 62 06            [12]  210 	xrl	ar6,a
      000071 E5*03            [12]  211 	mov	a,(_rand_t_65536_40 + 3)
      000073 62 07            [12]  212 	xrl	ar7,a
                                    213 ;	rand.c:48: s = t;
      000075 78r00            [12]  214 	mov	r0,#_s
      000077 EA               [12]  215 	mov	a,r2
      000078 F2               [24]  216 	movx	@r0,a
      000079 EB               [12]  217 	mov	a,r3
      00007A 08               [12]  218 	inc	r0
      00007B F2               [24]  219 	movx	@r0,a
      00007C EE               [12]  220 	mov	a,r6
      00007D 08               [12]  221 	inc	r0
      00007E F2               [24]  222 	movx	@r0,a
      00007F EF               [12]  223 	mov	a,r7
      000080 08               [12]  224 	inc	r0
      000081 F2               [24]  225 	movx	@r0,a
                                    226 ;	rand.c:50: return(t & RAND_MAX);
      000082 8A 82            [24]  227 	mov	dpl,r2
      000084 74 7F            [12]  228 	mov	a,#0x7f
      000086 5B               [12]  229 	anl	a,r3
      000087 F5 83            [12]  230 	mov	dph,a
                                    231 ;	rand.c:51: }
      000089 22               [24]  232 	ret
                                    233 ;------------------------------------------------------------
                                    234 ;Allocation info for local variables in function 'srand'
                                    235 ;------------------------------------------------------------
                                    236 ;	rand.c:53: void srand(unsigned int seed)
                                    237 ;	-----------------------------------------
                                    238 ;	 function srand
                                    239 ;	-----------------------------------------
      00008A                        240 _srand:
      00008A AE 82            [24]  241 	mov	r6,dpl
      00008C AF 83            [24]  242 	mov	r7,dph
                                    243 ;	rand.c:55: s = seed | 0x80000000; /* s shall not become 0 */
      00008E 7D 00            [12]  244 	mov	r5,#0x00
      000090 7C 00            [12]  245 	mov	r4,#0x00
      000092 78r00            [12]  246 	mov	r0,#_s
      000094 EE               [12]  247 	mov	a,r6
      000095 F2               [24]  248 	movx	@r0,a
      000096 EF               [12]  249 	mov	a,r7
      000097 08               [12]  250 	inc	r0
      000098 F2               [24]  251 	movx	@r0,a
      000099 ED               [12]  252 	mov	a,r5
      00009A 08               [12]  253 	inc	r0
      00009B F2               [24]  254 	movx	@r0,a
      00009C 74 80            [12]  255 	mov	a,#0x80
      00009E 4C               [12]  256 	orl	a,r4
      00009F 08               [12]  257 	inc	r0
      0000A0 F2               [24]  258 	movx	@r0,a
                                    259 ;	rand.c:56: }
      0000A1 22               [24]  260 	ret
                                    261 	.area CSEG    (CODE)
                                    262 	.area CONST   (CODE)
                                    263 	.area XINIT   (CODE)
                                    264 	.area CABS    (ABS,CODE)
