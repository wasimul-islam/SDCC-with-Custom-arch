                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module bsearch
                                      6 	.optsdcc -mmcs51 --model-medium
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _bsearch_PARM_5
                                     12 	.globl _bsearch_PARM_4
                                     13 	.globl _bsearch_PARM_3
                                     14 	.globl _bsearch_PARM_2
                                     15 	.globl _bsearch
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; special function bits
                                     23 ;--------------------------------------------------------
                                     24 	.area RSEG    (ABS,DATA)
      000000                         25 	.org 0x0000
                                     26 ;--------------------------------------------------------
                                     27 ; overlayable register banks
                                     28 ;--------------------------------------------------------
                                     29 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         30 	.ds 8
                                     31 ;--------------------------------------------------------
                                     32 ; internal ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area DSEG    (DATA)
      000000                         35 _bsearch_sloc0_1_0:
      000000                         36 	.ds 2
      000002                         37 _bsearch_sloc1_1_0:
      000002                         38 	.ds 3
                                     39 ;--------------------------------------------------------
                                     40 ; overlayable items in internal ram
                                     41 ;--------------------------------------------------------
                                     42 ;--------------------------------------------------------
                                     43 ; indirectly addressable internal ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area ISEG    (DATA)
                                     46 ;--------------------------------------------------------
                                     47 ; absolute internal ram data
                                     48 ;--------------------------------------------------------
                                     49 	.area IABS    (ABS,DATA)
                                     50 	.area IABS    (ABS,DATA)
                                     51 ;--------------------------------------------------------
                                     52 ; bit data
                                     53 ;--------------------------------------------------------
                                     54 	.area BSEG    (BIT)
                                     55 ;--------------------------------------------------------
                                     56 ; paged external ram data
                                     57 ;--------------------------------------------------------
                                     58 	.area PSEG    (PAG,XDATA)
      000000                         59 _bsearch_PARM_2:
      000000                         60 	.ds 3
      000003                         61 _bsearch_PARM_3:
      000003                         62 	.ds 2
      000005                         63 _bsearch_PARM_4:
      000005                         64 	.ds 2
      000007                         65 _bsearch_PARM_5:
      000007                         66 	.ds 2
      000009                         67 _bsearch_key_65536_39:
      000009                         68 	.ds 3
                                     69 ;--------------------------------------------------------
                                     70 ; uninitialized external ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area XSEG    (XDATA)
                                     73 ;--------------------------------------------------------
                                     74 ; absolute external ram data
                                     75 ;--------------------------------------------------------
                                     76 	.area XABS    (ABS,XDATA)
                                     77 ;--------------------------------------------------------
                                     78 ; initialized external ram data
                                     79 ;--------------------------------------------------------
                                     80 	.area XISEG   (XDATA)
                                     81 	.area HOME    (CODE)
                                     82 	.area GSINIT0 (CODE)
                                     83 	.area GSINIT1 (CODE)
                                     84 	.area GSINIT2 (CODE)
                                     85 	.area GSINIT3 (CODE)
                                     86 	.area GSINIT4 (CODE)
                                     87 	.area GSINIT5 (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 	.area GSFINAL (CODE)
                                     90 	.area CSEG    (CODE)
                                     91 ;--------------------------------------------------------
                                     92 ; global & static initialisations
                                     93 ;--------------------------------------------------------
                                     94 	.area HOME    (CODE)
                                     95 	.area GSINIT  (CODE)
                                     96 	.area GSFINAL (CODE)
                                     97 	.area GSINIT  (CODE)
                                     98 ;--------------------------------------------------------
                                     99 ; Home
                                    100 ;--------------------------------------------------------
                                    101 	.area HOME    (CODE)
                                    102 	.area HOME    (CODE)
                                    103 ;--------------------------------------------------------
                                    104 ; code
                                    105 ;--------------------------------------------------------
                                    106 	.area CSEG    (CODE)
                                    107 ;------------------------------------------------------------
                                    108 ;Allocation info for local variables in function 'bsearch'
                                    109 ;------------------------------------------------------------
                                    110 ;sloc0                     Allocated with name '_bsearch_sloc0_1_0'
                                    111 ;sloc1                     Allocated with name '_bsearch_sloc1_1_0'
                                    112 ;------------------------------------------------------------
                                    113 ;	bsearch.c:31: void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *) __reentrant)
                                    114 ;	-----------------------------------------
                                    115 ;	 function bsearch
                                    116 ;	-----------------------------------------
      000000                        117 _bsearch:
                           000007   118 	ar7 = 0x07
                           000006   119 	ar6 = 0x06
                           000005   120 	ar5 = 0x05
                           000004   121 	ar4 = 0x04
                           000003   122 	ar3 = 0x03
                           000002   123 	ar2 = 0x02
                           000001   124 	ar1 = 0x01
                           000000   125 	ar0 = 0x00
      000000 AF F0            [24]  126 	mov	r7,b
      000002 AE 83            [24]  127 	mov	r6,dph
      000004 E5 82            [12]  128 	mov	a,dpl
      000006 78r09            [12]  129 	mov	r0,#_bsearch_key_65536_39
      000008 F2               [24]  130 	movx	@r0,a
      000009 EE               [12]  131 	mov	a,r6
      00000A 08               [12]  132 	inc	r0
      00000B F2               [24]  133 	movx	@r0,a
      00000C EF               [12]  134 	mov	a,r7
      00000D 08               [12]  135 	inc	r0
      00000E F2               [24]  136 	movx	@r0,a
                                    137 ;	bsearch.c:33: for(const char *left = base; nmemb;)
      00000F 78r00            [12]  138 	mov	r0,#_bsearch_PARM_2
      000011 E2               [24]  139 	movx	a,@r0
      000012 F5*02            [12]  140 	mov	_bsearch_sloc1_1_0,a
      000014 08               [12]  141 	inc	r0
      000015 E2               [24]  142 	movx	a,@r0
      000016 F5*03            [12]  143 	mov	(_bsearch_sloc1_1_0 + 1),a
      000018 08               [12]  144 	inc	r0
      000019 E2               [24]  145 	movx	a,@r0
      00001A F5*04            [12]  146 	mov	(_bsearch_sloc1_1_0 + 2),a
      00001C                        147 00109$:
      00001C 78r03            [12]  148 	mov	r0,#_bsearch_PARM_3
      00001E E2               [24]  149 	movx	a,@r0
      00001F F5 F0            [12]  150 	mov	b,a
      000021 08               [12]  151 	inc	r0
      000022 E2               [24]  152 	movx	a,@r0
      000023 45 F0            [12]  153 	orl	a,b
      000025 70 03            [24]  154 	jnz	00129$
      000027 02r00rEB         [24]  155 	ljmp	00107$
      00002A                        156 00129$:
                                    157 ;	bsearch.c:35: const char *middle = left + nmemb / 2 * size;
      00002A 78r03            [12]  158 	mov	r0,#_bsearch_PARM_3
      00002C E2               [24]  159 	movx	a,@r0
      00002D F5*00            [12]  160 	mov	_bsearch_sloc0_1_0,a
      00002F 08               [12]  161 	inc	r0
      000030 E2               [24]  162 	movx	a,@r0
      000031 C3               [12]  163 	clr	c
      000032 13               [12]  164 	rrc	a
      000033 C5*00            [12]  165 	xch	a,_bsearch_sloc0_1_0
      000035 13               [12]  166 	rrc	a
      000036 C5*00            [12]  167 	xch	a,_bsearch_sloc0_1_0
      000038 F5*01            [12]  168 	mov	(_bsearch_sloc0_1_0 + 1),a
      00003A 78r05            [12]  169 	mov	r0,#_bsearch_PARM_4
      00003C 79r00            [12]  170 	mov	r1,#__mulint_PARM_2
      00003E E2               [24]  171 	movx	a,@r0
      00003F F3               [24]  172 	movx	@r1,a
      000040 08               [12]  173 	inc	r0
      000041 E2               [24]  174 	movx	a,@r0
      000042 09               [12]  175 	inc	r1
      000043 F3               [24]  176 	movx	@r1,a
      000044 85*00 82         [24]  177 	mov	dpl,_bsearch_sloc0_1_0
      000047 85*01 83         [24]  178 	mov	dph,(_bsearch_sloc0_1_0 + 1)
      00004A 12r00r00         [24]  179 	lcall	__mulint
      00004D AE 82            [24]  180 	mov	r6,dpl
      00004F AF 83            [24]  181 	mov	r7,dph
      000051 EE               [12]  182 	mov	a,r6
      000052 25*02            [12]  183 	add	a,_bsearch_sloc1_1_0
      000054 FE               [12]  184 	mov	r6,a
      000055 EF               [12]  185 	mov	a,r7
      000056 35*03            [12]  186 	addc	a,(_bsearch_sloc1_1_0 + 1)
      000058 FD               [12]  187 	mov	r5,a
      000059 AF*04            [24]  188 	mov	r7,(_bsearch_sloc1_1_0 + 2)
                                    189 ;	bsearch.c:36: int c = (*compar)(key, middle);
      00005B 8E 02            [24]  190 	mov	ar2,r6
      00005D 8D 03            [24]  191 	mov	ar3,r5
      00005F 8F 04            [24]  192 	mov	ar4,r7
      000061 C0 07            [24]  193 	push	ar7
      000063 C0 06            [24]  194 	push	ar6
      000065 C0 05            [24]  195 	push	ar5
      000067 C0 02            [24]  196 	push	ar2
      000069 C0 03            [24]  197 	push	ar3
      00006B C0 04            [24]  198 	push	ar4
      00006D 12r00r72         [24]  199 	lcall	00130$
      000070 80 17            [24]  200 	sjmp	00131$
      000072                        201 00130$:
      000072 78r07            [12]  202 	mov	r0,#_bsearch_PARM_5
      000074 E2               [24]  203 	movx	a,@r0
      000075 C0 E0            [24]  204 	push	acc
      000077 08               [12]  205 	inc	r0
      000078 E2               [24]  206 	movx	a,@r0
      000079 C0 E0            [24]  207 	push	acc
      00007B 78r09            [12]  208 	mov	r0,#_bsearch_key_65536_39
      00007D E2               [24]  209 	movx	a,@r0
      00007E F5 82            [12]  210 	mov	dpl,a
      000080 08               [12]  211 	inc	r0
      000081 E2               [24]  212 	movx	a,@r0
      000082 F5 83            [12]  213 	mov	dph,a
      000084 08               [12]  214 	inc	r0
      000085 E2               [24]  215 	movx	a,@r0
      000086 F5 F0            [12]  216 	mov	b,a
      000088 22               [24]  217 	ret
      000089                        218 00131$:
      000089 AC 82            [24]  219 	mov	r4,dpl
      00008B AB 83            [24]  220 	mov	r3,dph
      00008D 15 81            [12]  221 	dec	sp
      00008F 15 81            [12]  222 	dec	sp
      000091 15 81            [12]  223 	dec	sp
      000093 D0 05            [24]  224 	pop	ar5
      000095 D0 06            [24]  225 	pop	ar6
      000097 D0 07            [24]  226 	pop	ar7
                                    227 ;	bsearch.c:38: if(c < 0)
      000099 EB               [12]  228 	mov	a,r3
      00009A 30 E7 0C         [24]  229 	jnb	acc.7,00105$
                                    230 ;	bsearch.c:39: nmemb = nmemb / 2;	
      00009D 78r03            [12]  231 	mov	r0,#_bsearch_PARM_3
      00009F E5*00            [12]  232 	mov	a,_bsearch_sloc0_1_0
      0000A1 F2               [24]  233 	movx	@r0,a
      0000A2 E5*01            [12]  234 	mov	a,(_bsearch_sloc0_1_0 + 1)
      0000A4 08               [12]  235 	inc	r0
      0000A5 F2               [24]  236 	movx	@r0,a
      0000A6 02r00r1C         [24]  237 	ljmp	00109$
      0000A9                        238 00105$:
                                    239 ;	bsearch.c:40: else if(c > 0)
      0000A9 C3               [12]  240 	clr	c
      0000AA E4               [12]  241 	clr	a
      0000AB 9C               [12]  242 	subb	a,r4
      0000AC 74 80            [12]  243 	mov	a,#(0x00 ^ 0x80)
      0000AE 8B F0            [24]  244 	mov	b,r3
      0000B0 63 F0 80         [24]  245 	xrl	b,#0x80
      0000B3 95 F0            [12]  246 	subb	a,b
      0000B5 50 2D            [24]  247 	jnc	00102$
                                    248 ;	bsearch.c:42: left = middle + size;
      0000B7 78r05            [12]  249 	mov	r0,#_bsearch_PARM_4
      0000B9 E2               [24]  250 	movx	a,@r0
      0000BA 2E               [12]  251 	add	a,r6
      0000BB F5*02            [12]  252 	mov	_bsearch_sloc1_1_0,a
      0000BD 08               [12]  253 	inc	r0
      0000BE E2               [24]  254 	movx	a,@r0
      0000BF 3D               [12]  255 	addc	a,r5
      0000C0 F5*03            [12]  256 	mov	(_bsearch_sloc1_1_0 + 1),a
      0000C2 8F*04            [24]  257 	mov	(_bsearch_sloc1_1_0 + 2),r7
                                    258 ;	bsearch.c:43: nmemb = (nmemb - 1) / 2;
      0000C4 78r03            [12]  259 	mov	r0,#_bsearch_PARM_3
      0000C6 E2               [24]  260 	movx	a,@r0
      0000C7 24 FF            [12]  261 	add	a,#0xff
      0000C9 FB               [12]  262 	mov	r3,a
      0000CA 08               [12]  263 	inc	r0
      0000CB E2               [24]  264 	movx	a,@r0
      0000CC 34 FF            [12]  265 	addc	a,#0xff
      0000CE FC               [12]  266 	mov	r4,a
      0000CF 78r03            [12]  267 	mov	r0,#_bsearch_PARM_3
      0000D1 EB               [12]  268 	mov	a,r3
      0000D2 F2               [24]  269 	movx	@r0,a
      0000D3 E2               [24]  270 	movx	a,@r0
      0000D4 F5 F0            [12]  271 	mov	b,a
      0000D6 EC               [12]  272 	mov	a,r4
      0000D7 C3               [12]  273 	clr	c
      0000D8 13               [12]  274 	rrc	a
      0000D9 C5 F0            [12]  275 	xch	a,b
      0000DB 13               [12]  276 	rrc	a
      0000DC F2               [24]  277 	movx	@r0,a
      0000DD C5 F0            [12]  278 	xch	a,b
      0000DF 08               [12]  279 	inc	r0
      0000E0 F2               [24]  280 	movx	@r0,a
      0000E1 02r00r1C         [24]  281 	ljmp	00109$
      0000E4                        282 00102$:
                                    283 ;	bsearch.c:46: return(middle);
      0000E4 8E 82            [24]  284 	mov	dpl,r6
      0000E6 8D 83            [24]  285 	mov	dph,r5
      0000E8 8F F0            [24]  286 	mov	b,r7
      0000EA 22               [24]  287 	ret
      0000EB                        288 00107$:
                                    289 ;	bsearch.c:49: return(0);
      0000EB 90 00 00         [24]  290 	mov	dptr,#0x0000
      0000EE 75 F0 00         [24]  291 	mov	b,#0x00
                                    292 ;	bsearch.c:50: }
      0000F1 22               [24]  293 	ret
                                    294 	.area CSEG    (CODE)
                                    295 	.area CONST   (CODE)
                                    296 	.area XINIT   (CODE)
                                    297 	.area CABS    (ABS,CODE)
