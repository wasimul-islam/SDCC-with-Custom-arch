                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module bsearch
                                      6 	.optsdcc -mmcs51 --model-huge
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _bsearch_PARM_5
                                     12 	.globl _bsearch_PARM_4
                                     13 	.globl _bsearch_PARM_3
                                     14 	.globl _bsearch_PARM_2
                                     15 	.globl _bsearch
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; special function bits
                                     23 ;--------------------------------------------------------
                                     24 	.area RSEG    (ABS,DATA)
      000000                         25 	.org 0x0000
                                     26 ;--------------------------------------------------------
                                     27 ; overlayable register banks
                                     28 ;--------------------------------------------------------
                                     29 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         30 	.ds 8
                                     31 ;--------------------------------------------------------
                                     32 ; internal ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area DSEG    (DATA)
      000000                         35 _bsearch_sloc0_1_0:
      000000                         36 	.ds 2
      000002                         37 _bsearch_sloc1_1_0:
      000002                         38 	.ds 3
      000005                         39 _bsearch_sloc2_1_0:
      000005                         40 	.ds 3
                                     41 ;--------------------------------------------------------
                                     42 ; overlayable items in internal ram
                                     43 ;--------------------------------------------------------
                                     44 ;--------------------------------------------------------
                                     45 ; indirectly addressable internal ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area ISEG    (DATA)
                                     48 ;--------------------------------------------------------
                                     49 ; absolute internal ram data
                                     50 ;--------------------------------------------------------
                                     51 	.area IABS    (ABS,DATA)
                                     52 	.area IABS    (ABS,DATA)
                                     53 ;--------------------------------------------------------
                                     54 ; bit data
                                     55 ;--------------------------------------------------------
                                     56 	.area BSEG    (BIT)
                                     57 ;--------------------------------------------------------
                                     58 ; paged external ram data
                                     59 ;--------------------------------------------------------
                                     60 	.area PSEG    (PAG,XDATA)
                                     61 ;--------------------------------------------------------
                                     62 ; uninitialized external ram data
                                     63 ;--------------------------------------------------------
                                     64 	.area XSEG    (XDATA)
      000000                         65 _bsearch_PARM_2:
      000000                         66 	.ds 3
      000003                         67 _bsearch_PARM_3:
      000003                         68 	.ds 2
      000005                         69 _bsearch_PARM_4:
      000005                         70 	.ds 2
      000007                         71 _bsearch_PARM_5:
      000007                         72 	.ds 3
      00000A                         73 _bsearch_key_65536_39:
      00000A                         74 	.ds 3
      00000D                         75 _bsearch_left_131072_42:
      00000D                         76 	.ds 3
                                     77 ;--------------------------------------------------------
                                     78 ; absolute external ram data
                                     79 ;--------------------------------------------------------
                                     80 	.area XABS    (ABS,XDATA)
                                     81 ;--------------------------------------------------------
                                     82 ; initialized external ram data
                                     83 ;--------------------------------------------------------
                                     84 	.area XISEG   (XDATA)
                                     85 	.area HOME    (CODE)
                                     86 	.area GSINIT0 (CODE)
                                     87 	.area GSINIT1 (CODE)
                                     88 	.area GSINIT2 (CODE)
                                     89 	.area GSINIT3 (CODE)
                                     90 	.area GSINIT4 (CODE)
                                     91 	.area GSINIT5 (CODE)
                                     92 	.area GSINIT  (CODE)
                                     93 	.area GSFINAL (CODE)
                                     94 	.area CSEG    (CODE)
                                     95 ;--------------------------------------------------------
                                     96 ; global & static initialisations
                                     97 ;--------------------------------------------------------
                                     98 	.area HOME    (CODE)
                                     99 	.area GSINIT  (CODE)
                                    100 	.area GSFINAL (CODE)
                                    101 	.area GSINIT  (CODE)
                                    102 ;--------------------------------------------------------
                                    103 ; Home
                                    104 ;--------------------------------------------------------
                                    105 	.area HOME    (CODE)
                                    106 	.area HOME    (CODE)
                                    107 ;--------------------------------------------------------
                                    108 ; code
                                    109 ;--------------------------------------------------------
                                    110 	.area CSEG    (CODE)
                                    111 ;------------------------------------------------------------
                                    112 ;Allocation info for local variables in function 'bsearch'
                                    113 ;------------------------------------------------------------
                                    114 ;sloc0                     Allocated with name '_bsearch_sloc0_1_0'
                                    115 ;sloc1                     Allocated with name '_bsearch_sloc1_1_0'
                                    116 ;sloc2                     Allocated with name '_bsearch_sloc2_1_0'
                                    117 ;base                      Allocated with name '_bsearch_PARM_2'
                                    118 ;nmemb                     Allocated with name '_bsearch_PARM_3'
                                    119 ;size                      Allocated with name '_bsearch_PARM_4'
                                    120 ;compar                    Allocated with name '_bsearch_PARM_5'
                                    121 ;key                       Allocated with name '_bsearch_key_65536_39'
                                    122 ;left                      Allocated with name '_bsearch_left_131072_42'
                                    123 ;middle                    Allocated with name '_bsearch_middle_196608_43'
                                    124 ;c                         Allocated with name '_bsearch_c_196608_43'
                                    125 ;------------------------------------------------------------
                                    126 ;	bsearch.c:31: void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *) __reentrant)
                                    127 ;	-----------------------------------------
                                    128 ;	 function bsearch
                                    129 ;	-----------------------------------------
      000000                        130 _bsearch:
                           000007   131 	ar7 = 0x07
                           000006   132 	ar6 = 0x06
                           000005   133 	ar5 = 0x05
                           000004   134 	ar4 = 0x04
                           000003   135 	ar3 = 0x03
                           000002   136 	ar2 = 0x02
                           000001   137 	ar1 = 0x01
                           000000   138 	ar0 = 0x00
      000000 AF F0            [24]  139 	mov	r7,b
      000002 AE 83            [24]  140 	mov	r6,dph
      000004 E5 82            [12]  141 	mov	a,dpl
      000006 90r00r0A         [24]  142 	mov	dptr,#_bsearch_key_65536_39
      000009 F0               [24]  143 	movx	@dptr,a
      00000A EE               [12]  144 	mov	a,r6
      00000B A3               [24]  145 	inc	dptr
      00000C F0               [24]  146 	movx	@dptr,a
      00000D EF               [12]  147 	mov	a,r7
      00000E A3               [24]  148 	inc	dptr
      00000F F0               [24]  149 	movx	@dptr,a
                                    150 ;	bsearch.c:33: for(const char *left = base; nmemb;)
      000010 90r00r00         [24]  151 	mov	dptr,#_bsearch_PARM_2
      000013 E0               [24]  152 	movx	a,@dptr
      000014 FD               [12]  153 	mov	r5,a
      000015 A3               [24]  154 	inc	dptr
      000016 E0               [24]  155 	movx	a,@dptr
      000017 FE               [12]  156 	mov	r6,a
      000018 A3               [24]  157 	inc	dptr
      000019 E0               [24]  158 	movx	a,@dptr
      00001A FF               [12]  159 	mov	r7,a
      00001B 90r00r0D         [24]  160 	mov	dptr,#_bsearch_left_131072_42
      00001E ED               [12]  161 	mov	a,r5
      00001F F0               [24]  162 	movx	@dptr,a
      000020 EE               [12]  163 	mov	a,r6
      000021 A3               [24]  164 	inc	dptr
      000022 F0               [24]  165 	movx	@dptr,a
      000023 EF               [12]  166 	mov	a,r7
      000024 A3               [24]  167 	inc	dptr
      000025 F0               [24]  168 	movx	@dptr,a
      000026                        169 00109$:
      000026 90r00r03         [24]  170 	mov	dptr,#_bsearch_PARM_3
      000029 E0               [24]  171 	movx	a,@dptr
      00002A FE               [12]  172 	mov	r6,a
      00002B A3               [24]  173 	inc	dptr
      00002C E0               [24]  174 	movx	a,@dptr
      00002D FF               [12]  175 	mov	r7,a
      00002E 4E               [12]  176 	orl	a,r6
      00002F 70 03            [24]  177 	jnz	00129$
      000031 02r01r44         [24]  178 	ljmp	00107$
      000034                        179 00129$:
                                    180 ;	bsearch.c:35: const char *middle = left + nmemb / 2 * size;
      000034 8E 04            [24]  181 	mov	ar4,r6
      000036 EF               [12]  182 	mov	a,r7
      000037 C3               [12]  183 	clr	c
      000038 13               [12]  184 	rrc	a
      000039 CC               [12]  185 	xch	a,r4
      00003A 13               [12]  186 	rrc	a
      00003B CC               [12]  187 	xch	a,r4
      00003C FD               [12]  188 	mov	r5,a
      00003D 90r00r05         [24]  189 	mov	dptr,#_bsearch_PARM_4
      000040 E0               [24]  190 	movx	a,@dptr
      000041 FA               [12]  191 	mov	r2,a
      000042 A3               [24]  192 	inc	dptr
      000043 E0               [24]  193 	movx	a,@dptr
      000044 FB               [12]  194 	mov	r3,a
      000045 90r00r00         [24]  195 	mov	dptr,#__mulint_PARM_2
      000048 EA               [12]  196 	mov	a,r2
      000049 F0               [24]  197 	movx	@dptr,a
      00004A EB               [12]  198 	mov	a,r3
      00004B A3               [24]  199 	inc	dptr
      00004C F0               [24]  200 	movx	@dptr,a
      00004D 8C 82            [24]  201 	mov	dpl,r4
      00004F 8D 83            [24]  202 	mov	dph,r5
      000051 C0 07            [24]  203 	push	ar7
      000053 C0 06            [24]  204 	push	ar6
      000055 C0 05            [24]  205 	push	ar5
      000057 C0 04            [24]  206 	push	ar4
      000059 C0 03            [24]  207 	push	ar3
      00005B C0 02            [24]  208 	push	ar2
      00005D 12r00r00         [24]  209 	lcall	__mulint
      000060 85 82*00         [24]  210 	mov	_bsearch_sloc0_1_0,dpl
      000063 85 83*01         [24]  211 	mov	(_bsearch_sloc0_1_0 + 1),dph
      000066 D0 02            [24]  212 	pop	ar2
      000068 D0 03            [24]  213 	pop	ar3
      00006A D0 04            [24]  214 	pop	ar4
      00006C D0 05            [24]  215 	pop	ar5
      00006E D0 06            [24]  216 	pop	ar6
      000070 D0 07            [24]  217 	pop	ar7
      000072 C0 06            [24]  218 	push	ar6
      000074 C0 07            [24]  219 	push	ar7
      000076 90r00r0D         [24]  220 	mov	dptr,#_bsearch_left_131072_42
      000079 E0               [24]  221 	movx	a,@dptr
      00007A F9               [12]  222 	mov	r1,a
      00007B A3               [24]  223 	inc	dptr
      00007C E0               [24]  224 	movx	a,@dptr
      00007D FE               [12]  225 	mov	r6,a
      00007E A3               [24]  226 	inc	dptr
      00007F E0               [24]  227 	movx	a,@dptr
      000080 FF               [12]  228 	mov	r7,a
      000081 E5*00            [12]  229 	mov	a,_bsearch_sloc0_1_0
      000083 29               [12]  230 	add	a,r1
      000084 F5*02            [12]  231 	mov	_bsearch_sloc1_1_0,a
      000086 E5*01            [12]  232 	mov	a,(_bsearch_sloc0_1_0 + 1)
      000088 3E               [12]  233 	addc	a,r6
      000089 F5*03            [12]  234 	mov	(_bsearch_sloc1_1_0 + 1),a
      00008B 8F*04            [24]  235 	mov	(_bsearch_sloc1_1_0 + 2),r7
                                    236 ;	bsearch.c:36: int c = (*compar)(key, middle);
      00008D A9*02            [24]  237 	mov	r1,_bsearch_sloc1_1_0
      00008F AE*03            [24]  238 	mov	r6,(_bsearch_sloc1_1_0 + 1)
      000091 AF*04            [24]  239 	mov	r7,(_bsearch_sloc1_1_0 + 2)
      000093 89*05            [24]  240 	mov	_bsearch_sloc2_1_0,r1
      000095 8E*06            [24]  241 	mov	(_bsearch_sloc2_1_0 + 1),r6
      000097 8F*07            [24]  242 	mov	(_bsearch_sloc2_1_0 + 2),r7
      000099 90r00r0A         [24]  243 	mov	dptr,#_bsearch_key_65536_39
      00009C E0               [24]  244 	movx	a,@dptr
      00009D F8               [12]  245 	mov	r0,a
      00009E A3               [24]  246 	inc	dptr
      00009F E0               [24]  247 	movx	a,@dptr
      0000A0 FE               [12]  248 	mov	r6,a
      0000A1 A3               [24]  249 	inc	dptr
      0000A2 E0               [24]  250 	movx	a,@dptr
      0000A3 FF               [12]  251 	mov	r7,a
      0000A4 C0 07            [24]  252 	push	ar7
      0000A6 C0 06            [24]  253 	push	ar6
      0000A8 C0 05            [24]  254 	push	ar5
      0000AA C0 04            [24]  255 	push	ar4
      0000AC C0 03            [24]  256 	push	ar3
      0000AE C0 02            [24]  257 	push	ar2
      0000B0 C0*05            [24]  258 	push	_bsearch_sloc2_1_0
      0000B2 C0*06            [24]  259 	push	(_bsearch_sloc2_1_0 + 1)
      0000B4 C0*07            [24]  260 	push	(_bsearch_sloc2_1_0 + 2)
      0000B6 90r00r07         [24]  261 	mov	dptr,#_bsearch_PARM_5
      0000B9 E0               [24]  262 	movx	a,@dptr
      0000BA C0 E0            [24]  263 	push	acc
      0000BC A3               [24]  264 	inc	dptr
      0000BD E0               [24]  265 	movx	a,@dptr
      0000BE C0 E0            [24]  266 	push	acc
      0000C0 A3               [24]  267 	inc	dptr
      0000C1 E0               [24]  268 	movx	a,@dptr
      0000C2 C0 E0            [24]  269 	push	acc
      0000C4 88 82            [24]  270 	mov	dpl,r0
      0000C6 8E 83            [24]  271 	mov	dph,r6
      0000C8 8F F0            [24]  272 	mov	b,r7
      0000CA D0 02            [24]  273 	pop	ar2
      0000CC D0 01            [24]  274 	pop	ar1
      0000CE D0 00            [24]  275 	pop	ar0
      0000D0 12r00r00         [24]  276 	lcall	__sdcc_banked_call
      0000D3 85 82*05         [24]  277 	mov	_bsearch_sloc2_1_0,dpl
      0000D6 85 83*06         [24]  278 	mov	(_bsearch_sloc2_1_0 + 1),dph
      0000D9 15 81            [12]  279 	dec	sp
      0000DB 15 81            [12]  280 	dec	sp
      0000DD 15 81            [12]  281 	dec	sp
      0000DF D0 02            [24]  282 	pop	ar2
      0000E1 D0 03            [24]  283 	pop	ar3
      0000E3 D0 04            [24]  284 	pop	ar4
      0000E5 D0 05            [24]  285 	pop	ar5
      0000E7 D0 06            [24]  286 	pop	ar6
      0000E9 D0 07            [24]  287 	pop	ar7
                                    288 ;	bsearch.c:38: if(c < 0)
      0000EB E5*06            [12]  289 	mov	a,(_bsearch_sloc2_1_0 + 1)
      0000ED D0 07            [24]  290 	pop	ar7
      0000EF D0 06            [24]  291 	pop	ar6
      0000F1 30 E7 0B         [24]  292 	jnb	acc.7,00105$
                                    293 ;	bsearch.c:39: nmemb = nmemb / 2;	
      0000F4 90r00r03         [24]  294 	mov	dptr,#_bsearch_PARM_3
      0000F7 EC               [12]  295 	mov	a,r4
      0000F8 F0               [24]  296 	movx	@dptr,a
      0000F9 ED               [12]  297 	mov	a,r5
      0000FA A3               [24]  298 	inc	dptr
      0000FB F0               [24]  299 	movx	@dptr,a
      0000FC 02r00r26         [24]  300 	ljmp	00109$
      0000FF                        301 00105$:
                                    302 ;	bsearch.c:40: else if(c > 0)
      0000FF C3               [12]  303 	clr	c
      000100 E4               [12]  304 	clr	a
      000101 95*05            [12]  305 	subb	a,_bsearch_sloc2_1_0
      000103 74 80            [12]  306 	mov	a,#(0x00 ^ 0x80)
      000105 85*06 F0         [24]  307 	mov	b,(_bsearch_sloc2_1_0 + 1)
      000108 63 F0 80         [24]  308 	xrl	b,#0x80
      00010B 95 F0            [12]  309 	subb	a,b
      00010D 50 27            [24]  310 	jnc	00102$
                                    311 ;	bsearch.c:42: left = middle + size;
      00010F 90r00r0D         [24]  312 	mov	dptr,#_bsearch_left_131072_42
      000112 EA               [12]  313 	mov	a,r2
      000113 25*02            [12]  314 	add	a,_bsearch_sloc1_1_0
      000115 F0               [24]  315 	movx	@dptr,a
      000116 EB               [12]  316 	mov	a,r3
      000117 35*03            [12]  317 	addc	a,(_bsearch_sloc1_1_0 + 1)
      000119 A3               [24]  318 	inc	dptr
      00011A F0               [24]  319 	movx	@dptr,a
      00011B E5*04            [12]  320 	mov	a,(_bsearch_sloc1_1_0 + 2)
      00011D A3               [24]  321 	inc	dptr
      00011E F0               [24]  322 	movx	@dptr,a
                                    323 ;	bsearch.c:43: nmemb = (nmemb - 1) / 2;
      00011F 1E               [12]  324 	dec	r6
      000120 BE FF 01         [24]  325 	cjne	r6,#0xff,00132$
      000123 1F               [12]  326 	dec	r7
      000124                        327 00132$:
      000124 EF               [12]  328 	mov	a,r7
      000125 C3               [12]  329 	clr	c
      000126 13               [12]  330 	rrc	a
      000127 CE               [12]  331 	xch	a,r6
      000128 13               [12]  332 	rrc	a
      000129 CE               [12]  333 	xch	a,r6
      00012A FF               [12]  334 	mov	r7,a
      00012B 90r00r03         [24]  335 	mov	dptr,#_bsearch_PARM_3
      00012E EE               [12]  336 	mov	a,r6
      00012F F0               [24]  337 	movx	@dptr,a
      000130 EF               [12]  338 	mov	a,r7
      000131 A3               [24]  339 	inc	dptr
      000132 F0               [24]  340 	movx	@dptr,a
      000133 02r00r26         [24]  341 	ljmp	00109$
      000136                        342 00102$:
                                    343 ;	bsearch.c:46: return(middle);
      000136 AD*02            [24]  344 	mov	r5,_bsearch_sloc1_1_0
      000138 AE*03            [24]  345 	mov	r6,(_bsearch_sloc1_1_0 + 1)
      00013A AF*04            [24]  346 	mov	r7,(_bsearch_sloc1_1_0 + 2)
      00013C 8D 82            [24]  347 	mov	dpl,r5
      00013E 8E 83            [24]  348 	mov	dph,r6
      000140 8F F0            [24]  349 	mov	b,r7
      000142 80 06            [24]  350 	sjmp	00111$
      000144                        351 00107$:
                                    352 ;	bsearch.c:49: return(0);
      000144 90 00 00         [24]  353 	mov	dptr,#0x0000
      000147 75 F0 00         [24]  354 	mov	b,#0x00
      00014A                        355 00111$:
                                    356 ;	bsearch.c:50: }
      00014A 02r00r00         [24]  357 	ljmp	__sdcc_banked_ret
                                    358 	.area CSEG    (CODE)
                                    359 	.area CONST   (CODE)
                                    360 	.area XINIT   (CODE)
                                    361 	.area CABS    (ABS,CODE)
