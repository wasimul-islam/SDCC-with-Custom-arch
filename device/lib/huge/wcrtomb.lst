                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module wcrtomb
                                      6 	.optsdcc -mmcs51 --model-huge
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _wctomb
                                     12 	.globl _wcrtomb_PARM_3
                                     13 	.globl _wcrtomb_PARM_2
                                     14 	.globl _wcrtomb
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
                                     34 ;--------------------------------------------------------
                                     35 ; overlayable items in internal ram
                                     36 ;--------------------------------------------------------
                                     37 ;--------------------------------------------------------
                                     38 ; indirectly addressable internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area ISEG    (DATA)
                                     41 ;--------------------------------------------------------
                                     42 ; absolute internal ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area IABS    (ABS,DATA)
                                     45 	.area IABS    (ABS,DATA)
                                     46 ;--------------------------------------------------------
                                     47 ; bit data
                                     48 ;--------------------------------------------------------
                                     49 	.area BSEG    (BIT)
                                     50 ;--------------------------------------------------------
                                     51 ; paged external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area PSEG    (PAG,XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; uninitialized external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XSEG    (XDATA)
      000000                         58 _wcrtomb_PARM_2:
      000000                         59 	.ds 4
      000004                         60 _wcrtomb_PARM_3:
      000004                         61 	.ds 3
      000007                         62 _wcrtomb_s_65536_47:
      000007                         63 	.ds 3
                                     64 ;--------------------------------------------------------
                                     65 ; absolute external ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area XABS    (ABS,XDATA)
                                     68 ;--------------------------------------------------------
                                     69 ; initialized external ram data
                                     70 ;--------------------------------------------------------
                                     71 	.area XISEG   (XDATA)
                                     72 	.area HOME    (CODE)
                                     73 	.area GSINIT0 (CODE)
                                     74 	.area GSINIT1 (CODE)
                                     75 	.area GSINIT2 (CODE)
                                     76 	.area GSINIT3 (CODE)
                                     77 	.area GSINIT4 (CODE)
                                     78 	.area GSINIT5 (CODE)
                                     79 	.area GSINIT  (CODE)
                                     80 	.area GSFINAL (CODE)
                                     81 	.area CSEG    (CODE)
                                     82 ;--------------------------------------------------------
                                     83 ; global & static initialisations
                                     84 ;--------------------------------------------------------
                                     85 	.area HOME    (CODE)
                                     86 	.area GSINIT  (CODE)
                                     87 	.area GSFINAL (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 ;--------------------------------------------------------
                                     90 ; Home
                                     91 ;--------------------------------------------------------
                                     92 	.area HOME    (CODE)
                                     93 	.area HOME    (CODE)
                                     94 ;--------------------------------------------------------
                                     95 ; code
                                     96 ;--------------------------------------------------------
                                     97 	.area CSEG    (CODE)
                                     98 ;------------------------------------------------------------
                                     99 ;Allocation info for local variables in function 'wcrtomb'
                                    100 ;------------------------------------------------------------
                                    101 ;wc                        Allocated with name '_wcrtomb_PARM_2'
                                    102 ;ps                        Allocated with name '_wcrtomb_PARM_3'
                                    103 ;s                         Allocated with name '_wcrtomb_s_65536_47'
                                    104 ;ret                       Allocated with name '_wcrtomb_ret_65536_48'
                                    105 ;------------------------------------------------------------
                                    106 ;	wcrtomb.c:34: size_t wcrtomb(char *restrict s, wchar_t wc, mbstate_t *restrict ps)
                                    107 ;	-----------------------------------------
                                    108 ;	 function wcrtomb
                                    109 ;	-----------------------------------------
      000000                        110 _wcrtomb:
                           000007   111 	ar7 = 0x07
                           000006   112 	ar6 = 0x06
                           000005   113 	ar5 = 0x05
                           000004   114 	ar4 = 0x04
                           000003   115 	ar3 = 0x03
                           000002   116 	ar2 = 0x02
                           000001   117 	ar1 = 0x01
                           000000   118 	ar0 = 0x00
      000000 AF F0            [24]  119 	mov	r7,b
      000002 AE 83            [24]  120 	mov	r6,dph
      000004 E5 82            [12]  121 	mov	a,dpl
      000006 90r00r07         [24]  122 	mov	dptr,#_wcrtomb_s_65536_47
      000009 F0               [24]  123 	movx	@dptr,a
      00000A EE               [12]  124 	mov	a,r6
      00000B A3               [24]  125 	inc	dptr
      00000C F0               [24]  126 	movx	@dptr,a
      00000D EF               [12]  127 	mov	a,r7
      00000E A3               [24]  128 	inc	dptr
      00000F F0               [24]  129 	movx	@dptr,a
                                    130 ;	wcrtomb.c:40: ret = wctomb(s, wc);
      000010 90r00r07         [24]  131 	mov	dptr,#_wcrtomb_s_65536_47
      000013 E0               [24]  132 	movx	a,@dptr
      000014 FD               [12]  133 	mov	r5,a
      000015 A3               [24]  134 	inc	dptr
      000016 E0               [24]  135 	movx	a,@dptr
      000017 FE               [12]  136 	mov	r6,a
      000018 A3               [24]  137 	inc	dptr
      000019 E0               [24]  138 	movx	a,@dptr
      00001A FF               [12]  139 	mov	r7,a
      00001B 90r00r00         [24]  140 	mov	dptr,#_wcrtomb_PARM_2
      00001E E0               [24]  141 	movx	a,@dptr
      00001F F9               [12]  142 	mov	r1,a
      000020 A3               [24]  143 	inc	dptr
      000021 E0               [24]  144 	movx	a,@dptr
      000022 FA               [12]  145 	mov	r2,a
      000023 A3               [24]  146 	inc	dptr
      000024 E0               [24]  147 	movx	a,@dptr
      000025 FB               [12]  148 	mov	r3,a
      000026 A3               [24]  149 	inc	dptr
      000027 E0               [24]  150 	movx	a,@dptr
      000028 FC               [12]  151 	mov	r4,a
      000029 90r00r00         [24]  152 	mov	dptr,#_wctomb_PARM_2
      00002C E9               [12]  153 	mov	a,r1
      00002D F0               [24]  154 	movx	@dptr,a
      00002E EA               [12]  155 	mov	a,r2
      00002F A3               [24]  156 	inc	dptr
      000030 F0               [24]  157 	movx	@dptr,a
      000031 EB               [12]  158 	mov	a,r3
      000032 A3               [24]  159 	inc	dptr
      000033 F0               [24]  160 	movx	@dptr,a
      000034 EC               [12]  161 	mov	a,r4
      000035 A3               [24]  162 	inc	dptr
      000036 F0               [24]  163 	movx	@dptr,a
      000037 8D 82            [24]  164 	mov	dpl,r5
      000039 8E 83            [24]  165 	mov	dph,r6
      00003B 8F F0            [24]  166 	mov	b,r7
      00003D 78r00            [12]  167 	mov	r0,#_wctomb
      00003F 79s00            [12]  168 	mov	r1,#(_wctomb >> 8)
      000041 7As00            [12]  169 	mov	r2,#(_wctomb >> 16)
      000043 12r00r00         [24]  170 	lcall	__sdcc_banked_call
      000046 AE 82            [24]  171 	mov	r6,dpl
      000048 AF 83            [24]  172 	mov	r7,dph
                                    173 ;	wcrtomb.c:42: if(ret == (size_t)(-1))
      00004A BE FF 0C         [24]  174 	cjne	r6,#0xff,00102$
      00004D BF FF 09         [24]  175 	cjne	r7,#0xff,00102$
                                    176 ;	wcrtomb.c:43: errno = EILSEQ;
      000050 90r00r00         [24]  177 	mov	dptr,#_errno
      000053 74 54            [12]  178 	mov	a,#0x54
      000055 F0               [24]  179 	movx	@dptr,a
      000056 E4               [12]  180 	clr	a
      000057 A3               [24]  181 	inc	dptr
      000058 F0               [24]  182 	movx	@dptr,a
      000059                        183 00102$:
                                    184 ;	wcrtomb.c:45: return(ret);
      000059 8E 82            [24]  185 	mov	dpl,r6
      00005B 8F 83            [24]  186 	mov	dph,r7
                                    187 ;	wcrtomb.c:46: }
      00005D 02r00r00         [24]  188 	ljmp	__sdcc_banked_ret
                                    189 	.area CSEG    (CODE)
                                    190 	.area CONST   (CODE)
                                    191 	.area XINIT   (CODE)
                                    192 	.area CABS    (ABS,CODE)
