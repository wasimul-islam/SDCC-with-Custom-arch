                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module _memset
                                      6 	.optsdcc -mmcs51 --model-huge
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _memset_PARM_3
                                     12 	.globl _memset_PARM_2
                                     13 	.globl _memset
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 	.area RSEG    (ABS,DATA)
      000000                         18 	.org 0x0000
                                     19 ;--------------------------------------------------------
                                     20 ; special function bits
                                     21 ;--------------------------------------------------------
                                     22 	.area RSEG    (ABS,DATA)
      000000                         23 	.org 0x0000
                                     24 ;--------------------------------------------------------
                                     25 ; overlayable register banks
                                     26 ;--------------------------------------------------------
                                     27 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         28 	.ds 8
                                     29 ;--------------------------------------------------------
                                     30 ; internal ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area DSEG    (DATA)
                                     33 ;--------------------------------------------------------
                                     34 ; overlayable items in internal ram
                                     35 ;--------------------------------------------------------
                                     36 	.area	OSEG    (OVR,DATA)
                                     37 ;--------------------------------------------------------
                                     38 ; indirectly addressable internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area ISEG    (DATA)
                                     41 ;--------------------------------------------------------
                                     42 ; absolute internal ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area IABS    (ABS,DATA)
                                     45 	.area IABS    (ABS,DATA)
                                     46 ;--------------------------------------------------------
                                     47 ; bit data
                                     48 ;--------------------------------------------------------
                                     49 	.area BSEG    (BIT)
                                     50 ;--------------------------------------------------------
                                     51 ; paged external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area PSEG    (PAG,XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; uninitialized external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XSEG    (XDATA)
      000000                         58 _memset_PARM_2:
      000000                         59 	.ds 1
      000001                         60 _memset_PARM_3:
      000001                         61 	.ds 2
      000003                         62 _memset_s_65536_64:
      000003                         63 	.ds 3
                                     64 ;--------------------------------------------------------
                                     65 ; absolute external ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area XABS    (ABS,XDATA)
                                     68 ;--------------------------------------------------------
                                     69 ; initialized external ram data
                                     70 ;--------------------------------------------------------
                                     71 	.area XISEG   (XDATA)
                                     72 	.area HOME    (CODE)
                                     73 	.area GSINIT0 (CODE)
                                     74 	.area GSINIT1 (CODE)
                                     75 	.area GSINIT2 (CODE)
                                     76 	.area GSINIT3 (CODE)
                                     77 	.area GSINIT4 (CODE)
                                     78 	.area GSINIT5 (CODE)
                                     79 	.area GSINIT  (CODE)
                                     80 	.area GSFINAL (CODE)
                                     81 	.area CSEG    (CODE)
                                     82 ;--------------------------------------------------------
                                     83 ; global & static initialisations
                                     84 ;--------------------------------------------------------
                                     85 	.area HOME    (CODE)
                                     86 	.area GSINIT  (CODE)
                                     87 	.area GSFINAL (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 ;--------------------------------------------------------
                                     90 ; Home
                                     91 ;--------------------------------------------------------
                                     92 	.area HOME    (CODE)
                                     93 	.area HOME    (CODE)
                                     94 ;--------------------------------------------------------
                                     95 ; code
                                     96 ;--------------------------------------------------------
                                     97 	.area CSEG    (CODE)
                                     98 ;------------------------------------------------------------
                                     99 ;Allocation info for local variables in function 'memset'
                                    100 ;------------------------------------------------------------
                                    101 ;c                         Allocated with name '_memset_PARM_2'
                                    102 ;n                         Allocated with name '_memset_PARM_3'
                                    103 ;s                         Allocated with name '_memset_s_65536_64'
                                    104 ;dst                       Allocated with name '_memset_dst_131072_66'
                                    105 ;sz                        Allocated to registers r4 r5 
                                    106 ;data                      Allocated to registers r2 
                                    107 ;------------------------------------------------------------
                                    108 ;	_memset.c:42: void *memset (void *s, unsigned char c, size_t n)
                                    109 ;	-----------------------------------------
                                    110 ;	 function memset
                                    111 ;	-----------------------------------------
      000000                        112 _memset:
                           000007   113 	ar7 = 0x07
                           000006   114 	ar6 = 0x06
                           000005   115 	ar5 = 0x05
                           000004   116 	ar4 = 0x04
                           000003   117 	ar3 = 0x03
                           000002   118 	ar2 = 0x02
                           000001   119 	ar1 = 0x01
                           000000   120 	ar0 = 0x00
      000000 AF F0            [24]  121 	mov	r7,b
      000002 AE 83            [24]  122 	mov	r6,dph
      000004 E5 82            [12]  123 	mov	a,dpl
      000006 90r00r03         [24]  124 	mov	dptr,#_memset_s_65536_64
      000009 F0               [24]  125 	movx	@dptr,a
      00000A EE               [12]  126 	mov	a,r6
      00000B A3               [24]  127 	inc	dptr
      00000C F0               [24]  128 	movx	@dptr,a
      00000D EF               [12]  129 	mov	a,r7
      00000E A3               [24]  130 	inc	dptr
      00000F F0               [24]  131 	movx	@dptr,a
                                    132 ;	_memset.c:189: register size_t sz = n;
      000010 90r00r01         [24]  133 	mov	dptr,#_memset_PARM_3
      000013 E0               [24]  134 	movx	a,@dptr
      000014 FE               [12]  135 	mov	r6,a
      000015 A3               [24]  136 	inc	dptr
      000016 E0               [24]  137 	movx	a,@dptr
      000017 FF               [12]  138 	mov	r7,a
      000018 8E 04            [24]  139 	mov	ar4,r6
      00001A 8F 05            [24]  140 	mov	ar5,r7
                                    141 ;	_memset.c:190: if (sz != 0)
      00001C EE               [12]  142 	mov	a,r6
      00001D 4F               [12]  143 	orl	a,r7
      00001E 60 28            [24]  144 	jz	00105$
                                    145 ;	_memset.c:192: register char *dst = s;
      000020 90r00r03         [24]  146 	mov	dptr,#_memset_s_65536_64
      000023 E0               [24]  147 	movx	a,@dptr
      000024 FB               [12]  148 	mov	r3,a
      000025 A3               [24]  149 	inc	dptr
      000026 E0               [24]  150 	movx	a,@dptr
      000027 FE               [12]  151 	mov	r6,a
      000028 A3               [24]  152 	inc	dptr
      000029 E0               [24]  153 	movx	a,@dptr
      00002A FF               [12]  154 	mov	r7,a
                                    155 ;	_memset.c:193: register char data = (char)c;
      00002B 90r00r00         [24]  156 	mov	dptr,#_memset_PARM_2
      00002E E0               [24]  157 	movx	a,@dptr
      00002F FA               [12]  158 	mov	r2,a
                                    159 ;	_memset.c:194: do {
      000030                        160 00101$:
                                    161 ;	_memset.c:195: *dst++ = data;
      000030 8B 82            [24]  162 	mov	dpl,r3
      000032 8E 83            [24]  163 	mov	dph,r6
      000034 8F F0            [24]  164 	mov	b,r7
      000036 EA               [12]  165 	mov	a,r2
      000037 12r00r00         [24]  166 	lcall	__gptrput
      00003A A3               [24]  167 	inc	dptr
      00003B AB 82            [24]  168 	mov	r3,dpl
      00003D AE 83            [24]  169 	mov	r6,dph
                                    170 ;	_memset.c:196: } while (--sz);
      00003F 1C               [12]  171 	dec	r4
      000040 BC FF 01         [24]  172 	cjne	r4,#0xff,00118$
      000043 1D               [12]  173 	dec	r5
      000044                        174 00118$:
      000044 EC               [12]  175 	mov	a,r4
      000045 4D               [12]  176 	orl	a,r5
      000046 70 E8            [24]  177 	jnz	00101$
      000048                        178 00105$:
                                    179 ;	_memset.c:198: return s;
      000048 90r00r03         [24]  180 	mov	dptr,#_memset_s_65536_64
      00004B E0               [24]  181 	movx	a,@dptr
      00004C FD               [12]  182 	mov	r5,a
      00004D A3               [24]  183 	inc	dptr
      00004E E0               [24]  184 	movx	a,@dptr
      00004F FE               [12]  185 	mov	r6,a
      000050 A3               [24]  186 	inc	dptr
      000051 E0               [24]  187 	movx	a,@dptr
      000052 FF               [12]  188 	mov	r7,a
      000053 8D 82            [24]  189 	mov	dpl,r5
      000055 8E 83            [24]  190 	mov	dph,r6
      000057 8F F0            [24]  191 	mov	b,r7
                                    192 ;	_memset.c:199: }
      000059 02r00r00         [24]  193 	ljmp	__sdcc_banked_ret
                                    194 	.area CSEG    (CODE)
                                    195 	.area CONST   (CODE)
                                    196 	.area XINIT   (CODE)
                                    197 	.area CABS    (ABS,CODE)
