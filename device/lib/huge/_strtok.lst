                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module _strtok
                                      6 	.optsdcc -mmcs51 --model-huge
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _strchr
                                     12 	.globl _strtok_PARM_2
                                     13 	.globl _strtok
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 	.area RSEG    (ABS,DATA)
      000000                         18 	.org 0x0000
                                     19 ;--------------------------------------------------------
                                     20 ; special function bits
                                     21 ;--------------------------------------------------------
                                     22 	.area RSEG    (ABS,DATA)
      000000                         23 	.org 0x0000
                                     24 ;--------------------------------------------------------
                                     25 ; overlayable register banks
                                     26 ;--------------------------------------------------------
                                     27 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         28 	.ds 8
                                     29 ;--------------------------------------------------------
                                     30 ; internal ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area DSEG    (DATA)
                                     33 ;--------------------------------------------------------
                                     34 ; overlayable items in internal ram
                                     35 ;--------------------------------------------------------
                                     36 ;--------------------------------------------------------
                                     37 ; indirectly addressable internal ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area ISEG    (DATA)
                                     40 ;--------------------------------------------------------
                                     41 ; absolute internal ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area IABS    (ABS,DATA)
                                     44 	.area IABS    (ABS,DATA)
                                     45 ;--------------------------------------------------------
                                     46 ; bit data
                                     47 ;--------------------------------------------------------
                                     48 	.area BSEG    (BIT)
                                     49 ;--------------------------------------------------------
                                     50 ; paged external ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area PSEG    (PAG,XDATA)
                                     53 ;--------------------------------------------------------
                                     54 ; uninitialized external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area XSEG    (XDATA)
      000000                         57 _strtok_PARM_2:
      000000                         58 	.ds 3
      000003                         59 _strtok_str_65536_26:
      000003                         60 	.ds 3
      000006                         61 _strtok_s_65536_27:
      000006                         62 	.ds 3
      000009                         63 _strtok_s1_65536_27:
      000009                         64 	.ds 3
                                     65 ;--------------------------------------------------------
                                     66 ; absolute external ram data
                                     67 ;--------------------------------------------------------
                                     68 	.area XABS    (ABS,XDATA)
                                     69 ;--------------------------------------------------------
                                     70 ; initialized external ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area XISEG   (XDATA)
                                     73 	.area HOME    (CODE)
                                     74 	.area GSINIT0 (CODE)
                                     75 	.area GSINIT1 (CODE)
                                     76 	.area GSINIT2 (CODE)
                                     77 	.area GSINIT3 (CODE)
                                     78 	.area GSINIT4 (CODE)
                                     79 	.area GSINIT5 (CODE)
                                     80 	.area GSINIT  (CODE)
                                     81 	.area GSFINAL (CODE)
                                     82 	.area CSEG    (CODE)
                                     83 ;--------------------------------------------------------
                                     84 ; global & static initialisations
                                     85 ;--------------------------------------------------------
                                     86 	.area HOME    (CODE)
                                     87 	.area GSINIT  (CODE)
                                     88 	.area GSFINAL (CODE)
                                     89 	.area GSINIT  (CODE)
                                     90 ;--------------------------------------------------------
                                     91 ; Home
                                     92 ;--------------------------------------------------------
                                     93 	.area HOME    (CODE)
                                     94 	.area HOME    (CODE)
                                     95 ;--------------------------------------------------------
                                     96 ; code
                                     97 ;--------------------------------------------------------
                                     98 	.area CSEG    (CODE)
                                     99 ;------------------------------------------------------------
                                    100 ;Allocation info for local variables in function 'strtok'
                                    101 ;------------------------------------------------------------
                                    102 ;control                   Allocated with name '_strtok_PARM_2'
                                    103 ;str                       Allocated with name '_strtok_str_65536_26'
                                    104 ;s                         Allocated with name '_strtok_s_65536_27'
                                    105 ;s1                        Allocated with name '_strtok_s1_65536_27'
                                    106 ;------------------------------------------------------------
                                    107 ;	_strtok.c:36: char * strtok ( char * str, const char * control )
                                    108 ;	-----------------------------------------
                                    109 ;	 function strtok
                                    110 ;	-----------------------------------------
      000000                        111 _strtok:
                           000007   112 	ar7 = 0x07
                           000006   113 	ar6 = 0x06
                           000005   114 	ar5 = 0x05
                           000004   115 	ar4 = 0x04
                           000003   116 	ar3 = 0x03
                           000002   117 	ar2 = 0x02
                           000001   118 	ar1 = 0x01
                           000000   119 	ar0 = 0x00
      000000 AF F0            [24]  120 	mov	r7,b
      000002 AE 83            [24]  121 	mov	r6,dph
      000004 E5 82            [12]  122 	mov	a,dpl
      000006 90r00r03         [24]  123 	mov	dptr,#_strtok_str_65536_26
      000009 F0               [24]  124 	movx	@dptr,a
      00000A EE               [12]  125 	mov	a,r6
      00000B A3               [24]  126 	inc	dptr
      00000C F0               [24]  127 	movx	@dptr,a
      00000D EF               [12]  128 	mov	a,r7
      00000E A3               [24]  129 	inc	dptr
      00000F F0               [24]  130 	movx	@dptr,a
                                    131 ;	_strtok.c:41: if ( str )
      000010 90r00r03         [24]  132 	mov	dptr,#_strtok_str_65536_26
      000013 E0               [24]  133 	movx	a,@dptr
      000014 FD               [12]  134 	mov	r5,a
      000015 A3               [24]  135 	inc	dptr
      000016 E0               [24]  136 	movx	a,@dptr
      000017 FE               [12]  137 	mov	r6,a
      000018 A3               [24]  138 	inc	dptr
      000019 E0               [24]  139 	movx	a,@dptr
      00001A FF               [12]  140 	mov	r7,a
      00001B 90r00r03         [24]  141 	mov	dptr,#_strtok_str_65536_26
      00001E E0               [24]  142 	movx	a,@dptr
      00001F F5 F0            [12]  143 	mov	b,a
      000021 A3               [24]  144 	inc	dptr
      000022 E0               [24]  145 	movx	a,@dptr
      000023 45 F0            [12]  146 	orl	a,b
      000025 60 0B            [24]  147 	jz	00102$
                                    148 ;	_strtok.c:42: s = str;
      000027 90r00r06         [24]  149 	mov	dptr,#_strtok_s_65536_27
      00002A ED               [12]  150 	mov	a,r5
      00002B F0               [24]  151 	movx	@dptr,a
      00002C EE               [12]  152 	mov	a,r6
      00002D A3               [24]  153 	inc	dptr
      00002E F0               [24]  154 	movx	@dptr,a
      00002F EF               [12]  155 	mov	a,r7
      000030 A3               [24]  156 	inc	dptr
      000031 F0               [24]  157 	movx	@dptr,a
      000032                        158 00102$:
                                    159 ;	_strtok.c:43: if ( !s )
      000032 90r00r06         [24]  160 	mov	dptr,#_strtok_s_65536_27
      000035 E0               [24]  161 	movx	a,@dptr
      000036 F5 F0            [12]  162 	mov	b,a
      000038 A3               [24]  163 	inc	dptr
      000039 E0               [24]  164 	movx	a,@dptr
      00003A 45 F0            [12]  165 	orl	a,b
                                    166 ;	_strtok.c:44: return NULL;
      00003C 70 08            [24]  167 	jnz	00108$
      00003E 90 00 00         [24]  168 	mov	dptr,#0x0000
      000041 F5 F0            [12]  169 	mov	b,a
      000043 02r00r00         [24]  170 	ljmp	__sdcc_banked_ret
                                    171 ;	_strtok.c:46: while (*s) {
      000046                        172 00108$:
      000046 90r00r06         [24]  173 	mov	dptr,#_strtok_s_65536_27
      000049 E0               [24]  174 	movx	a,@dptr
      00004A FD               [12]  175 	mov	r5,a
      00004B A3               [24]  176 	inc	dptr
      00004C E0               [24]  177 	movx	a,@dptr
      00004D FE               [12]  178 	mov	r6,a
      00004E A3               [24]  179 	inc	dptr
      00004F E0               [24]  180 	movx	a,@dptr
      000050 FF               [12]  181 	mov	r7,a
      000051 8D 82            [24]  182 	mov	dpl,r5
      000053 8E 83            [24]  183 	mov	dph,r6
      000055 8F F0            [24]  184 	mov	b,r7
      000057 12r00r00         [24]  185 	lcall	__gptrget
      00005A FF               [12]  186 	mov	r7,a
      00005B 60 37            [24]  187 	jz	00110$
                                    188 ;	_strtok.c:47: if (strchr(control,*s))
      00005D 90r00r00         [24]  189 	mov	dptr,#_strtok_PARM_2
      000060 E0               [24]  190 	movx	a,@dptr
      000061 FC               [12]  191 	mov	r4,a
      000062 A3               [24]  192 	inc	dptr
      000063 E0               [24]  193 	movx	a,@dptr
      000064 FD               [12]  194 	mov	r5,a
      000065 A3               [24]  195 	inc	dptr
      000066 E0               [24]  196 	movx	a,@dptr
      000067 FE               [12]  197 	mov	r6,a
      000068 90r00r00         [24]  198 	mov	dptr,#_strchr_PARM_2
      00006B EF               [12]  199 	mov	a,r7
      00006C F0               [24]  200 	movx	@dptr,a
      00006D 8C 82            [24]  201 	mov	dpl,r4
      00006F 8D 83            [24]  202 	mov	dph,r5
      000071 8E F0            [24]  203 	mov	b,r6
      000073 78r00            [12]  204 	mov	r0,#_strchr
      000075 79s00            [12]  205 	mov	r1,#(_strchr >> 8)
      000077 7As00            [12]  206 	mov	r2,#(_strchr >> 16)
      000079 12r00r00         [24]  207 	lcall	__sdcc_banked_call
      00007C AD 82            [24]  208 	mov	r5,dpl
      00007E AE 83            [24]  209 	mov	r6,dph
      000080 AF F0            [24]  210 	mov	r7,b
      000082 ED               [12]  211 	mov	a,r5
      000083 4E               [12]  212 	orl	a,r6
      000084 60 0E            [24]  213 	jz	00110$
                                    214 ;	_strtok.c:48: s++;
      000086 90r00r06         [24]  215 	mov	dptr,#_strtok_s_65536_27
      000089 E0               [24]  216 	movx	a,@dptr
      00008A 24 01            [12]  217 	add	a,#0x01
      00008C F0               [24]  218 	movx	@dptr,a
      00008D A3               [24]  219 	inc	dptr
      00008E E0               [24]  220 	movx	a,@dptr
      00008F 34 00            [12]  221 	addc	a,#0x00
      000091 F0               [24]  222 	movx	@dptr,a
                                    223 ;	_strtok.c:50: break;
      000092 80 B2            [24]  224 	sjmp	00108$
      000094                        225 00110$:
                                    226 ;	_strtok.c:53: s1 = s;
      000094 90r00r06         [24]  227 	mov	dptr,#_strtok_s_65536_27
      000097 E0               [24]  228 	movx	a,@dptr
      000098 FD               [12]  229 	mov	r5,a
      000099 A3               [24]  230 	inc	dptr
      00009A E0               [24]  231 	movx	a,@dptr
      00009B FE               [12]  232 	mov	r6,a
      00009C A3               [24]  233 	inc	dptr
      00009D E0               [24]  234 	movx	a,@dptr
      00009E FF               [12]  235 	mov	r7,a
      00009F 90r00r09         [24]  236 	mov	dptr,#_strtok_s1_65536_27
      0000A2 ED               [12]  237 	mov	a,r5
      0000A3 F0               [24]  238 	movx	@dptr,a
      0000A4 EE               [12]  239 	mov	a,r6
      0000A5 A3               [24]  240 	inc	dptr
      0000A6 F0               [24]  241 	movx	@dptr,a
      0000A7 EF               [12]  242 	mov	a,r7
      0000A8 A3               [24]  243 	inc	dptr
      0000A9 F0               [24]  244 	movx	@dptr,a
                                    245 ;	_strtok.c:55: while (*s) {
      0000AA                        246 00113$:
      0000AA 90r00r06         [24]  247 	mov	dptr,#_strtok_s_65536_27
      0000AD E0               [24]  248 	movx	a,@dptr
      0000AE FD               [12]  249 	mov	r5,a
      0000AF A3               [24]  250 	inc	dptr
      0000B0 E0               [24]  251 	movx	a,@dptr
      0000B1 FE               [12]  252 	mov	r6,a
      0000B2 A3               [24]  253 	inc	dptr
      0000B3 E0               [24]  254 	movx	a,@dptr
      0000B4 FF               [12]  255 	mov	r7,a
      0000B5 8D 82            [24]  256 	mov	dpl,r5
      0000B7 8E 83            [24]  257 	mov	dph,r6
      0000B9 8F F0            [24]  258 	mov	b,r7
      0000BB 12r00r00         [24]  259 	lcall	__gptrget
      0000BE FF               [12]  260 	mov	r7,a
      0000BF 60 6C            [24]  261 	jz	00115$
                                    262 ;	_strtok.c:56: if (strchr(control,*s)) {
      0000C1 90r00r00         [24]  263 	mov	dptr,#_strtok_PARM_2
      0000C4 E0               [24]  264 	movx	a,@dptr
      0000C5 FC               [12]  265 	mov	r4,a
      0000C6 A3               [24]  266 	inc	dptr
      0000C7 E0               [24]  267 	movx	a,@dptr
      0000C8 FD               [12]  268 	mov	r5,a
      0000C9 A3               [24]  269 	inc	dptr
      0000CA E0               [24]  270 	movx	a,@dptr
      0000CB FE               [12]  271 	mov	r6,a
      0000CC 90r00r00         [24]  272 	mov	dptr,#_strchr_PARM_2
      0000CF EF               [12]  273 	mov	a,r7
      0000D0 F0               [24]  274 	movx	@dptr,a
      0000D1 8C 82            [24]  275 	mov	dpl,r4
      0000D3 8D 83            [24]  276 	mov	dph,r5
      0000D5 8E F0            [24]  277 	mov	b,r6
      0000D7 78r00            [12]  278 	mov	r0,#_strchr
      0000D9 79s00            [12]  279 	mov	r1,#(_strchr >> 8)
      0000DB 7As00            [12]  280 	mov	r2,#(_strchr >> 16)
      0000DD 12r00r00         [24]  281 	lcall	__sdcc_banked_call
      0000E0 AD 82            [24]  282 	mov	r5,dpl
      0000E2 AE 83            [24]  283 	mov	r6,dph
      0000E4 AF F0            [24]  284 	mov	r7,b
      0000E6 ED               [12]  285 	mov	a,r5
      0000E7 4E               [12]  286 	orl	a,r6
      0000E8 60 34            [24]  287 	jz	00112$
                                    288 ;	_strtok.c:57: *s++ = '\0';
      0000EA 90r00r06         [24]  289 	mov	dptr,#_strtok_s_65536_27
      0000ED E0               [24]  290 	movx	a,@dptr
      0000EE FD               [12]  291 	mov	r5,a
      0000EF A3               [24]  292 	inc	dptr
      0000F0 E0               [24]  293 	movx	a,@dptr
      0000F1 FE               [12]  294 	mov	r6,a
      0000F2 A3               [24]  295 	inc	dptr
      0000F3 E0               [24]  296 	movx	a,@dptr
      0000F4 FF               [12]  297 	mov	r7,a
      0000F5 8D 82            [24]  298 	mov	dpl,r5
      0000F7 8E 83            [24]  299 	mov	dph,r6
      0000F9 8F F0            [24]  300 	mov	b,r7
      0000FB E4               [12]  301 	clr	a
      0000FC 12r00r00         [24]  302 	lcall	__gptrput
      0000FF 90r00r06         [24]  303 	mov	dptr,#_strtok_s_65536_27
      000102 E0               [24]  304 	movx	a,@dptr
      000103 24 01            [12]  305 	add	a,#0x01
      000105 F0               [24]  306 	movx	@dptr,a
      000106 A3               [24]  307 	inc	dptr
      000107 E0               [24]  308 	movx	a,@dptr
      000108 34 00            [12]  309 	addc	a,#0x00
      00010A F0               [24]  310 	movx	@dptr,a
                                    311 ;	_strtok.c:58: return s1;
      00010B 90r00r09         [24]  312 	mov	dptr,#_strtok_s1_65536_27
      00010E E0               [24]  313 	movx	a,@dptr
      00010F FD               [12]  314 	mov	r5,a
      000110 A3               [24]  315 	inc	dptr
      000111 E0               [24]  316 	movx	a,@dptr
      000112 FE               [12]  317 	mov	r6,a
      000113 A3               [24]  318 	inc	dptr
      000114 E0               [24]  319 	movx	a,@dptr
      000115 FF               [12]  320 	mov	r7,a
      000116 8D 82            [24]  321 	mov	dpl,r5
      000118 8E 83            [24]  322 	mov	dph,r6
      00011A 8F F0            [24]  323 	mov	b,r7
      00011C 80 3C            [24]  324 	sjmp	00119$
      00011E                        325 00112$:
                                    326 ;	_strtok.c:60: s++ ;
      00011E 90r00r06         [24]  327 	mov	dptr,#_strtok_s_65536_27
      000121 E0               [24]  328 	movx	a,@dptr
      000122 24 01            [12]  329 	add	a,#0x01
      000124 F0               [24]  330 	movx	@dptr,a
      000125 A3               [24]  331 	inc	dptr
      000126 E0               [24]  332 	movx	a,@dptr
      000127 34 00            [12]  333 	addc	a,#0x00
      000129 F0               [24]  334 	movx	@dptr,a
      00012A 02r00rAA         [24]  335 	ljmp	00113$
      00012D                        336 00115$:
                                    337 ;	_strtok.c:63: s = NULL;
      00012D 90r00r06         [24]  338 	mov	dptr,#_strtok_s_65536_27
      000130 E4               [12]  339 	clr	a
      000131 F0               [24]  340 	movx	@dptr,a
      000132 A3               [24]  341 	inc	dptr
      000133 F0               [24]  342 	movx	@dptr,a
      000134 A3               [24]  343 	inc	dptr
      000135 F0               [24]  344 	movx	@dptr,a
                                    345 ;	_strtok.c:65: if (*s1)
      000136 90r00r09         [24]  346 	mov	dptr,#_strtok_s1_65536_27
      000139 E0               [24]  347 	movx	a,@dptr
      00013A FD               [12]  348 	mov	r5,a
      00013B A3               [24]  349 	inc	dptr
      00013C E0               [24]  350 	movx	a,@dptr
      00013D FE               [12]  351 	mov	r6,a
      00013E A3               [24]  352 	inc	dptr
      00013F E0               [24]  353 	movx	a,@dptr
      000140 FF               [12]  354 	mov	r7,a
      000141 8D 82            [24]  355 	mov	dpl,r5
      000143 8E 83            [24]  356 	mov	dph,r6
      000145 8F F0            [24]  357 	mov	b,r7
      000147 12r00r00         [24]  358 	lcall	__gptrget
      00014A 60 08            [24]  359 	jz	00117$
                                    360 ;	_strtok.c:66: return s1;
      00014C 8D 82            [24]  361 	mov	dpl,r5
      00014E 8E 83            [24]  362 	mov	dph,r6
      000150 8F F0            [24]  363 	mov	b,r7
      000152 80 06            [24]  364 	sjmp	00119$
      000154                        365 00117$:
                                    366 ;	_strtok.c:68: return NULL;
      000154 90 00 00         [24]  367 	mov	dptr,#0x0000
      000157 75 F0 00         [24]  368 	mov	b,#0x00
      00015A                        369 00119$:
                                    370 ;	_strtok.c:69: }
      00015A 02r00r00         [24]  371 	ljmp	__sdcc_banked_ret
                                    372 	.area CSEG    (CODE)
                                    373 	.area CONST   (CODE)
                                    374 	.area XINIT   (CODE)
                                    375 	.area CABS    (ABS,CODE)
