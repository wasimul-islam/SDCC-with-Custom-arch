                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.2.14 #0 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module mbrtowc
                                      6 	.optsdcc -mds390 --model-flat24
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; CPU specific extensions
                                     10 ;--------------------------------------------------------
                                     11 	.DS80C390
                                     12 	.amode	2	; 24 bit flat addressing
                           000082    13 dpl	=	0x82
                           000083    14 dph	=	0x83
                           000084    15 dpl1	=	0x84
                           000085    16 dph1	=	0x85
                           000086    17 dps	=	0x86
                           000093    18 dpx	=	0x93
                           000095    19 dpx1	=	0x95
                           00009B    20 esp	=	0x9B
                           00009C    21 ap	=	0x9C
                           00009C    22 acc1	=	0x9C
                           0000D1    23 mcnt0	=	0xD1
                           0000D2    24 mcnt1	=	0xD2
                           0000D3    25 ma	=	0xD3
                           0000D4    26 mb	=	0xD4
                           0000D5    27 mc	=	0xD5
                           00009D    28 acon	=	0x9D
                           0000C6    29 mcon	=	0xC6
                           0000D1    30 F1	=	0xD1	; user flag
                                     31 ;--------------------------------------------------------
                                     32 ; Public variables in this module
                                     33 ;--------------------------------------------------------
                                     34 	.globl _mbrtowc_PARM_4
                                     35 	.globl _mbrtowc_PARM_3
                                     36 	.globl _mbrtowc_PARM_2
                                     37 	.globl _mbrtowc
                                     38 ;--------------------------------------------------------
                                     39 ; special function registers
                                     40 ;--------------------------------------------------------
                                     41 ;--------------------------------------------------------
                                     42 ; special function bits
                                     43 ;--------------------------------------------------------
                                     44 ;--------------------------------------------------------
                                     45 ; overlayable register banks
                                     46 ;--------------------------------------------------------
                                     47 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         48 	.ds 8
                                     49 ;--------------------------------------------------------
                                     50 ; internal ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area DSEG    (DATA)
                                     53 ;--------------------------------------------------------
                                     54 ; overlayable items in internal ram
                                     55 ;--------------------------------------------------------
                                     56 ;--------------------------------------------------------
                                     57 ; indirectly addressable internal ram data
                                     58 ;--------------------------------------------------------
                                     59 	.area ISEG    (DATA)
                                     60 ;--------------------------------------------------------
                                     61 ; absolute internal ram data
                                     62 ;--------------------------------------------------------
                                     63 	.area IABS    (ABS,DATA)
                                     64 	.area IABS    (ABS,DATA)
                                     65 ;--------------------------------------------------------
                                     66 ; bit data
                                     67 ;--------------------------------------------------------
                                     68 	.area BSEG    (BIT)
                                     69 ;--------------------------------------------------------
                                     70 ; paged external ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area PSEG    (PAG,XDATA)
                                     73 ;--------------------------------------------------------
                                     74 ; uninitialized external ram data
                                     75 ;--------------------------------------------------------
                                     76 	.area XSEG    (XDATA)
      000000                         77 _mbrtowc_PARM_2:
      000000                         78 	.ds 4
      000004                         79 _mbrtowc_PARM_3:
      000004                         80 	.ds 2
      000006                         81 _mbrtowc_PARM_4:
      000006                         82 	.ds 4
      00000A                         83 _mbrtowc_pwc_65536_9:
      00000A                         84 	.ds 4
      00000E                         85 _mbrtowc_first_byte_65536_10:
      00000E                         86 	.ds 1
      00000F                         87 _mbrtowc_mbseq_65536_10:
      00000F                         88 	.ds 4
      000013                         89 _mbrtowc_codepoint_65536_10:
      000013                         90 	.ds 4
      000017                         91 _mbrtowc_sps_65536_10:
      000017                         92 	.ds 3
      00001A                         93 _mbrtowc_sloc0_1_0:
      00001A                         94 	.ds 4
      00001E                         95 _mbrtowc_sloc1_1_0:
      00001E                         96 	.ds 1
      00001F                         97 _mbrtowc_sloc3_1_0:
      00001F                         98 	.ds 4
      000023                         99 _mbrtowc_sloc4_1_0:
      000023                        100 	.ds 4
      000027                        101 _mbrtowc_sloc6_1_0:
      000027                        102 	.ds 2
      000029                        103 _mbrtowc_sloc7_1_0:
      000029                        104 	.ds 4
                                    105 ;--------------------------------------------------------
                                    106 ; absolute external ram data
                                    107 ;--------------------------------------------------------
                                    108 	.area XABS    (ABS,XDATA)
                                    109 ;--------------------------------------------------------
                                    110 ; initialized external ram data
                                    111 ;--------------------------------------------------------
                                    112 	.area XISEG   (XDATA)
                                    113 ;--------------------------------------------------------
                                    114 ; global & static initialisations
                                    115 ;--------------------------------------------------------
                                    116 	.area HOME    (CODE)
                                    117 	.area GSINIT  (CODE)
                                    118 	.area GSFINAL (CODE)
                                    119 	.area GSINIT  (CODE)
                                    120 ;--------------------------------------------------------
                                    121 ; Home
                                    122 ;--------------------------------------------------------
                                    123 	.area HOME    (CODE)
                                    124 	.area HOME    (CODE)
                                    125 ;--------------------------------------------------------
                                    126 ; code
                                    127 ;--------------------------------------------------------
                                    128 	.area CSEG    (CODE)
                                    129 ;------------------------------------------------------------
                                    130 ;Allocation info for local variables in function 'mbrtowc'
                                    131 ;------------------------------------------------------------
                                    132 ;s                         Allocated with name '_mbrtowc_PARM_2'
                                    133 ;n                         Allocated with name '_mbrtowc_PARM_3'
                                    134 ;ps                        Allocated with name '_mbrtowc_PARM_4'
                                    135 ;pwc                       Allocated with name '_mbrtowc_pwc_65536_9'
                                    136 ;first_byte                Allocated with name '_mbrtowc_first_byte_65536_10'
                                    137 ;seqlen                    Allocated to registers 
                                    138 ;mbseq                     Allocated with name '_mbrtowc_mbseq_65536_10'
                                    139 ;codepoint                 Allocated with name '_mbrtowc_codepoint_65536_10'
                                    140 ;i                         Allocated to registers r2 
                                    141 ;j                         Allocated to registers 
                                    142 ;sps                       Allocated with name '_mbrtowc_sps_65536_10'
                                    143 ;sloc0                     Allocated with name '_mbrtowc_sloc0_1_0'
                                    144 ;sloc1                     Allocated with name '_mbrtowc_sloc1_1_0'
                                    145 ;sloc2                     Allocated with name '_mbrtowc_sloc2_1_0'
                                    146 ;sloc3                     Allocated with name '_mbrtowc_sloc3_1_0'
                                    147 ;sloc4                     Allocated with name '_mbrtowc_sloc4_1_0'
                                    148 ;sloc5                     Allocated with name '_mbrtowc_sloc5_1_0'
                                    149 ;sloc6                     Allocated with name '_mbrtowc_sloc6_1_0'
                                    150 ;sloc7                     Allocated with name '_mbrtowc_sloc7_1_0'
                                    151 ;------------------------------------------------------------
                                    152 ;	mbrtowc.c:32: size_t mbrtowc(wchar_t *restrict pwc, const char *restrict s, size_t n, mbstate_t *restrict ps)
                                    153 ;	-----------------------------------------
                                    154 ;	 function mbrtowc
                                    155 ;	-----------------------------------------
      000000                        156 _mbrtowc:
                           000002   157 	ar2 = 0x02
                           000003   158 	ar3 = 0x03
                           000004   159 	ar4 = 0x04
                           000005   160 	ar5 = 0x05
                           000006   161 	ar6 = 0x06
                           000007   162 	ar7 = 0x07
                           000000   163 	ar0 = 0x00
                           000001   164 	ar1 = 0x01
      000000 75 86 01         [12]  165 	mov     dps, #1
      000003 90s00r00r0A      [12]  166 	mov     dptr, #_mbrtowc_pwc_65536_9
      000007 E5 82            [ 8]  167 	mov	a,dpl
      000009 F0               [ 8]  168 	movx	@dptr,a
      00000A A3               [12]  169 	inc	dptr
      00000B E5 83            [ 8]  170 	mov	a,dph
      00000D F0               [ 8]  171 	movx	@dptr,a
      00000E A3               [12]  172 	inc	dptr
      00000F E5 93            [ 8]  173 	mov	a,dpx
      000011 F0               [ 8]  174 	movx	@dptr,a
      000012 A3               [12]  175 	inc	dptr
      000013 E5 F0            [ 8]  176 	mov	a,b
      000015 F0               [ 8]  177 	movx	@dptr,a
      000016 75 86 00         [12]  178 	mov	dps,#0
                                    179 ;	mbrtowc.c:41: if(!s)
      000019 90s00r00r00      [12]  180 	mov	dptr,#_mbrtowc_PARM_2
                                    181 ;	genAssign: resultIsFar = FALSE
      00001D E0               [ 8]  182 	movx	a,@dptr
      00001E FE               [ 4]  183 	mov	r6,a
      00001F A3               [12]  184 	inc	dptr
      000020 E0               [ 8]  185 	movx	a,@dptr
      000021 FF               [ 4]  186 	mov	r7,a
      000022 A3               [12]  187 	inc	dptr
      000023 E0               [ 8]  188 	movx	a,@dptr
      000024 F8               [ 4]  189 	mov	r0,a
      000025 A3               [12]  190 	inc	dptr
      000026 E0               [ 8]  191 	movx	a,@dptr
      000027 F9               [ 4]  192 	mov	r1,a
      000028 90s00r00r00      [12]  193 	mov	dptr,#_mbrtowc_PARM_2
      00002C E0               [ 8]  194 	movx	a,@dptr
      00002D F5 F0            [ 8]  195 	mov	b,a
      00002F A3               [12]  196 	inc	dptr
      000030 E0               [ 8]  197 	movx	a,@dptr
      000031 42 F0            [ 8]  198 	orl	b,a
      000033 A3               [12]  199 	inc	dptr
      000034 E0               [ 8]  200 	movx	a,@dptr
      000035 45 F0            [ 8]  201 	orl	a,b
      000037 70 4A            [12]  202 	jnz  00102$
      000039                        203 00279$:
                                    204 ;	mbrtowc.c:42: return(mbrtowc(0, "", 1, ps));
      000039 90s00r00r06      [12]  205 	mov	dptr,#_mbrtowc_PARM_4
                                    206 ;	genAssign: resultIsFar = FALSE
      00003D E0               [ 8]  207 	movx	a,@dptr
      00003E FA               [ 4]  208 	mov	r2,a
      00003F A3               [12]  209 	inc	dptr
      000040 E0               [ 8]  210 	movx	a,@dptr
      000041 FB               [ 4]  211 	mov	r3,a
      000042 A3               [12]  212 	inc	dptr
      000043 E0               [ 8]  213 	movx	a,@dptr
      000044 FC               [ 4]  214 	mov	r4,a
      000045 A3               [12]  215 	inc	dptr
      000046 E0               [ 8]  216 	movx	a,@dptr
      000047 FD               [ 4]  217 	mov	r5,a
                                    218 ;	genAssign: resultIsFar = TRUE
      000048 90s00r00r00      [12]  219 	mov	dptr,#_mbrtowc_PARM_2
      00004C 74r00            [ 8]  220 	mov	a,#___str_0
      00004E F0               [ 8]  221 	movx	@dptr,a
      00004F A3               [12]  222 	inc	dptr
      000050 74s00            [ 8]  223 	mov	a,#(___str_0 >> 8)
      000052 F0               [ 8]  224 	movx	@dptr,a
      000053 A3               [12]  225 	inc	dptr
      000054 74s00            [ 8]  226 	mov	a,#(___str_0 >> 16)
      000056 F0               [ 8]  227 	movx	@dptr,a
      000057 A3               [12]  228 	inc	dptr
      000058 74 80            [ 8]  229 	mov	a,#0x80
      00005A F0               [ 8]  230 	movx	@dptr,a
                                    231 ;	genAssign: resultIsFar = TRUE
      00005B 90s00r00r04      [12]  232 	mov	dptr,#_mbrtowc_PARM_3
      00005F 74 01            [ 8]  233 	mov	a,#0x01
      000061 F0               [ 8]  234 	movx	@dptr,a
      000062 E4               [ 4]  235 	clr	a
      000063 A3               [12]  236 	inc	dptr
      000064 F0               [ 8]  237 	movx	@dptr,a
                                    238 ;	genAssign: resultIsFar = TRUE
      000065 90s00r00r06      [12]  239 	mov	dptr,#_mbrtowc_PARM_4
      000069 EA               [ 4]  240 	mov	a,r2
      00006A F0               [ 8]  241 	movx	@dptr,a
      00006B A3               [12]  242 	inc	dptr
      00006C EB               [ 4]  243 	mov	a,r3
      00006D F0               [ 8]  244 	movx	@dptr,a
      00006E A3               [12]  245 	inc	dptr
      00006F EC               [ 4]  246 	mov	a,r4
      000070 F0               [ 8]  247 	movx	@dptr,a
      000071 A3               [12]  248 	inc	dptr
      000072 ED               [ 4]  249 	mov	a,r5
      000073 F0               [ 8]  250 	movx	@dptr,a
      000074 90 00 00 00      [12]  251 	mov  dptr,#0x0000
      000078 75 F0 00         [12]  252 	mov	b,#0x00
      00007B 12s00r00r00      [16]  253 	lcall	_mbrtowc
      00007F 02s00r05r29      [16]  254 	ljmp	00145$
      000083                        255 00102$:
                                    256 ;	mbrtowc.c:43: if(!n)
      000083 90s00r00r04      [12]  257 	mov	dptr,#_mbrtowc_PARM_3
      000087 E0               [ 8]  258 	movx	a,@dptr
      000088 F5 F0            [ 8]  259 	mov	b,a
      00008A A3               [12]  260 	inc	dptr
      00008B E0               [ 8]  261 	movx	a,@dptr
      00008C 45 F0            [ 8]  262 	orl	a,b
      00008E 70 04            [12]  263 	jnz	00280$
      000090 02s00r05r1B      [16]  264 	ljmp	00128$
      000094                        265 00280$:
                                    266 ;	mbrtowc.c:45: if(!ps)
      000094 90s00r00r06      [12]  267 	mov	dptr,#_mbrtowc_PARM_4
      000098 E0               [ 8]  268 	movx	a,@dptr
      000099 F5 F0            [ 8]  269 	mov	b,a
      00009B A3               [12]  270 	inc	dptr
      00009C E0               [ 8]  271 	movx	a,@dptr
      00009D 42 F0            [ 8]  272 	orl	b,a
      00009F A3               [12]  273 	inc	dptr
      0000A0 E0               [ 8]  274 	movx	a,@dptr
      0000A1 45 F0            [ 8]  275 	orl	a,b
      0000A3 70 12            [12]  276 	jnz  00106$
      0000A5                        277 00281$:
                                    278 ;	mbrtowc.c:47: ps = &sps;
      0000A5 90s00r00r06      [12]  279 	mov	dptr,#_mbrtowc_PARM_4
      0000A9 74r17            [ 8]  280 	mov	a,#_mbrtowc_sps_65536_10
      0000AB F0               [ 8]  281 	movx	@dptr,a
      0000AC A3               [12]  282 	inc	dptr
      0000AD 74s00            [ 8]  283 	mov	a,#(_mbrtowc_sps_65536_10 >> 8)
      0000AF F0               [ 8]  284 	movx	@dptr,a
      0000B0 A3               [12]  285 	inc	dptr
      0000B1 74s00            [ 8]  286 	mov	a,#(_mbrtowc_sps_65536_10 >> 16)
      0000B3 F0               [ 8]  287 	movx	@dptr,a
      0000B4 A3               [12]  288 	inc	dptr
      0000B5 E4               [ 4]  289 	clr	a
      0000B6 F0               [ 8]  290 	movx	@dptr,a
      0000B7                        291 00106$:
                                    292 ;	mbrtowc.c:50: for(i = 0; ps->c[i] && i < 3; i++)
      0000B7 90s00r00r06      [12]  293 	mov	dptr,#_mbrtowc_PARM_4
                                    294 ;	genAssign: resultIsFar = TRUE
      0000BB 75 86 21         [12]  295 	mov	dps,#0x21
      0000BE 90s00r00r1A      [12]  296 	mov	dptr,#_mbrtowc_sloc0_1_0
      0000C2 E0               [ 8]  297 	movx	a,@dptr
      0000C3 F0               [ 8]  298 	movx	@dptr,a
      0000C4 A3               [12]  299 	inc	dptr
      0000C5 A3               [12]  300 	inc	dptr
      0000C6 E0               [ 8]  301 	movx	a,@dptr
      0000C7 F0               [ 8]  302 	movx	@dptr,a
      0000C8 A3               [12]  303 	inc	dptr
      0000C9 A3               [12]  304 	inc	dptr
      0000CA E0               [ 8]  305 	movx	a,@dptr
      0000CB F0               [ 8]  306 	movx	@dptr,a
      0000CC A3               [12]  307 	inc	dptr
      0000CD A3               [12]  308 	inc	dptr
      0000CE E0               [ 8]  309 	movx	a,@dptr
      0000CF F0               [ 8]  310 	movx	@dptr,a
      0000D0 75 86 00         [12]  311 	mov	dps,#0
                                    312 ;	genAssign: resultIsFar = TRUE
      0000D3 90s00r00r1E      [12]  313 	mov	dptr,#_mbrtowc_sloc1_1_0
      0000D7 E4               [ 4]  314 	clr	a
      0000D8 F0               [ 8]  315 	movx	@dptr,a
      0000D9                        316 00131$:
      0000D9 90s00r00r1E      [12]  317 	mov	dptr,#_mbrtowc_sloc1_1_0
      0000DD 75 86 01         [12]  318 	mov	dps, #1
      0000E0 90s00r00r1A      [12]  319 	mov	dptr, #_mbrtowc_sloc0_1_0
      0000E4 15 86            [ 8]  320 	dec	dps
      0000E6 E0               [ 8]  321 	movx	a,@dptr
      0000E7 C5 9C            [ 8]  322 	xch	a, acc1
      0000E9 05 86            [ 8]  323 	inc	dps
      0000EB E0               [ 8]  324 	movx	a,@dptr
      0000EC C5 9C            [ 8]  325 	xch	a, acc1
      0000EE 25 9C            [ 8]  326 	add	a,acc1
      0000F0 FA               [ 4]  327 	mov	r2,a
      0000F1 E4               [ 4]  328 	clr	a
      0000F2 C5 9C            [ 8]  329 	xch	a, acc1
      0000F4 A3               [12]  330 	inc	dptr
      0000F5 E0               [ 8]  331 	movx	a,@dptr
      0000F6 C5 9C            [ 8]  332 	xch	a, acc1
      0000F8 35 9C            [ 8]  333 	addc	a,acc1
      0000FA FB               [ 4]  334 	mov	r3,a
      0000FB E4               [ 4]  335 	clr	a
      0000FC C5 9C            [ 8]  336 	xch	a, acc1
      0000FE A3               [12]  337 	inc	dptr
      0000FF E0               [ 8]  338 	movx	a,@dptr
      000100 C5 9C            [ 8]  339 	xch	a, acc1
      000102 35 9C            [ 8]  340 	addc	a,acc1
      000104 FC               [ 4]  341 	mov	r4,a
      000105 75 86 01         [12]  342 	mov     dps, #1
      000108 A3               [12]  343 	inc	dptr
      000109 E0               [ 8]  344 	movx	a,@dptr
      00010A 75 86 00         [12]  345 	mov	dps,#0
      00010D FD               [ 4]  346 	mov	r5,a
      00010E 8A 82            [ 8]  347 	mov	dpl,r2
      000110 8B 83            [ 8]  348 	mov	dph,r3
      000112 8C 93            [ 8]  349 	mov	dpx,r4
      000114 8D F0            [ 8]  350 	mov	b,r5
      000116 12s00r00r00      [16]  351 	lcall	__gptrget
      00011A FD               [ 4]  352 	mov  r5,a
      00011B 60 2C            [12]  353 	jz  00174$
      00011D                        354 00282$:
      00011D 90s00r00r1E      [12]  355 	mov	dptr,#_mbrtowc_sloc1_1_0
      000121 E0               [ 8]  356 	movx	a,@dptr
      000122 B4 03 00         [16]  357 	cjne	a,#0x03,00283$
      000125                        358 00283$:
      000125 50 22            [12]  359 	jnc  00174$
      000127                        360 00284$:
                                    361 ;	mbrtowc.c:51: mbseq[i] = ps->c[i];
      000127 90s00r00r1E      [12]  362 	mov	dptr,#_mbrtowc_sloc1_1_0
      00012B E0               [ 8]  363 	movx	a,@dptr
      00012C 24r0F            [ 8]  364 	add	a,#_mbrtowc_mbseq_65536_10
      00012E FA               [ 4]  365 	mov	r2,a
      00012F E4               [ 4]  366 	clr	a
      000130 34s00            [ 8]  367 	addc	a,#(_mbrtowc_mbseq_65536_10 >> 8)
      000132 FB               [ 4]  368 	mov	r3,a
      000133 E4               [ 4]  369 	clr	a
      000134 34s00            [ 8]  370 	addc	a,#(_mbrtowc_mbseq_65536_10 >> 16)
      000136 FC               [ 4]  371 	mov	r4,a
      000137 8A 82            [ 8]  372 	mov	dpl,r2
      000139 8B 83            [ 8]  373 	mov	dph,r3
      00013B 8C 93            [ 8]  374 	mov	dpx,r4
      00013D ED               [ 4]  375 	mov	a,r5
      00013E F0               [ 8]  376 	movx	@dptr,a
                                    377 ;	mbrtowc.c:50: for(i = 0; ps->c[i] && i < 3; i++)
      00013F 90s00r00r1E      [12]  378 	mov	dptr,#_mbrtowc_sloc1_1_0
      000143 E0               [ 8]  379 	movx	a,@dptr
      000144 24 01            [ 8]  380 	add	a,#0x01
      000146 F0               [ 8]  381 	movx	@dptr,a
      000147 80 90            [12]  382 	sjmp 00131$
      000149                        383 00174$:
      000149 C0 06            [ 8]  384 	push	ar6
      00014B C0 07            [ 8]  385 	push	ar7
      00014D C0 00            [ 8]  386 	push	ar0
      00014F C0 01            [ 8]  387 	push	ar1
      000151 90s00r00r1E      [12]  388 	mov	dptr,#_mbrtowc_sloc1_1_0
                                    389 ;	genAssign: resultIsFar = TRUE
      000155 E0               [ 8]  390 	movx	a,@dptr
      000156 FA               [ 4]  391 	mov	r2,a
                                    392 ;	mbrtowc.c:53: seqlen = 1;
                                    393 ;	genAssign: resultIsFar = FALSE
      000157 7B 01            [ 8]  394 	mov	r3,#0x01
                                    395 ;	mbrtowc.c:54: first_byte = ps->c[0] ? ps->c[0] : *s;
      000159 90s00r00r06      [12]  396 	mov	dptr,#_mbrtowc_PARM_4
                                    397 ;	genAssign: resultIsFar = FALSE
      00015D E0               [ 8]  398 	movx	a,@dptr
      00015E FC               [ 4]  399 	mov	r4,a
      00015F A3               [12]  400 	inc	dptr
      000160 E0               [ 8]  401 	movx	a,@dptr
      000161 FD               [ 4]  402 	mov	r5,a
      000162 A3               [12]  403 	inc	dptr
      000163 E0               [ 8]  404 	movx	a,@dptr
      000164 FE               [ 4]  405 	mov	r6,a
      000165 A3               [12]  406 	inc	dptr
      000166 E0               [ 8]  407 	movx	a,@dptr
      000167 FF               [ 4]  408 	mov	r7,a
      000168 8C 82            [ 8]  409 	mov	dpl,r4
      00016A 8D 83            [ 8]  410 	mov	dph,r5
      00016C 8E 93            [ 8]  411 	mov	dpx,r6
      00016E 8F F0            [ 8]  412 	mov	b,r7
      000170 12s00r00r00      [16]  413 	lcall	__gptrget
      000174 FC               [ 4]  414 	mov	r4,a
      000175 D0 01            [ 8]  415 	pop	ar1
      000177 D0 00            [ 8]  416 	pop	ar0
      000179 D0 07            [ 8]  417 	pop	ar7
      00017B D0 06            [ 8]  418 	pop	ar6
      00017D EC               [ 4]  419 	mov	a,r4
      00017E 60 02            [12]  420 	jz  00147$
      000180                        421 00285$:
                                    422 ;	genAssign: resultIsFar = FALSE
      000180 80 0D            [12]  423 	sjmp 00148$
      000182                        424 00147$:
      000182 8E 82            [ 8]  425 	mov	dpl,r6
      000184 8F 83            [ 8]  426 	mov	dph,r7
      000186 88 93            [ 8]  427 	mov	dpx,r0
      000188 89 F0            [ 8]  428 	mov	b,r1
      00018A 12s00r00r00      [16]  429 	lcall	__gptrget
      00018E FC               [ 4]  430 	mov	r4,a
      00018F                        431 00148$:
                                    432 ;	genAssign: resultIsFar = TRUE
      00018F 90s00r00r0E      [12]  433 	mov	dptr,#_mbrtowc_first_byte_65536_10
      000193 EC               [ 4]  434 	mov	a,r4
      000194 F0               [ 8]  435 	movx	@dptr,a
                                    436 ;	mbrtowc.c:56: if(first_byte & 0x80)
      000195 90s00r00r0E      [12]  437 	mov	dptr,#_mbrtowc_first_byte_65536_10
      000199 E0               [ 8]  438 	movx	a,@dptr
      00019A 30 E7 71         [12]  439 	jnb  acc[7],00112$
      00019D                        440 00286$:
                                    441 ;	mbrtowc.c:58: while (first_byte & (0x80 >> seqlen))
                                    442 ;	genAssign: resultIsFar = FALSE
      00019D 7D 01            [ 8]  443 	mov	r5,#0x01
      00019F                        444 00108$:
      00019F C0 06            [ 8]  445 	push	ar6
      0001A1 C0 07            [ 8]  446 	push	ar7
      0001A3 C0 00            [ 8]  447 	push	ar0
      0001A5 C0 01            [ 8]  448 	push	ar1
      0001A7 8D F0            [ 8]  449 	mov	b,r5
      0001A9 05 F0            [ 8]  450 	inc	b
      0001AB 7E 80            [ 8]  451 	mov	r6,#0x80
      0001AD E4               [ 4]  452 	clr  a
      0001AE FF               [ 4]  453 	mov  r7,a
      0001AF 33               [ 4]  454 	rlc	a
      0001B0 92 D2            [ 8]  455 	mov	ov,c
      0001B2 80 08            [12]  456 	sjmp	00288$
      0001B4                        457 00287$:
      0001B4 A2 D2            [ 8]  458 	mov	c,ov
      0001B6 EF               [ 4]  459 	mov	a,r7
      0001B7 13               [ 4]  460 	rrc	a
      0001B8 FF               [ 4]  461 	mov	r7,a
      0001B9 EE               [ 4]  462 	mov	a,r6
      0001BA 13               [ 4]  463 	rrc	a
      0001BB FE               [ 4]  464 	mov	r6,a
      0001BC                        465 00288$:
      0001BC D5 F0 F5         [16]  466 	djnz	b,00287$
      0001BF 90s00r00r0E      [12]  467 	mov	dptr,#_mbrtowc_first_byte_65536_10
      0001C3 E0               [ 8]  468 	movx	a,@dptr
      0001C4 F8               [ 4]  469 	mov	r0,a
      0001C5 79 00            [ 8]  470 	mov	r1,#0x00
      0001C7 E8               [ 4]  471 	mov	a,r0
      0001C8 52 06            [ 8]  472 	anl	ar6,a
      0001CA E9               [ 4]  473 	mov	a,r1
      0001CB 52 07            [ 8]  474 	anl	ar7,a
      0001CD EE               [ 4]  475 	mov	a,r6
      0001CE 4F               [ 4]  476 	orl	a,r7
      0001CF D0 01            [ 8]  477 	pop	ar1
      0001D1 D0 00            [ 8]  478 	pop	ar0
      0001D3 D0 07            [ 8]  479 	pop	ar7
      0001D5 D0 06            [ 8]  480 	pop	ar6
      0001D7 60 03            [12]  481 	jz  00175$
      0001D9                        482 00289$:
                                    483 ;	mbrtowc.c:59: seqlen++;
      0001D9 0D               [ 4]  484 	inc	r5
      0001DA 80 C3            [12]  485 	sjmp 00108$
      0001DC                        486 00175$:
      0001DC C0 06            [ 8]  487 	push	ar6
      0001DE C0 07            [ 8]  488 	push	ar7
      0001E0 C0 00            [ 8]  489 	push	ar0
      0001E2 C0 01            [ 8]  490 	push	ar1
                                    491 ;	genAssign: resultIsFar = FALSE
      0001E4 8D 03            [ 8]  492 	mov	ar3,r5
                                    493 ;	mbrtowc.c:60: first_byte &= (0xff >> (seqlen + 1));
      0001E6 0D               [ 4]  494 	inc	r5
      0001E7 8D F0            [ 8]  495 	mov	b,r5
      0001E9 05 F0            [ 8]  496 	inc	b
      0001EB 7D FF            [ 8]  497 	mov	r5,#0xff
      0001ED E4               [ 4]  498 	clr  a
      0001EE FE               [ 4]  499 	mov  r6,a
      0001EF 33               [ 4]  500 	rlc	a
      0001F0 92 D2            [ 8]  501 	mov	ov,c
      0001F2 80 08            [12]  502 	sjmp	00291$
      0001F4                        503 00290$:
      0001F4 A2 D2            [ 8]  504 	mov	c,ov
      0001F6 EE               [ 4]  505 	mov	a,r6
      0001F7 13               [ 4]  506 	rrc	a
      0001F8 FE               [ 4]  507 	mov	r6,a
      0001F9 ED               [ 4]  508 	mov	a,r5
      0001FA 13               [ 4]  509 	rrc	a
      0001FB FD               [ 4]  510 	mov	r5,a
      0001FC                        511 00291$:
      0001FC D5 F0 F5         [16]  512 	djnz	b,00290$
      0001FF 90s00r00r0E      [12]  513 	mov	dptr,#_mbrtowc_first_byte_65536_10
      000203 E0               [ 8]  514 	movx	a,@dptr
      000204 5D               [ 4]  515 	anl	a,r5
      000205 F0               [ 8]  516 	movx	@dptr,a
                                    517 ;	mbrtowc.c:101: return(-1);
      000206 D0 01            [ 8]  518 	pop	ar1
      000208 D0 00            [ 8]  519 	pop	ar0
      00020A D0 07            [ 8]  520 	pop	ar7
      00020C D0 06            [ 8]  521 	pop	ar6
                                    522 ;	mbrtowc.c:60: first_byte &= (0xff >> (seqlen + 1));
      00020E                        523 00112$:
                                    524 ;	mbrtowc.c:63: if(seqlen > 4)
      00020E C3               [ 4]  525 	clr	c
      00020F 74 04            [ 8]  526 	mov	a,#0x04
      000211 9B               [ 4]  527 	subb	a,r3
      000212 50 04            [12]  528 	jnc	00292$
      000214 02s00r05r1B      [16]  529 	ljmp	00128$
      000218                        530 00292$:
                                    531 ;	mbrtowc.c:66: if(i + n < seqlen) // Incomplete multibyte character
      000218 C0 06            [ 8]  532 	push	ar6
      00021A C0 07            [ 8]  533 	push	ar7
      00021C C0 00            [ 8]  534 	push	ar0
      00021E C0 01            [ 8]  535 	push	ar1
      000220 90s00r00r1A      [12]  536 	mov	dptr,#_mbrtowc_sloc0_1_0
      000224 EA               [ 4]  537 	mov	a,r2
      000225 F0               [ 8]  538 	movx	@dptr,a
      000226 A3               [12]  539 	inc	dptr
      000227 E4               [ 4]  540 	clr	a
      000228 F0               [ 8]  541 	movx	@dptr,a
      000229 90s00r00r1A      [12]  542 	mov	dptr,#_mbrtowc_sloc0_1_0
      00022D E0               [ 8]  543 	movx	a,@dptr
      00022E FD               [ 4]  544 	mov	r5,a
      00022F A3               [12]  545 	inc	dptr
      000230 E0               [ 8]  546 	movx	a,@dptr
      000231 FE               [ 4]  547 	mov	r6,a
      000232 90s00r00r04      [12]  548 	mov	dptr,#_mbrtowc_PARM_3
      000236 E0               [ 8]  549 	movx	a,@dptr
      000237 2D               [ 4]  550 	add	a,r5
      000238 FD               [ 4]  551 	mov	r5,a
      000239 A3               [12]  552 	inc	dptr
      00023A E0               [ 8]  553 	movx	a,@dptr
      00023B 3E               [ 4]  554 	addc	a,r6
      00023C FE               [ 4]  555 	mov	r6,a
      00023D 8B 07            [ 8]  556 	mov	ar7,r3
      00023F 78 00            [ 8]  557 	mov	r0,#0x00
      000241 C3               [ 4]  558 	clr	c
      000242 ED               [ 4]  559 	mov	a,r5
      000243 9F               [ 4]  560 	subb	a,r7
      000244 EE               [ 4]  561 	mov	a,r6
      000245 98               [ 4]  562 	subb	a,r0
      000246 D0 01            [ 8]  563 	pop	ar1
      000248 D0 00            [ 8]  564 	pop	ar0
      00024A D0 07            [ 8]  565 	pop	ar7
      00024C D0 06            [ 8]  566 	pop	ar6
      00024E 40 04            [12]  567 	jc	00293$
      000250 02s00r02rF6      [16]  568 	ljmp	00164$
      000254                        569 00293$:
                                    570 ;	mbrtowc.c:70: return(-2);
      000254 90s00r00r06      [12]  571 	mov	dptr,#_mbrtowc_PARM_4
                                    572 ;	genAssign: resultIsFar = TRUE
      000258 75 86 21         [12]  573 	mov	dps,#0x21
      00025B 90s00r00r1F      [12]  574 	mov	dptr,#_mbrtowc_sloc3_1_0
      00025F E0               [ 8]  575 	movx	a,@dptr
      000260 F0               [ 8]  576 	movx	@dptr,a
      000261 A3               [12]  577 	inc	dptr
      000262 A3               [12]  578 	inc	dptr
      000263 E0               [ 8]  579 	movx	a,@dptr
      000264 F0               [ 8]  580 	movx	@dptr,a
      000265 A3               [12]  581 	inc	dptr
      000266 A3               [12]  582 	inc	dptr
      000267 E0               [ 8]  583 	movx	a,@dptr
      000268 F0               [ 8]  584 	movx	@dptr,a
      000269 A3               [12]  585 	inc	dptr
      00026A A3               [12]  586 	inc	dptr
      00026B E0               [ 8]  587 	movx	a,@dptr
      00026C F0               [ 8]  588 	movx	@dptr,a
      00026D 75 86 00         [12]  589 	mov	dps,#0
                                    590 ;	genAssign: resultIsFar = TRUE
      000270 90s00r00r23      [12]  591 	mov	dptr,#_mbrtowc_sloc4_1_0
      000274 EE               [ 4]  592 	mov	a,r6
      000275 F0               [ 8]  593 	movx	@dptr,a
      000276 A3               [12]  594 	inc	dptr
      000277 EF               [ 4]  595 	mov	a,r7
      000278 F0               [ 8]  596 	movx	@dptr,a
      000279 A3               [12]  597 	inc	dptr
      00027A E8               [ 4]  598 	mov	a,r0
      00027B F0               [ 8]  599 	movx	@dptr,a
      00027C A3               [12]  600 	inc	dptr
      00027D E9               [ 4]  601 	mov	a,r1
      00027E F0               [ 8]  602 	movx	@dptr,a
                                    603 ;	genAssign: resultIsFar = FALSE
      00027F 8A 01            [ 8]  604 	mov	ar1,r2
      000281 90s00r00r04      [12]  605 	mov	dptr,#_mbrtowc_PARM_3
                                    606 ;	genAssign: resultIsFar = FALSE
      000285 E0               [ 8]  607 	movx	a,@dptr
      000286 FC               [ 4]  608 	mov	r4,a
      000287 A3               [12]  609 	inc	dptr
      000288 E0               [ 8]  610 	movx	a,@dptr
      000289 FE               [ 4]  611 	mov	r6,a
      00028A                        612 00134$:
                                    613 ;	mbrtowc.c:68: for(;n-- ; i++)
                                    614 ;	genAssign: resultIsFar = FALSE
      00028A 8C 02            [ 8]  615 	mov	ar2,r4
      00028C 8E 03            [ 8]  616 	mov	ar3,r6
      00028E 1C               [ 4]  617 	dec	r4
      00028F BC FF 01         [16]  618 	cjne	r4,#0xff,00294$
      000292 1E               [ 4]  619 	dec	r6
      000293                        620 00294$:
      000293 EA               [ 4]  621 	mov	a,r2
      000294 4B               [ 4]  622 	orl	a,r3
      000295 60 57            [12]  623 	jz  00115$
      000297                        624 00295$:
                                    625 ;	mbrtowc.c:69: ps->c[i] = *s++;
      000297 90s00r00r1F      [12]  626 	mov	dptr,#_mbrtowc_sloc3_1_0
      00029B E0               [ 8]  627 	movx	a,@dptr
      00029C 29               [ 4]  628 	add	a,r1
      00029D FA               [ 4]  629 	mov	r2,a
      00029E A3               [12]  630 	inc	dptr
      00029F E0               [ 8]  631 	movx	a,@dptr
      0002A0 34 00            [ 8]  632 	addc	a,#0x00
      0002A2 FB               [ 4]  633 	mov	r3,a
      0002A3 A3               [12]  634 	inc	dptr
      0002A4 E0               [ 8]  635 	movx	a,@dptr
      0002A5 34 00            [ 8]  636 	addc	a,#0x00
      0002A7 FF               [ 4]  637 	mov	r7,a
      0002A8 A3               [12]  638 	inc	dptr
      0002A9 E0               [ 8]  639 	movx	a,@dptr
      0002AA F8               [ 4]  640 	mov	r0,a
      0002AB 90s00r00r23      [12]  641 	mov	dptr,#_mbrtowc_sloc4_1_0
      0002AF E0               [ 8]  642 	movx	a,@dptr
      0002B0 C0 E0            [ 8]  643 	push	acc
      0002B2 A3               [12]  644 	inc	dptr
      0002B3 E0               [ 8]  645 	movx	a,@dptr
      0002B4 C0 E0            [ 8]  646 	push	acc
      0002B6 A3               [12]  647 	inc	dptr
      0002B7 E0               [ 8]  648 	movx	a,@dptr
      0002B8 C0 E0            [ 8]  649 	push	acc
      0002BA A3               [12]  650 	inc	dptr
      0002BB E0               [ 8]  651 	movx	a,@dptr
      0002BC F5 F0            [ 8]  652 	mov	b,a
      0002BE D0 93            [ 8]  653 	pop	dpx
      0002C0 D0 83            [ 8]  654 	pop	dph
      0002C2 D0 82            [ 8]  655 	pop	dpl
      0002C4 12s00r00r00      [16]  656 	lcall	__gptrget
      0002C8 FD               [ 4]  657 	mov	r5,a
      0002C9 90s00r00r23      [12]  658 	mov	dptr,#_mbrtowc_sloc4_1_0
      0002CD E0               [ 8]  659 	movx	a,@dptr
      0002CE 24 01            [ 8]  660 	add	a,#0x01
      0002D0 F0               [ 8]  661 	movx	@dptr,a
      0002D1 A3               [12]  662 	inc	dptr
      0002D2 E0               [ 8]  663 	movx	a,@dptr
      0002D3 34 00            [ 8]  664 	addc	a,#0x00
      0002D5 F0               [ 8]  665 	movx	@dptr,a
      0002D6 A3               [12]  666 	inc	dptr
      0002D7 E0               [ 8]  667 	movx	a,@dptr
      0002D8 34 00            [ 8]  668 	addc	a,#0x00
      0002DA F0               [ 8]  669 	movx	@dptr,a
      0002DB A3               [12]  670 	inc	dptr
      0002DC E0               [ 8]  671 	movx	a,@dptr
      0002DD F0               [ 8]  672 	movx	@dptr,a
      0002DE 8A 82            [ 8]  673 	mov	dpl,r2
      0002E0 8B 83            [ 8]  674 	mov	dph,r3
      0002E2 8F 93            [ 8]  675 	mov	dpx,r7
      0002E4 88 F0            [ 8]  676 	mov	b,r0
      0002E6 ED               [ 4]  677 	mov	a,r5
      0002E7 12s00r00r00      [16]  678 	lcall	__gptrput
                                    679 ;	mbrtowc.c:68: for(;n-- ; i++)
      0002EB 09               [ 4]  680 	inc	r1
      0002EC 80 9C            [12]  681 	sjmp 00134$
      0002EE                        682 00115$:
                                    683 ;	mbrtowc.c:70: return(-2);
      0002EE 90 00 FF FE      [12]  684 	mov  dptr,#0xfffe
      0002F2 02s00r05r29      [16]  685 	ljmp	00145$
                                    686 ;	mbrtowc.c:73: for(j = 0; j < i; j++)
      0002F6                        687 00164$:
      0002F6 90s00r00r06      [12]  688 	mov	dptr,#_mbrtowc_PARM_4
                                    689 ;	genAssign: resultIsFar = TRUE
      0002FA 75 86 21         [12]  690 	mov	dps,#0x21
      0002FD 90s00r00r29      [12]  691 	mov	dptr,#_mbrtowc_sloc7_1_0
      000301 E0               [ 8]  692 	movx	a,@dptr
      000302 F0               [ 8]  693 	movx	@dptr,a
      000303 A3               [12]  694 	inc	dptr
      000304 A3               [12]  695 	inc	dptr
      000305 E0               [ 8]  696 	movx	a,@dptr
      000306 F0               [ 8]  697 	movx	@dptr,a
      000307 A3               [12]  698 	inc	dptr
      000308 A3               [12]  699 	inc	dptr
      000309 E0               [ 8]  700 	movx	a,@dptr
      00030A F0               [ 8]  701 	movx	@dptr,a
      00030B A3               [12]  702 	inc	dptr
      00030C A3               [12]  703 	inc	dptr
      00030D E0               [ 8]  704 	movx	a,@dptr
      00030E F0               [ 8]  705 	movx	@dptr,a
      00030F 75 86 00         [12]  706 	mov	dps,#0
                                    707 ;	genAssign: resultIsFar = FALSE
      000312 7D 00            [ 8]  708 	mov	r5,#0x00
      000314                        709 00137$:
      000314 C3               [ 4]  710 	clr	c
      000315 ED               [ 4]  711 	mov	a,r5
      000316 9A               [ 4]  712 	subb	a,r2
      000317 50 34            [12]  713 	jnc  00118$
      000319                        714 00296$:
                                    715 ;	mbrtowc.c:74: ps->c[j] = 0;
      000319 C0 06            [ 8]  716 	push	ar6
      00031B C0 07            [ 8]  717 	push	ar7
      00031D C0 00            [ 8]  718 	push	ar0
      00031F C0 01            [ 8]  719 	push	ar1
      000321 90s00r00r29      [12]  720 	mov	dptr,#_mbrtowc_sloc7_1_0
      000325 E0               [ 8]  721 	movx	a,@dptr
      000326 2D               [ 4]  722 	add	a,r5
      000327 FE               [ 4]  723 	mov	r6,a
      000328 A3               [12]  724 	inc	dptr
      000329 E0               [ 8]  725 	movx	a,@dptr
      00032A 34 00            [ 8]  726 	addc	a,#0x00
      00032C FF               [ 4]  727 	mov	r7,a
      00032D A3               [12]  728 	inc	dptr
      00032E E0               [ 8]  729 	movx	a,@dptr
      00032F 34 00            [ 8]  730 	addc	a,#0x00
      000331 F8               [ 4]  731 	mov	r0,a
      000332 A3               [12]  732 	inc	dptr
      000333 E0               [ 8]  733 	movx	a,@dptr
      000334 F9               [ 4]  734 	mov	r1,a
      000335 8E 82            [ 8]  735 	mov	dpl,r6
      000337 8F 83            [ 8]  736 	mov	dph,r7
      000339 88 93            [ 8]  737 	mov	dpx,r0
      00033B 89 F0            [ 8]  738 	mov	b,r1
      00033D E4               [ 4]  739 	clr	a
      00033E 12s00r00r00      [16]  740 	lcall	__gptrput
                                    741 ;	mbrtowc.c:73: for(j = 0; j < i; j++)
      000342 0D               [ 4]  742 	inc	r5
      000343 D0 01            [ 8]  743 	pop	ar1
      000345 D0 00            [ 8]  744 	pop	ar0
      000347 D0 07            [ 8]  745 	pop	ar7
      000349 D0 06            [ 8]  746 	pop	ar6
      00034B 80 C7            [12]  747 	sjmp 00137$
      00034D                        748 00118$:
                                    749 ;	mbrtowc.c:76: for(n = 1, i = i ? i : 1; i < seqlen; i++, n++)
                                    750 ;	genAssign: resultIsFar = TRUE
      00034D 90s00r00r04      [12]  751 	mov	dptr,#_mbrtowc_PARM_3
      000351 74 01            [ 8]  752 	mov	a,#0x01
      000353 F0               [ 8]  753 	movx	@dptr,a
      000354 E4               [ 4]  754 	clr	a
      000355 A3               [12]  755 	inc	dptr
      000356 F0               [ 8]  756 	movx	@dptr,a
      000357 EA               [ 4]  757 	mov	a,r2
      000358 60 0B            [12]  758 	jz  00149$
      00035A                        759 00297$:
      00035A 90s00r00r1A      [12]  760 	mov	dptr,#_mbrtowc_sloc0_1_0
                                    761 ;	genAssign: resultIsFar = FALSE
      00035E E0               [ 8]  762 	movx	a,@dptr
      00035F FA               [ 4]  763 	mov	r2,a
      000360 A3               [12]  764 	inc	dptr
      000361 E0               [ 8]  765 	movx	a,@dptr
      000362 FD               [ 4]  766 	mov	r5,a
      000363 80 04            [12]  767 	sjmp 00150$
      000365                        768 00149$:
                                    769 ;	genAssign: resultIsFar = FALSE
      000365 7A 01            [ 8]  770 	mov	r2,#0x01
      000367 7D 00            [ 8]  771 	mov	r5,#0x00
      000369                        772 00150$:
                                    773 ;	genAssign: resultIsFar = FALSE
      000369 89 05            [ 8]  774 	mov	ar5,r1
                                    775 ;	genAssign: resultIsFar = TRUE
      00036B 90s00r00r29      [12]  776 	mov	dptr,#_mbrtowc_sloc7_1_0
      00036F 74 01            [ 8]  777 	mov	a,#0x01
      000371 F0               [ 8]  778 	movx	@dptr,a
      000372 E4               [ 4]  779 	clr	a
      000373 A3               [12]  780 	inc	dptr
      000374 F0               [ 8]  781 	movx	@dptr,a
      000375                        782 00140$:
      000375 C3               [ 4]  783 	clr	c
      000376 EA               [ 4]  784 	mov	a,r2
      000377 9B               [ 4]  785 	subb	a,r3
      000378 50 69            [12]  786 	jnc  00121$
      00037A                        787 00298$:
                                    788 ;	mbrtowc.c:78: mbseq[i] = *s++;
      00037A C0 03            [ 8]  789 	push	ar3
      00037C EA               [ 4]  790 	mov	a,r2
      00037D 24r0F            [ 8]  791 	add	a,#_mbrtowc_mbseq_65536_10
      00037F F5 84            [ 8]  792 	mov	dpl1,a
      000381 E4               [ 4]  793 	clr	a
      000382 34s00            [ 8]  794 	addc	a,#(_mbrtowc_mbseq_65536_10 >> 8)
      000384 F5 85            [ 8]  795 	mov	dph1,a
      000386 E4               [ 4]  796 	clr	a
      000387 34s00            [ 8]  797 	addc	a,#(_mbrtowc_mbseq_65536_10 >> 16)
      000389 F5 95            [ 8]  798 	mov	dpx1,a
      00038B 8E 82            [ 8]  799 	mov	dpl,r6
      00038D 8F 83            [ 8]  800 	mov	dph,r7
      00038F 88 93            [ 8]  801 	mov	dpx,r0
      000391 8D F0            [ 8]  802 	mov	b,r5
      000393 12s00r00r00      [16]  803 	lcall	__gptrget
      000397 FB               [ 4]  804 	mov	r3,a
      000398 A3               [12]  805 	inc	dptr
      000399 AE 82            [ 8]  806 	mov	r6,dpl
      00039B AF 83            [ 8]  807 	mov	r7,dph
      00039D A8 93            [ 8]  808 	mov	r0,dpx
      00039F AD F0            [ 8]  809 	mov	r5,b
      0003A1 EB               [ 4]  810 	mov	a,r3
      0003A2 05 86            [ 8]  811 	inc	dps
      0003A4 F0               [ 8]  812 	movx	@dptr,a
      0003A5 75 86 00         [12]  813 	mov	dps,#0
                                    814 ;	mbrtowc.c:79: if((mbseq[i] & 0xc0) != 0x80)
      0003A8 7C 00            [ 8]  815 	mov	r4,#0x00
      0003AA 53 03 C0         [12]  816 	anl	ar3,#0xc0
      0003AD 7C 00            [ 8]  817 	mov	r4,#0x00
      0003AF BB 80 05         [16]  818 	cjne	r3,#0x80,00299$
      0003B2 BC 00 02         [16]  819 	cjne	r4,#0x00,00299$
      0003B5 80 06            [12]  820 	sjmp	00300$
      0003B7                        821 00299$:
      0003B7 D0 03            [ 8]  822 	pop	ar3
      0003B9 02s00r05r1B      [16]  823 	ljmp	00128$
      0003BD                        824 00300$:
      0003BD D0 03            [ 8]  825 	pop	ar3
                                    826 ;	mbrtowc.c:76: for(n = 1, i = i ? i : 1; i < seqlen; i++, n++)
      0003BF 0A               [ 4]  827 	inc	r2
      0003C0 90s00r00r29      [12]  828 	mov	dptr,#_mbrtowc_sloc7_1_0
      0003C4 E0               [ 8]  829 	movx	a,@dptr
      0003C5 24 01            [ 8]  830 	add	a,#0x01
      0003C7 F0               [ 8]  831 	movx	@dptr,a
      0003C8 A3               [12]  832 	inc	dptr
      0003C9 E0               [ 8]  833 	movx	a,@dptr
      0003CA 34 00            [ 8]  834 	addc	a,#0x00
      0003CC F0               [ 8]  835 	movx	@dptr,a
      0003CD 90s00r00r29      [12]  836 	mov	dptr,#_mbrtowc_sloc7_1_0
                                    837 ;	genAssign: resultIsFar = TRUE
      0003D1 75 86 21         [12]  838 	mov	dps,#0x21
      0003D4 90s00r00r04      [12]  839 	mov	dptr,#_mbrtowc_PARM_3
      0003D8 E0               [ 8]  840 	movx	a,@dptr
      0003D9 F0               [ 8]  841 	movx	@dptr,a
      0003DA A3               [12]  842 	inc	dptr
      0003DB A3               [12]  843 	inc	dptr
      0003DC E0               [ 8]  844 	movx	a,@dptr
      0003DD F0               [ 8]  845 	movx	@dptr,a
      0003DE 75 86 00         [12]  846 	mov	dps,#0
      0003E1 80 92            [12]  847 	sjmp 00140$
      0003E3                        848 00121$:
                                    849 ;	mbrtowc.c:83: codepoint = first_byte;
      0003E3 90s00r00r0E      [12]  850 	mov	dptr,#_mbrtowc_first_byte_65536_10
      0003E7 E0               [ 8]  851 	movx	a,@dptr
      0003E8 FA               [ 4]  852 	mov	r2,a
      0003E9 7C 00            [ 8]  853 	mov	r4,#0x00
      0003EB 7D 00            [ 8]  854 	mov	r5,#0x00
      0003ED 7E 00            [ 8]  855 	mov	r6,#0x00
                                    856 ;	mbrtowc.c:85: for(s = mbseq + 1, seqlen--; seqlen; seqlen--)
      0003EF 90s00r00r29      [12]  857 	mov	dptr,#_mbrtowc_sloc7_1_0
      0003F3 74r10            [ 8]  858 	mov	a,#(_mbrtowc_mbseq_65536_10 + 0x000001)
      0003F5 F0               [ 8]  859 	movx	@dptr,a
      0003F6 A3               [12]  860 	inc	dptr
      0003F7 74s00            [ 8]  861 	mov	a,#((_mbrtowc_mbseq_65536_10 + 0x000001) >> 8)
      0003F9 F0               [ 8]  862 	movx	@dptr,a
      0003FA A3               [12]  863 	inc	dptr
      0003FB 74s00            [ 8]  864 	mov	a,#((_mbrtowc_mbseq_65536_10 + 0x000001) >> 16)
      0003FD F0               [ 8]  865 	movx	@dptr,a
      0003FE A3               [12]  866 	inc	dptr
      0003FF E4               [ 4]  867 	clr	a
      000400 F0               [ 8]  868 	movx	@dptr,a
      000401 90s00r00r27      [12]  869 	mov	dptr,#_mbrtowc_sloc6_1_0
      000405 EB               [ 4]  870 	mov	a,r3
      000406 14               [ 4]  871 	dec	a
      000407 F0               [ 8]  872 	movx	@dptr,a
      000408                        873 00143$:
      000408 90s00r00r27      [12]  874 	mov	dptr,#_mbrtowc_sloc6_1_0
      00040C E0               [ 8]  875 	movx	a,@dptr
      00040D 70 04            [12]  876 	jnz	00301$
      00040F 02s00r04rAD      [16]  877 	ljmp	00122$
      000413                        878 00301$:
                                    879 ;	mbrtowc.c:87: codepoint <<= 6;
      000413 8D 01            [ 8]  880 	mov	ar1,r5
      000415 EE               [ 4]  881 	mov	a,r6
      000416 54 03            [ 8]  882 	anl	a,#0x03
      000418 A2 E0            [ 8]  883 	mov	c,acc[0]
      00041A C9               [ 4]  884 	xch	a,r1
      00041B 13               [ 4]  885 	rrc	a
      00041C C9               [ 4]  886 	xch	a,r1
      00041D 13               [ 4]  887 	rrc	a
      00041E A2 E0            [ 8]  888 	mov	c,acc[0]
      000420 C9               [ 4]  889 	xch	a,r1
      000421 13               [ 4]  890 	rrc	a
      000422 C9               [ 4]  891 	xch	a,r1
      000423 13               [ 4]  892 	rrc	a
      000424 C9               [ 4]  893 	xch	a,r1
      000425 FB               [ 4]  894 	mov	r3,a
      000426 EC               [ 4]  895 	mov	a,r4
      000427 03               [ 4]  896 	rr	a
      000428 03               [ 4]  897 	rr	a
      000429 54 3F            [ 8]  898 	anl	a,#0x3f
      00042B 49               [ 4]  899 	orl	a,r1
      00042C F9               [ 4]  900 	mov	r1,a
      00042D 8A 07            [ 8]  901 	mov	ar7,r2
      00042F EC               [ 4]  902 	mov	a,r4
      000430 54 03            [ 8]  903 	anl	a,#0x03
      000432 A2 E0            [ 8]  904 	mov	c,acc[0]
      000434 CF               [ 4]  905 	xch	a,r7
      000435 13               [ 4]  906 	rrc	a
      000436 CF               [ 4]  907 	xch	a,r7
      000437 13               [ 4]  908 	rrc	a
      000438 A2 E0            [ 8]  909 	mov	c,acc[0]
      00043A CF               [ 4]  910 	xch	a,r7
      00043B 13               [ 4]  911 	rrc	a
      00043C CF               [ 4]  912 	xch	a,r7
      00043D 13               [ 4]  913 	rrc	a
      00043E CF               [ 4]  914 	xch	a,r7
      00043F F8               [ 4]  915 	mov	r0,a
                                    916 ;	genAssign: resultIsFar = TRUE
      000440 90s00r00r13      [12]  917 	mov	dptr,#_mbrtowc_codepoint_65536_10
      000444 EF               [ 4]  918 	mov	a,r7
      000445 F0               [ 8]  919 	movx	@dptr,a
      000446 A3               [12]  920 	inc	dptr
      000447 E8               [ 4]  921 	mov	a,r0
      000448 F0               [ 8]  922 	movx	@dptr,a
      000449 A3               [12]  923 	inc	dptr
      00044A E9               [ 4]  924 	mov	a,r1
      00044B F0               [ 8]  925 	movx	@dptr,a
      00044C A3               [12]  926 	inc	dptr
      00044D EB               [ 4]  927 	mov	a,r3
      00044E F0               [ 8]  928 	movx	@dptr,a
                                    929 ;	mbrtowc.c:88: codepoint |= (*s & 0x3f);
      00044F 90s00r00r29      [12]  930 	mov	dptr,#_mbrtowc_sloc7_1_0
      000453 E0               [ 8]  931 	movx	a,@dptr
      000454 C0 E0            [ 8]  932 	push	acc
      000456 A3               [12]  933 	inc	dptr
      000457 E0               [ 8]  934 	movx	a,@dptr
      000458 C0 E0            [ 8]  935 	push	acc
      00045A A3               [12]  936 	inc	dptr
      00045B E0               [ 8]  937 	movx	a,@dptr
      00045C C0 E0            [ 8]  938 	push	acc
      00045E A3               [12]  939 	inc	dptr
      00045F E0               [ 8]  940 	movx	a,@dptr
      000460 F5 F0            [ 8]  941 	mov	b,a
      000462 D0 93            [ 8]  942 	pop	dpx
      000464 D0 83            [ 8]  943 	pop	dph
      000466 D0 82            [ 8]  944 	pop	dpl
      000468 12s00r00r00      [16]  945 	lcall	__gptrget
      00046C FB               [ 4]  946 	mov	r3,a
      00046D 7F 00            [ 8]  947 	mov	r7,#0x00
      00046F 53 03 3F         [12]  948 	anl	ar3,#0x3f
      000472 7F 00            [ 8]  949 	mov	r7,#0x00
      000474 EF               [ 4]  950 	mov	a,r7
      000475 33               [ 4]  951 	rlc	a
      000476 95 E0            [ 8]  952 	subb	a,acc
      000478 F8               [ 4]  953 	mov	r0,a
      000479 F9               [ 4]  954 	mov	r1,a
      00047A 90s00r00r13      [12]  955 	mov	dptr,#_mbrtowc_codepoint_65536_10
      00047E E0               [ 8]  956 	movx	a,@dptr
      00047F 4B               [ 4]  957 	orl	a,r3
      000480 FA               [ 4]  958 	mov	r2,a
      000481 A3               [12]  959 	inc	dptr
      000482 E0               [ 8]  960 	movx	a,@dptr
      000483 4F               [ 4]  961 	orl	a,r7
      000484 FC               [ 4]  962 	mov	r4,a
      000485 A3               [12]  963 	inc	dptr
      000486 E0               [ 8]  964 	movx	a,@dptr
      000487 48               [ 4]  965 	orl	a,r0
      000488 FD               [ 4]  966 	mov	r5,a
      000489 A3               [12]  967 	inc	dptr
      00048A E0               [ 8]  968 	movx	a,@dptr
      00048B 49               [ 4]  969 	orl	a,r1
      00048C FE               [ 4]  970 	mov	r6,a
                                    971 ;	mbrtowc.c:89: s++;
      00048D 90s00r00r29      [12]  972 	mov	dptr,#_mbrtowc_sloc7_1_0
      000491 E0               [ 8]  973 	movx	a,@dptr
      000492 24 01            [ 8]  974 	add	a,#0x01
      000494 F0               [ 8]  975 	movx	@dptr,a
      000495 A3               [12]  976 	inc	dptr
      000496 E0               [ 8]  977 	movx	a,@dptr
      000497 34 00            [ 8]  978 	addc	a,#0x00
      000499 F0               [ 8]  979 	movx	@dptr,a
      00049A A3               [12]  980 	inc	dptr
      00049B E0               [ 8]  981 	movx	a,@dptr
      00049C 34 00            [ 8]  982 	addc	a,#0x00
      00049E F0               [ 8]  983 	movx	@dptr,a
      00049F A3               [12]  984 	inc	dptr
      0004A0 E0               [ 8]  985 	movx	a,@dptr
      0004A1 F0               [ 8]  986 	movx	@dptr,a
                                    987 ;	mbrtowc.c:85: for(s = mbseq + 1, seqlen--; seqlen; seqlen--)
      0004A2 90s00r00r27      [12]  988 	mov	dptr,#_mbrtowc_sloc6_1_0
      0004A6 E0               [ 8]  989 	movx	a,@dptr
      0004A7 14               [ 4]  990 	dec	a
      0004A8 F0               [ 8]  991 	movx	@dptr,a
      0004A9 02s00r04r08      [16]  992 	ljmp	00143$
      0004AD                        993 00122$:
                                    994 ;	mbrtowc.c:92: if(codepoint >= 0xd800 && codepoint <= 0xdfff) // UTF-16 surrogate.
      0004AD C3               [ 4]  995 	clr	c
      0004AE EA               [ 4]  996 	mov	a,r2
      0004AF 94 00            [ 8]  997 	subb	a,#0x00
      0004B1 EC               [ 4]  998 	mov	a,r4
      0004B2 94 D8            [ 8]  999 	subb	a,#0xd8
      0004B4 ED               [ 4] 1000 	mov	a,r5
      0004B5 94 00            [ 8] 1001 	subb	a,#0x00
      0004B7 EE               [ 4] 1002 	mov	a,r6
      0004B8 94 00            [ 8] 1003 	subb	a,#0x00
      0004BA 40 13            [12] 1004 	jc   00124$
      0004BC                       1005 00302$:
      0004BC C3               [ 4] 1006 	clr	c
      0004BD 74 FF            [ 8] 1007 	mov	a,#0xff
      0004BF 9A               [ 4] 1008 	subb	a,r2
      0004C0 74 DF            [ 8] 1009 	mov	a,#0xdf
      0004C2 9C               [ 4] 1010 	subb	a,r4
      0004C3 E4               [ 4] 1011 	clr	a
      0004C4 9D               [ 4] 1012 	subb	a,r5
      0004C5 E4               [ 4] 1013 	clr	a
      0004C6 9E               [ 4] 1014 	subb	a,r6
      0004C7 40 06            [12] 1015 	jc   00124$
      0004C9                       1016 00303$:
                                   1017 ;	mbrtowc.c:93: return(-1);
      0004C9 90 00 FF FF      [12] 1018 	mov  dptr,#0xffff
      0004CD 80 5A            [12] 1019 	sjmp 00145$
      0004CF                       1020 00124$:
                                   1021 ;	mbrtowc.c:95: if(pwc)
      0004CF 90s00r00r0A      [12] 1022 	mov	dptr,#_mbrtowc_pwc_65536_9
      0004D3 E0               [ 8] 1023 	movx	a,@dptr
      0004D4 F5 F0            [ 8] 1024 	mov	b,a
      0004D6 A3               [12] 1025 	inc	dptr
      0004D7 E0               [ 8] 1026 	movx	a,@dptr
      0004D8 42 F0            [ 8] 1027 	orl	b,a
      0004DA A3               [12] 1028 	inc	dptr
      0004DB E0               [ 8] 1029 	movx	a,@dptr
      0004DC 45 F0            [ 8] 1030 	orl	a,b
      0004DE 60 28            [12] 1031 	jz  00127$
      0004E0                       1032 00304$:
                                   1033 ;	mbrtowc.c:96: *pwc = codepoint;
      0004E0 90s00r00r0A      [12] 1034 	mov	dptr,#_mbrtowc_pwc_65536_9
      0004E4 E0               [ 8] 1035 	movx	a,@dptr
      0004E5 C0 E0            [ 8] 1036 	push	acc
      0004E7 A3               [12] 1037 	inc	dptr
      0004E8 E0               [ 8] 1038 	movx	a,@dptr
      0004E9 C0 E0            [ 8] 1039 	push	acc
      0004EB A3               [12] 1040 	inc	dptr
      0004EC E0               [ 8] 1041 	movx	a,@dptr
      0004ED C0 E0            [ 8] 1042 	push	acc
      0004EF A3               [12] 1043 	inc	dptr
      0004F0 E0               [ 8] 1044 	movx	a,@dptr
      0004F1 F5 F0            [ 8] 1045 	mov	b,a
      0004F3 D0 93            [ 8] 1046 	pop	dpx
      0004F5 D0 83            [ 8] 1047 	pop	dph
      0004F7 D0 82            [ 8] 1048 	pop	dpl
      0004F9 8A 9C            [ 8] 1049 	mov	acc1, r2
      0004FB EC               [ 4] 1050 	mov	a,r4
      0004FC 12s00r00r00      [16] 1051 	lcall	__gptrputWord
      000500 A3               [12] 1052 	inc	dptr
      000501 8D 9C            [ 8] 1053 	mov	acc1, r5
      000503 EE               [ 4] 1054 	mov	a,r6
      000504 12s00r00r00      [16] 1055 	lcall	__gptrputWord
      000508                       1056 00127$:
                                   1057 ;	mbrtowc.c:97: return(n);
      000508 75 86 01         [12] 1058 	mov     dps, #1
      00050B 90s00r00r04      [12] 1059 	mov     dptr, #_mbrtowc_PARM_3
      00050F E0               [ 8] 1060 	movx	a,@dptr
      000510 F5 82            [ 8] 1061 	mov	dpl,a
      000512 A3               [12] 1062 	inc	dptr
      000513 E0               [ 8] 1063 	movx	a,@dptr
      000514 F5 83            [ 8] 1064 	mov	dph,a
      000516 75 86 00         [12] 1065 	mov	dps,#0
                                   1066 ;	mbrtowc.c:99: eilseq:
      000519 80 0E            [12] 1067 	sjmp 00145$
      00051B                       1068 00128$:
                                   1069 ;	mbrtowc.c:100: errno = EILSEQ;
                                   1070 ;	genAssign: resultIsFar = TRUE
      00051B 90s00r00r00      [12] 1071 	mov	dptr,#_errno
      00051F 74 54            [ 8] 1072 	mov	a,#0x54
      000521 F0               [ 8] 1073 	movx	@dptr,a
      000522 E4               [ 4] 1074 	clr	a
      000523 A3               [12] 1075 	inc	dptr
      000524 F0               [ 8] 1076 	movx	@dptr,a
                                   1077 ;	mbrtowc.c:101: return(-1);
      000525 90 00 FF FF      [12] 1078 	mov  dptr,#0xffff
      000529                       1079 00145$:
                                   1080 ;	mbrtowc.c:102: }
      000529 22               [16] 1081 	ret
                                   1082 	.area CSEG    (CODE)
                                   1083 	.area CONST   (CODE)
                                   1084 	.area CONST   (CODE)
      000000                       1085 ___str_0:
      000000 00                    1086 	.db 0x00
                                   1087 	.area CSEG    (CODE)
                                   1088 	.area XINIT   (CODE)
                                   1089 	.area CABS    (ABS,CODE)
